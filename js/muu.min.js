var muugrid,searchField,searchFieldValue,itemz,filt;!function(b,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define(a):(b="undefined"!=typeof globalThis?globalThis:b||self).Muuri=a()}(this,function(){"use strict";var ad={},G="function"==typeof Map?new Map:null,q="swap",F="move",E="layoutStart",aR="layoutEnd",aU="layoutAbort",aW="remove",V="hideStart",aZ="filter",bi="sort",al="move",ai="send",z="beforeSend",af="receive",ac="beforeReceive",Z="dragReleaseEnd",bs="ontouchstart"in window,ax=!!window.PointerEvent,aw=!!window.navigator.msPointerEnabled,ag,au,bJ,ah,ch,bW,bN,bO,D,bE,aq,bQ,bu,br,bq,bp,bo,bz,bm,bh,bd,bn,a$,aQ,aN,aM,aK,aJ,aP,e,am,p,I,ce,$,aH,aI,J,cf,aO,s,cd,cc,cb,aY,aF,aD,W,N,b_,bY,bX,bK,x,n,R,ak,bT,bt,bS,bx,av,ap,bP,bD,bM,bB,O,ae,bU,bL,H,bf,an,B,aV;function l(){this._events={},this._queue=[],this._counter=0,this._clearOnEmit=!1}l.prototype.on=function(a,c){if(!this._events||!a||!c)return this;var b=this._events[a];return b||(b=this._events[a]=[]),b.push(c),this},l.prototype.off=function(b,c){if(!this._events||!b||!c)return this;var d,a=this._events[b];if(!a||!a.length)return this;for(;-1!==(d=a.indexOf(c));)a.splice(d,1);return this},l.prototype.clear=function(a){if(!this._events||!a)return this;var b=this._events[a];return b&&(b.length=0,delete this._events[a]),this},l.prototype.emit=function(g){var d,e,a,f,c,b,h;if(!this._events||!g)return this._clearOnEmit=!1,this;if(d=this._events[g],!d||!d.length)return this._clearOnEmit=!1,this;a=this._queue,f=a.length,c=arguments.length-1,c>3&&((e=[]).push.apply(e,arguments),e.shift()),a.push.apply(a,d),this._clearOnEmit&&(d.length=0,this._clearOnEmit=!1),++this._counter;for(b=f,h=a.length;b<h;b++)if(0===c?a[b]():1===c?a[b](arguments[1]):2===c?a[b](arguments[1],arguments[2]):3===c?a[b](arguments[1],arguments[2],arguments[3]):a[b].apply(null,e),!this._events)return this;return--this._counter,this._counter||(a.length=0),this},l.prototype.burst=function(){return this._events?(this._clearOnEmit=!0,this.emit.apply(this,arguments),this):this},l.prototype.countListeners=function(b){if(!this._events)return 0;var a=this._events[b];return a?a.length:0},l.prototype.destroy=function(){return this._events?(this._queue.length=this._counter=0,this._events=null,this):this},ag=ax?"pointerout":aw?"MSPointerOut":"";function y(a){ag&&(this._dragger=a,this._timeout=null,this._outEvent=null,this._isActive=!1,this._addBehaviour=this._addBehaviour.bind(this),this._removeBehaviour=this._removeBehaviour.bind(this),this._onTimeout=this._onTimeout.bind(this),this._resetData=this._resetData.bind(this),this._onStart=this._onStart.bind(this),this._onOut=this._onOut.bind(this),this._dragger.on("start",this._onStart))}y.prototype._addBehaviour=function(){this._isActive||(this._isActive=!0,this._dragger.on("move",this._resetData),this._dragger.on("cancel",this._removeBehaviour),this._dragger.on("end",this._removeBehaviour),window.addEventListener(ag,this._onOut))},y.prototype._removeBehaviour=function(){this._isActive&&(this._dragger.off("move",this._resetData),this._dragger.off("cancel",this._removeBehaviour),this._dragger.off("end",this._removeBehaviour),window.removeEventListener(ag,this._onOut),this._resetData(),this._isActive=!1)},y.prototype._resetData=function(){window.clearTimeout(this._timeout),this._timeout=null,this._outEvent=null},y.prototype._onStart=function(a){"mouse"!==a.pointerType&&this._addBehaviour()},y.prototype._onOut=function(a){this._dragger._getTrackedTouch(a)&&(this._resetData(),this._outEvent=a,this._timeout=window.setTimeout(this._onTimeout,100))},y.prototype._onTimeout=function(){var a=this._outEvent;this._resetData(),this._dragger.isActive()&&this._dragger._onCancel(a)},y.prototype.destroy=function(){ag&&(this._dragger.off("start",this._onStart),this._removeBehaviour())},au=["","webkit","moz","ms","o","Webkit","Moz","MS","O"],bJ={};function aj(d,a){var b=bJ[a]||"",e,c;if(b)return b;for(e=a[0].toUpperCase()+a.slice(1),c=0;c<au.length;){if((b=au[c]?au[c]+e:a)in d)return bJ[a]=b,b;++c}return""}function aG(){var a=!1,b;try{b=Object.defineProperty({},"passive",{get:function(){a=!0}}),window.addEventListener("testPassive",null,b),window.removeEventListener("testPassive",null,b)}catch(a){}return a}ah=window.navigator.userAgent.toLowerCase(),ch=ah.indexOf("edge")>-1,bW=ah.indexOf("trident")>-1,bN=ah.indexOf("firefox")>-1,bO=ah.indexOf("android")>-1,D=!!aG()&&{passive:!0},bE="touchAction",aq=aj(document.documentElement.style,bE);function a(b,c){this._element=b,this._emitter=new l,this._isDestroyed=!1,this._cssProps={},this._touchAction="",this._isActive=!1,this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._onStart=this._onStart.bind(this),this._onMove=this._onMove.bind(this),this._onCancel=this._onCancel.bind(this),this._onEnd=this._onEnd.bind(this),this._edgeHack=null,(ch||bW)&&(ax||aw)&&(this._edgeHack=new y(this)),this.setCssProps(c),this._touchAction||this.setTouchAction("auto"),b.addEventListener("dragstart",a._preventDefault,!1),b.addEventListener(a._inputEvents.start,this._onStart,D)}a._pointerEvents={start:"pointerdown",move:"pointermove",cancel:"pointercancel",end:"pointerup"},a._msPointerEvents={start:"MSPointerDown",move:"MSPointerMove",cancel:"MSPointerCancel",end:"MSPointerUp"},a._touchEvents={start:"touchstart",move:"touchmove",cancel:"touchcancel",end:"touchend"},a._mouseEvents={start:"mousedown",move:"mousemove",cancel:"",end:"mouseup"},a._inputEvents=bs?a._touchEvents:ax?a._pointerEvents:aw?a._msPointerEvents:a._mouseEvents,a._emitter=new l,a._emitterEvents={start:"start",move:"move",end:"end",cancel:"cancel"},a._activeInstances=[],a._preventDefault=function(a){a.preventDefault&&!1!==a.cancelable&&a.preventDefault()},a._activateInstance=function(b){a._activeInstances.indexOf(b)>-1||(a._activeInstances.push(b),a._emitter.on(a._emitterEvents.move,b._onMove),a._emitter.on(a._emitterEvents.cancel,b._onCancel),a._emitter.on(a._emitterEvents.end,b._onEnd),1===a._activeInstances.length&&a._bindListeners())},a._deactivateInstance=function(b){var c=a._activeInstances.indexOf(b);-1!==c&&(a._activeInstances.splice(c,1),a._emitter.off(a._emitterEvents.move,b._onMove),a._emitter.off(a._emitterEvents.cancel,b._onCancel),a._emitter.off(a._emitterEvents.end,b._onEnd),a._activeInstances.length||a._unbindListeners())},a._bindListeners=function(){window.addEventListener(a._inputEvents.move,a._onMove,D),window.addEventListener(a._inputEvents.end,a._onEnd,D),a._inputEvents.cancel&&window.addEventListener(a._inputEvents.cancel,a._onCancel,D)},a._unbindListeners=function(){window.removeEventListener(a._inputEvents.move,a._onMove,D),window.removeEventListener(a._inputEvents.end,a._onEnd,D),a._inputEvents.cancel&&window.removeEventListener(a._inputEvents.cancel,a._onCancel,D)},a._getEventPointerId=function(a){return"number"==typeof a.pointerId?a.pointerId:a.changedTouches?a.changedTouches[0]?a.changedTouches[0].identifier:null:1},a._getTouchById=function(a,c){if("number"==typeof a.pointerId)return a.pointerId===c?a:null;if(a.changedTouches){for(var b=0;b<a.changedTouches.length;b++)if(a.changedTouches[b].identifier===c)return a.changedTouches[b];return null}return a},a._onMove=function(b){a._emitter.emit(a._emitterEvents.move,b)},a._onCancel=function(b){a._emitter.emit(a._emitterEvents.cancel,b)},a._onEnd=function(b){a._emitter.emit(a._emitterEvents.end,b)},a.prototype._reset=function(){this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._isActive=!1,a._deactivateInstance(this)},a.prototype._createEvent=function(c,d){var b=this._getTrackedTouch(d);return{type:c,srcEvent:d,distance:this.getDistance(),deltaX:this.getDeltaX(),deltaY:this.getDeltaY(),deltaTime:c===a._emitterEvents.start?0:this.getDeltaTime(),isFirst:c===a._emitterEvents.start,isFinal:c===a._emitterEvents.end||c===a._emitterEvents.cancel,pointerType:d.pointerType||(d.touches?"touch":"mouse"),identifier:this._pointerId,screenX:b.screenX,screenY:b.screenY,clientX:b.clientX,clientY:b.clientY,pageX:b.pageX,pageY:b.pageY,target:b.target}},a.prototype._emit=function(a,b){this._emitter.emit(a,this._createEvent(a,b))},a.prototype._getTrackedTouch=function(b){return null===this._pointerId?null:a._getTouchById(b,this._pointerId)},a.prototype._onStart=function(b){if(!this._isDestroyed&&null===this._pointerId&&(this._pointerId=a._getEventPointerId(b),null!==this._pointerId)){var c=this._getTrackedTouch(b);this._startX=this._currentX=c.clientX,this._startY=this._currentY=c.clientY,this._startTime=Date.now(),this._isActive=!0,this._emit(a._emitterEvents.start,b),this._isActive&&a._activateInstance(this)}},a.prototype._onMove=function(c){var b=this._getTrackedTouch(c);b&&(this._currentX=b.clientX,this._currentY=b.clientY,this._emit(a._emitterEvents.move,c))},a.prototype._onCancel=function(b){this._getTrackedTouch(b)&&(this._emit(a._emitterEvents.cancel,b),this._reset())},a.prototype._onEnd=function(b){this._getTrackedTouch(b)&&(this._emit(a._emitterEvents.end,b),this._reset())},a.prototype.isActive=function(){return this._isActive},a.prototype.setTouchAction=function(b){this._touchAction=b,aq&&(this._cssProps[aq]="",this._element.style[aq]=b),bs&&(this._element.removeEventListener(a._touchEvents.start,a._preventDefault,!0),(this._element.style[aq]!==b||bN&&bO)&&this._element.addEventListener(a._touchEvents.start,a._preventDefault,!0))},a.prototype.setCssProps=function(b){if(b){var a,d,c=this._cssProps,e=this._element;for(a in c)e.style[a]=c[a],delete c[a];for(a in b)b[a]&&(a!==bE?(d=aj(e.style,a))&&(c[d]="",e.style[d]=b[a]):this.setTouchAction(b[a]))}},a.prototype.getDeltaX=function(){return this._currentX-this._startX},a.prototype.getDeltaY=function(){return this._currentY-this._startY},a.prototype.getDistance=function(){var a=this.getDeltaX(),b=this.getDeltaY();return Math.sqrt(a*a+b*b)},a.prototype.getDeltaTime=function(){return this._startTime?Date.now()-this._startTime:0},a.prototype.on=function(a,b){this._emitter.on(a,b)},a.prototype.off=function(a,b){this._emitter.off(a,b)},a.prototype.destroy=function(){var b,c;if(!this._isDestroyed){b=this._element;for(c in this._edgeHack&&this._edgeHack.destroy(),this._reset(),this._emitter.destroy(),b.removeEventListener(a._inputEvents.start,this._onStart,D),b.removeEventListener("dragstart",a._preventDefault,!1),b.removeEventListener(a._touchEvents.start,a._preventDefault,!0),this._cssProps)b.style[c]=this._cssProps[c],delete this._cssProps[c];this._element=null,this._isDestroyed=!0}},bQ=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return this.setTimeout(function(){a(Date.now())},16.666666666666668)}).bind(window);function ao(b){this._nextStep=null,this._lanes=[],this._stepQueue=[],this._stepCallbacks={},this._step=this._step.bind(this);for(var a=0;a<b;a++)this._lanes.push(new aB)}function aB(){this.queue=[],this.indices={},this.callbacks={}}ao.prototype._step=function(j){var a,c,b,d,h,i,e=this._lanes,f=this._stepQueue,g=this._stepCallbacks;for(this._nextStep=null,a=0;a<e.length;a++){for(d=e[a].queue,h=e[a].callbacks,i=e[a].indices,c=0;c<d.length;c++)(b=d[c])&&(f.push(b),g[b]=h[b],delete h[b],delete i[b]);d.length=0}for(a=0;a<f.length;a++)g[b=f[a]]&&g[b](j),delete g[b];f.length=0},ao.prototype.add=function(a,b,c){this._lanes[a].add(b,c),this._nextStep||(this._nextStep=bQ(this._step))},ao.prototype.remove=function(a,b){this._lanes[a].remove(b)},aB.prototype.add=function(a,c){var b=this.indices[a];void 0!==b&&(this.queue[b]=void 0),this.queue.push(a),this.callbacks[a]=c,this.indices[a]=this.queue.length-1},aB.prototype.remove=function(a){var b=this.indices[a];void 0!==b&&(this.queue[b]=void 0,delete this.callbacks[a],delete this.indices[a])},bu="layoutRead",br="layoutWrite",bq="visibilityRead",bp="visibilityWrite",bo="dragStartRead",bz="dragStartWrite",bm="dragMoveRead",bh="dragMoveWrite",bd="dragScrollRead",bn="dragScrollWrite",a$="dragSortRead",aQ="placeholderLayoutRead",aN="placeholderLayoutWrite",aM="placeholderResizeWrite",aK="autoScrollRead",aJ="autoScrollWrite",aP="debounceRead",e=new ao(3);function aT(a){e.remove(0,bu+a),e.remove(2,br+a)}function aX(a){e.remove(0,bq+a),e.remove(2,bp+a)}function ba(a){e.remove(0,bo+a),e.remove(2,bz+a)}function be(a){e.remove(0,bm+a),e.remove(2,bh+a)}function by(a){e.remove(0,bd+a),e.remove(2,bn+a)}function aa(a,b){e.add(1,a$+a,b)}function a_(a){e.remove(0,aQ+a),e.remove(2,aN+a)}function bA(a,b){e.add(0,aK,a),e.add(2,aJ,b)}function d(a){return"function"==typeof a}am="function"==typeof WeakMap?new WeakMap:null;function j(b,c){var a=am&&am.get(b);return a||(a=window.getComputedStyle(b,null),am&&am.set(b,a)),a.getPropertyValue(c)}function m(a,b){return parseFloat(j(a,b))||0}I=document.documentElement,ce=document.body,$={value:0,offset:0};function bG(a){return a===window||a===I||a===ce?window:a}function T(a){return a===window?a.pageXOffset:a.scrollLeft}function Y(a){return a===window?a.pageYOffset:a.scrollTop}function bw(a){return a===window?I.scrollWidth-I.clientWidth:a.scrollWidth-a.clientWidth}function bl(a){return a===window?I.scrollHeight-I.clientHeight:a.scrollHeight-a.clientHeight}function bk(b,a){if(a=a||{},b===window)a.width=I.clientWidth,a.height=I.clientHeight,a.left=0,a.right=a.width,a.top=0,a.bottom=a.height;else{var c=b.getBoundingClientRect(),d=b.clientLeft||m(b,"border-left-width"),e=b.clientTop||m(b,"border-top-width");a.width=b.clientWidth,a.height=b.clientHeight,a.left=c.left+d,a.right=a.left+a.width,a.top=c.top+e,a.bottom=a.top+a.height}return a}function S(a){return a._drag._getGrid()._settings.dragAutoScroll}function cg(a){if(a._drag&&a._isActive){var b=a._drag;b._scrollDiffX=b._scrollDiffY=0,a._setTranslate(b._left,b._top)}}function aC(b,c,d,a){return $.value=Math.min(a/2,b),$.offset=Math.max(0,d+2*$.value+a*c-a)/2,$}function v(){this.reset()}function K(){this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}function Q(a,b){this.pool=[],this.createItem=a,this.releaseItem=b}function ab(a,b){var c=function(a,b){return function(a,b){return!(a.left+a.width<=b.left||b.left+b.width<=a.left||a.top+a.height<=b.top||b.top+b.height<=a.top)}(a,b)?(Math.min(a.left+a.width,b.left+b.width)-Math.max(a.left,b.left))*(Math.min(a.top+a.height,b.top+b.height)-Math.max(a.top,b.top)):0}(a,b);return c?c/(Math.min(a.width,b.width)*Math.min(a.height,b.height))*100:0}v.prototype.reset=function(){this.isActive&&this.onStop(),this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=null,this.value=null,this.maxValue=0,this.threshold=0,this.distance=0,this.speed=0,this.duration=0,this.action=null},v.prototype.hasReachedEnd=function(){return 4&this.direction?this.value>=this.maxValue:this.value<=0},v.prototype.computeCurrentScrollValue=function(){return null===this.value?1&this.direction?T(this.element):Y(this.element):Math.max(0,Math.min(this.value,this.maxValue))},v.prototype.computeNextScrollValue=function(b){var a=this.speed*(b/1e3),c=4&this.direction?this.value+a:this.value-a;return Math.max(0,Math.min(c,this.maxValue))},v.prototype.computeSpeed=(p={direction:null,threshold:0,distance:0,value:0,maxValue:0,deltaTime:0,duration:0,isEnding:!1},function(c){var b=this.item,a=S(b).speed;return d(a)?(p.direction=this.direction,p.threshold=this.threshold,p.distance=this.distance,p.value=this.value,p.maxValue=this.maxValue,p.duration=this.duration,p.speed=this.speed,p.deltaTime=c,p.isEnding=this.isEnding,a(b,this.element,p)):a}),v.prototype.tick=function(a){return this.isActive||(this.isActive=!0,this.onStart()),this.value=this.computeCurrentScrollValue(),this.speed=this.computeSpeed(a),this.value=this.computeNextScrollValue(a),this.duration+=a,this.value},v.prototype.onStart=function(){var a=this.item,b=S(a).onStart;d(b)&&b(a,this.element,this.direction)},v.prototype.onStop=function(){var a=this.item,b=S(a).onStop;d(b)&&b(a,this.element,this.direction),a._drag&&a._drag.sort()},K.prototype.reset=function(){this.requestX&&(this.requestX.action=null),this.requestY&&(this.requestY.action=null),this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0},K.prototype.addRequest=function(a){1&a.direction?(this.removeRequest(this.requestX),this.requestX=a):(this.removeRequest(this.requestY),this.requestY=a),a.action=this},K.prototype.removeRequest=function(a){a&&(this.requestX===a?(this.requestX=null,a.action=null):this.requestY===a&&(this.requestY=null,a.action=null))},K.prototype.computeScrollValues=function(){this.scrollLeft=this.requestX?this.requestX.value:T(this.element),this.scrollTop=this.requestY?this.requestY.value:Y(this.element)},K.prototype.scroll=function(){var a=this.element;a&&(a.scrollTo?a.scrollTo(this.scrollLeft,this.scrollTop):(a.scrollLeft=this.scrollLeft,a.scrollTop=this.scrollTop))},Q.prototype.pick=function(){return this.pool.pop()||this.createItem()},Q.prototype.release=function(a){this.releaseItem(a),-1===this.pool.indexOf(a)&&this.pool.push(a)},Q.prototype.reset=function(){this.pool.length=0},aH={width:0,height:0,left:0,right:0,top:0,bottom:0},aI={width:0,height:0,left:0,right:0,top:0,bottom:0};function f(){this._isDestroyed=!1,this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,this._items=[],this._actions=[],this._requests={},this._requests[1]={},this._requests[2]={},this._requestOverlapCheck={},this._dragPositions={},this._dragDirections={},this._overlapCheckInterval=150,this._requestPool=new Q(function(){return new v},function(a){a.reset()}),this._actionPool=new Q(function(){return new K},function(a){a.reset()}),this._readTick=this._readTick.bind(this),this._writeTick=this._writeTick.bind(this)}f.AXIS_X=1,f.AXIS_Y=2,f.FORWARD=4,f.BACKWARD=8,f.LEFT=9,f.RIGHT=5,f.UP=10,f.DOWN=6,f.smoothSpeed=function(a,b,c){return function(j,i,d){var e=0,h,g,f;return d.isEnding||(d.threshold>0?(h=d.threshold-Math.max(0,d.distance),e=a/d.threshold*h):e=a),g=d.speed,f=e,g===e?f:g<e?(f=g+b*(d.deltaTime/1e3),Math.min(e,f)):(f=g-c*(d.deltaTime/1e3),Math.max(e,f))}},f.pointerHandle=function(c){var a={left:0,top:0,width:0,height:0},b=c||1;return function(i,e,f,g,h,d,c){return a.left=d-.5*b,a.top=c-.5*b,a.width=b,a.height=b,a}},f.prototype._readTick=function(a){this._isDestroyed||(a&&this._tickTime?(this._tickDeltaTime=a-this._tickTime,this._tickTime=a,this._updateRequests(),this._updateActions()):(this._tickTime=a,this._tickDeltaTime=0))},f.prototype._writeTick=function(){this._isDestroyed||(this._applyActions(),bA(this._readTick,this._writeTick))},f.prototype._startTicking=function(){this._isTicking=!0,bA(this._readTick,this._writeTick)},f.prototype._stopTicking=function(){this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,e.remove(0,aK),e.remove(2,aJ)},f.prototype._getItemHandleRect=function(b,e,a){var c=b._drag,f,d;return e?(f=c._dragMoveEvent||c._dragStartEvent,d=e(b,c._clientX,c._clientY,b._width,b._height,f.clientX,f.clientY),a.left=d.left,a.top=d.top,a.width=d.width,a.height=d.height):(a.left=c._clientX,a.top=c._clientY,a.width=b._width,a.height=b._height),a.right=a.left+a.width,a.bottom=a.top+a.height,a},f.prototype._requestItemScroll=function(b,i,e,d,f,g,h){var c=this._requests[i],a=c[b._id];a?a.element===e&&a.direction===d||a.reset():a=this._requestPool.pick(),a.item=b,a.element=e,a.direction=d,a.threshold=f,a.distance=g,a.maxValue=h,c[b._id]=a},f.prototype._cancelItemScroll=function(b,d){var c=this._requests[d],a=c[b._id];a&&(a.action&&a.action.removeRequest(a),this._requestPool.release(a),delete c[b._id])},f.prototype._checkItemOverlap=function(a,u,t){var k=S(a),r=d(k.targets)?k.targets(a):k.targets,M=k.threshold,G=k.safeZone,F,v,s,i,h,c,e,p,q,n,g,b,f,j,l,m,y,o,A,B,C,D,E,x,w,H,I,J,K,L,z;if(!r||!r.length)return u&&this._cancelItemScroll(a,1),void(t&&this._cancelItemScroll(a,2));if(F=this._dragDirections[a._id],v=F[0],s=F[1],!v&&!s)return u&&this._cancelItemScroll(a,1),void(t&&this._cancelItemScroll(a,2));for(i=this._getItemHandleRect(a,k.handle,aH),h=aI,c=null,e=null,p=!0,q=!0,n=0,g=0,b=null,f=null,j=0,l=0,m=0,y=null,o=-1/0,A=0,B=0,C=null,D=0,E=0,x=null,w=-1/0,H=0,I=0,J=null,K=0,L=0,z=0;z<r.length;z++)c=r[z],p=u&&v&&2!==c.axis,q=t&&s&&1!==c.axis,g=c.priority||0,(!p||g<o)&&(!q||g<w)||(e=bG(c.element||c),l=p?bw(e):-1,m=q?bl(e):-1,(l||m)&&((n=ab(i,h=bk(e,h)))<=0||(p&&g>=o&&l>0&&(g>o||n>B)&&(f=null,b=aC("number"==typeof c.threshold?c.threshold:M,G,i.width,h.width),5===v?(j=h.right+b.offset-i.right)<=b.value&&T(e)<l&&(f=5):9===v&&(j=i.left-(h.left-b.offset))<=b.value&&T(e)>0&&(f=9),null!==f&&(y=e,o=g,A=b.value,B=n,C=f,D=j,E=l)),q&&g>=w&&m>0&&(g>w||n>I)&&(f=null,b=aC("number"==typeof c.threshold?c.threshold:M,G,i.height,h.height),6===s?(j=h.bottom+b.offset-i.bottom)<=b.value&&Y(e)<m&&(f=6):10===s&&(j=i.top-(h.top-b.offset))<=b.value&&Y(e)>0&&(f=10),null!==f&&(x=e,w=g,H=b.value,I=n,J=f,K=j,L=m)))));u&&(y?this._requestItemScroll(a,1,y,C,A,D,E):this._cancelItemScroll(a,1)),t&&(x?this._requestItemScroll(a,2,x,J,H,K,L):this._cancelItemScroll(a,2))},f.prototype._updateScrollRequest=function(a){for(var m=a.item,f=S(m),n=d(f.targets)?f.targets(m):f.targets,s=n&&n.length||0,r=f.threshold,q=f.safeZone,c=this._getItemHandleRect(m,f.handle,aH),b=aI,h=null,g=null,i=!1,e=null,p=null,k=null,l=null,j=null,o=0;o<s;o++)if((g=bG((h=n[o]).element||h))===a.element){if(i=!!(1&a.direction)){if(2===h.axis)continue}else if(1===h.axis)continue;if((l=i?bw(g):bl(g))<=0)break;if(ab(c,b=bk(g,b))<=0)break;if(e=aC("number"==typeof h.threshold?h.threshold:r,q,i?c.width:c.height,i?b.width:b.height),(p=9===a.direction?c.left-(b.left-e.offset):5===a.direction?b.right+e.offset-c.right:10===a.direction?c.top-(b.top-e.offset):b.bottom+e.offset-c.bottom)>e.value)break;if(k=i?T(g):Y(g),j=4&a.direction?k>=l:k<=0)break;return a.maxValue=l,a.threshold=e.value,a.distance=p,a.isEnding=!1,!0}return!0===f.smoothStop&&a.speed>0?(null===j&&(j=a.hasReachedEnd()),a.isEnding=!j):a.isEnding=!1,a.isEnding},f.prototype._updateRequests=function(){for(var a,c,d,h,b,e,f,i=this._items,j=this._requests[1],k=this._requests[2],g=0;g<i.length;g++)a=i[g],b=(h=this._requestOverlapCheck[a._id])>0&&this._tickTime-h>this._overlapCheckInterval,e=!0,(c=j[a._id])&&c.isActive&&(e=!this._updateScrollRequest(c))&&(b=!0,this._cancelItemScroll(a,1)),f=!0,(d=k[a._id])&&d.isActive&&(f=!this._updateScrollRequest(d))&&(b=!0,this._cancelItemScroll(a,2)),b&&(this._requestOverlapCheck[a._id]=0,this._checkItemOverlap(a,e,f))},f.prototype._requestAction=function(b,e){for(var c=this._actions,f=1===e,a=null,d=0;d<c.length;d++){if(a=c[d],b.element===a.element){if(f?a.requestX:a.requestY)return void this._cancelItemScroll(b.item,e);break}a=null}a||(a=this._actionPool.pick()),a.element=b.element,a.addRequest(b),b.tick(this._tickDeltaTime),c.push(a)},f.prototype._updateActions=function(){var b,c,d,a,e=this._items,f=this._requests,g=this._actions;for(a=0;a<e.length;a++)b=e[a]._id,c=f[1][b],d=f[2][b],c&&this._requestAction(c,1),d&&this._requestAction(d,2);for(a=0;a<g.length;a++)g[a].computeScrollValues()},f.prototype._applyActions=function(){var a,b=this._actions,c=this._items,d;if(b.length){for(a=0;a<b.length;a++)b[a].scroll(),this._actionPool.release(b[a]);for(b.length=0,a=0;a<c.length;a++)(d=c[a])._drag&&d._drag._prepareScroll();for(a=0;a<c.length;a++)cg(c[a])}},f.prototype._updateDragDirection=function(b){var a=this._dragPositions[b._id],c=this._dragDirections[b._id],d=b._drag._left,e=b._drag._top,f,g;a.length&&(f=a[0],g=a[1],c[0]=d>f?5:d<f?9:c[0]||0,c[1]=e>g?6:e<g?10:c[1]||0),a[0]=d,a[1]=e},f.prototype.addItem=function(a){this._isDestroyed||-1===this._items.indexOf(a)&&(this._items.push(a),this._requestOverlapCheck[a._id]=this._tickTime,this._dragDirections[a._id]=[0,0],this._dragPositions[a._id]=[],this._isTicking||this._startTicking())},f.prototype.updateItem=function(a){this._isDestroyed||this._dragDirections[a._id]&&(this._updateDragDirection(a),this._requestOverlapCheck[a._id]||(this._requestOverlapCheck[a._id]=this._tickTime))},f.prototype.removeItem=function(b){var c,a;this._isDestroyed||(c=this._items.indexOf(b),-1!==c&&(a=b._id,this._requests[1][a]&&(this._cancelItemScroll(b,1),delete this._requests[1][a]),this._requests[2][a]&&(this._cancelItemScroll(b,2),delete this._requests[2][a]),delete this._requestOverlapCheck[a],delete this._dragPositions[a],delete this._dragDirections[a],this._items.splice(c,1),this._isTicking&&!this._items.length&&this._stopTicking()))},f.prototype.isItemScrollingX=function(b){var a=this._requests[1][b._id];return!(!a||!a.isActive)},f.prototype.isItemScrollingY=function(b){var a=this._requests[2][b._id];return!(!a||!a.isActive)},f.prototype.isItemScrolling=function(a){return this.isItemScrollingX(a)||this.isItemScrollingY(a)},f.prototype.destroy=function(){if(!this._isDestroyed){for(var b=this._items.slice(0),a=0;a<b.length;a++)this.removeItem(b[a]);this._actions.length=0,this._requestPool.reset(),this._actionPool.reset(),this._isDestroyed=!0}},J=window.Element.prototype,cf=J.matches||J.matchesSelector||J.webkitMatchesSelector||J.mozMatchesSelector||J.msMatchesSelector||J.oMatchesSelector||function(){return!1};function _(a,b){return cf.call(a,b)}function k(a,b){b&&(a.classList?a.classList.add(b):_(a,"."+b)||(a.className+=" "+b))}aO=[];function at(b,d,c){var a="number"==typeof c?c:-1;a<0&&(a=b.length-a+1),b.splice.apply(b,aO.concat(a,0,d)),aO.length=0}function P(c,a,d){var b=Math.max(0,c.length-1+(d||0));return a>b?b:a<0?Math.max(b+a+1,0):a}function bI(a,d,e){if(!(a.length<2)){var b=P(a,d),c=P(a,e);b!==c&&a.splice(c,0,a.splice(b,1)[0])}}function aS(a,e,f){if(!(a.length<2)){var d,b=P(a,e),c=P(a,f);b!==c&&(d=a[b],a[b]=a[c],a[c]=d)}}s=aj(document.documentElement.style,"transform")||"transform",cd=/([A-Z])/g,cc=/^(webkit-|moz-|ms-|o-)/,cb=/^(-m-s-)/;function aE(b){var a=b.replace(cd,"-$1").toLowerCase();return a=(a=a.replace(cc,"-$1")).replace(cb,"-ms-")}aY=aE(s);function ca(a){var b=j(a,aY),c;return!(!b||"none"===b)&&(c=j(a,"display"),"inline"!==c&&"none"!==c)}function az(c){for(var b=document,a=c||b;a&&a!==b&&"static"===j(a,"position")&&!ca(a);)a=a.parentElement||b;return a}aF={},aD={},W={};function bc(b,d){var c,a=d||{};return a.left=0,a.top=0,b===document?a:(a.left=window.pageXOffset||0,a.top=window.pageYOffset||0,b.self===window.self||(c=b.getBoundingClientRect(),a.left+=c.left,a.top+=c.top,a.left+=m(b,"border-left-width"),a.top+=m(b,"border-top-width")),a)}function L(a,b,c){return W.left=0,W.top=0,a===b||c&&(a=az(a))===(b=az(b))||(bc(a,aF),bc(b,aD),W.left=aD.left-aF.left,W.top=aD.top-aF.top),W}function aA(a){return"auto"===a||"scroll"===a||"overlay"===a}function b$(a){return aA(j(a,"overflow"))||aA(j(a,"overflow-x"))||aA(j(a,"overflow-y"))}function bg(a,b){for(b=b||[];a&&a!==document;)a.getRootNode&&a instanceof DocumentFragment?a=a.getRootNode().host:(b$(a)&&b.push(a),a=a.parentNode);return b.push(window),b}N={},b_=/^matrix3d/,bY=/([^,]*,){4}/,bX=/([^,]*,){12}/,bK=/[^,]*,/;function t(e){var a,c,b,d;return N.x=0,N.y=0,a=j(e,aY),!a||"none"===a?N:(c=b_.test(a),b=a.replace(c?bX:bY,""),d=b.replace(bK,""),N.x=parseFloat(b)||0,N.y=parseFloat(d)||0,N)}function i(a,b){b&&(a.classList?a.classList.remove(b):_(a,"."+b)&&(a.className=(" "+a.className+" ").replace(" "+b+" "," ").trim()))}bT=/^(iPad|iPhone|iPod)/.test(window.navigator.platform)||/^Mac/.test(window.navigator.platform)&&window.navigator.maxTouchPoints>1,bt=!!aG()&&{passive:!0};function b(e){var f=e._element,g=e.getGrid(),c=g._settings;this._item=e,this._gridId=g._id,this._isDestroyed=!1,this._isMigrating=!1,this._startPredicate=d(c.dragStartPredicate)?c.dragStartPredicate:b.defaultStartPredicate,this._startPredicateState=0,this._startPredicateResult=void 0,this._isSortNeeded=!1,this._sortTimer=void 0,this._blockedSortIndex=null,this._sortX1=0,this._sortX2=0,this._sortY1=0,this._sortY2=0,this._reset(),this._preStartCheck=this._preStartCheck.bind(this),this._preEndCheck=this._preEndCheck.bind(this),this._onScroll=this._onScroll.bind(this),this._prepareStart=this._prepareStart.bind(this),this._applyStart=this._applyStart.bind(this),this._prepareMove=this._prepareMove.bind(this),this._applyMove=this._applyMove.bind(this),this._prepareScroll=this._prepareScroll.bind(this),this._applyScroll=this._applyScroll.bind(this),this._handleSort=this._handleSort.bind(this),this._handleSortDelayed=this._handleSortDelayed.bind(this),this._handle=c.dragHandle&&f.querySelector(c.dragHandle)||f,this._dragger=new a(this._handle,c.dragCssProps),this._dragger.on("start",this._preStartCheck),this._dragger.on("move",this._preStartCheck),this._dragger.on("cancel",this._preEndCheck),this._dragger.on("end",this._preEndCheck)}function bv(e,b){var a,c,d={};if(Array.isArray(b))for(c=0;c<b.length;c++)d[a=b[c]]=j(e,aE(a));else for(a in b)d[a]=j(e,aE(a));return d}b.autoScroller=new f,b.defaultStartPredicate=function(e,a,f){var c=e._drag,b,d;if(a.isFirst&&a.srcEvent.button)return!1;if(!bT&&a.isFirst&&!0===a.srcEvent.isTrusted&&!1===a.srcEvent.defaultPrevented&&!1===a.srcEvent.cancelable)return!1;if(!a.isFinal)return b=c._startPredicateData,b||(d=f||c._getGrid()._settings.dragStartPredicate||{},c._startPredicateData=b={distance:Math.max(d.distance,0)||0,delay:Math.max(d.delay,0)||0}),b.delay&&(b.event=a,b.delayTimer||(b.delayTimer=window.setTimeout(function(){b.delay=0,c._resolveStartPredicate(b.event)&&(c._forceResolveStartPredicate(b.event),c._resetStartPredicate())},b.delay))),c._resolveStartPredicate(a);c._finishStartPredicate(a)},b.defaultSortPredicate=(x={},n={},R={},ak=[],function(c,e){var i=c._drag,l=i._getGrid(),f=e&&"number"==typeof e.threshold?e.threshold:50,u=e&&e.action===q?q:F,t=e&&e.migrateAction===q?q:F,a,b,m,g,o,p,r,h,k,s;if(f=Math.min(Math.max(f,1),100),x.width=c._width,x.height=c._height,x.left=i._clientX,x.top=i._clientY,a=function(s,o,r){var l,c,b,a,i,f,e,h,g,k,p=null,m=o._settings.dragSort,q=-1;if(!0===m?(ak[0]=o,c=ak):d(m)&&(c=m.call(o,s)),!c||!Array.isArray(c)||!c.length)return p;for(k=0;k<c.length;k++)if(!(b=c[k])._isDestroyed){for(b._updateBoundingRect(),f=Math.max(0,b._left),e=Math.max(0,b._top),h=Math.min(window.innerWidth,b._right),g=Math.min(window.innerHeight,b._bottom),a=b._element.parentNode;a&&a!==document&&a!==document.documentElement&&a!==document.body;)if(a.getRootNode&&a instanceof DocumentFragment)a=a.getRootNode().host;else{if("visible"!==j(a,"overflow")&&(i=a.getBoundingClientRect(),f=Math.max(f,i.left),e=Math.max(e,i.top),h=Math.min(h,i.right),g=Math.min(g,i.bottom)),"fixed"===j(a,"position"))break;a=a.parentNode}f>=h||e>=g||(n.left=f,n.top=e,n.width=h-f,n.height=g-e,(l=ab(x,n))>r&&l>q&&(q=l,p=b))}return ak.length=0,p}(c,l,f),!a)return null;o=c.getGrid()!==a,p=0,r=0,h=0,k=-1,s=!1;for(a===l?(x.left=i._gridX+c._marginLeft,x.top=i._gridY+c._marginTop):(a._updateBorders(1,0,1,0),p=a._left+a._borderLeft,r=a._top+a._borderTop),g=0;g<a._items.length;g++)(b=a._items[g])._isActive&&b!==c&&(s=!0,n.width=b._width,n.height=b._height,n.left=b._left+b._marginLeft+p,n.top=b._top+b._marginTop+r,(m=ab(x,n))>h&&(k=g,h=m));return o&&h<f&&(k=s?k:0,h=f),h>=f?(R.grid=a,R.index=k,R.action=o?t:u,R):null}),b.prototype.stop=function(){var a,d,c,e,f;this._isActive&&(this._isMigrating?this._finishMigration():(a=this._item,d=a._id,(b.autoScroller.removeItem(a),ba(d),be(d),by(d),this._cancelSort(),this._isStarted)&&(this._unbindScrollListeners(),c=a._element,e=this._getGrid(),f=e._settings.itemDraggingClass,c.parentNode!==e._element&&(e._element.appendChild(c),a._setTranslate(this._gridX,this._gridY),f&&c.clientWidth),i(c,f)),this._reset()))},b.prototype.sort=function(b){var a=this._item;this._isActive&&a._isActive&&this._dragMoveEvent&&(!0===b?this._handleSort():aa(a._id,this._handleSort))},b.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._dragger.destroy(),b.autoScroller.removeItem(this._item),this._isDestroyed=!0)},b.prototype._getGrid=function(){return ad[this._gridId]||null},b.prototype._reset=function(){this._isActive=!1,this._isStarted=!1,this._container=null,this._containingBlock=null,this._dragStartEvent=null,this._dragMoveEvent=null,this._dragPrevMoveEvent=null,this._scrollEvent=null,this._scrollers=[],this._left=0,this._top=0,this._gridX=0,this._gridY=0,this._clientX=0,this._clientY=0,this._scrollDiffX=0,this._scrollDiffY=0,this._moveDiffX=0,this._moveDiffY=0,this._containerDiffX=0,this._containerDiffY=0},b.prototype._bindScrollListeners=function(){var c,a,d=this._getGrid()._element,e=this._container,b=this._scrollers;if(b.length=0,bg(this._item._element.parentNode,b),e!==d)for(bg(d,c=[]),a=0;a<c.length;a++)b.indexOf(c[a])<0&&b.push(c[a]);for(a=0;a<b.length;a++)b[a].addEventListener("scroll",this._onScroll,bt)},b.prototype._unbindScrollListeners=function(){var a,b=this._scrollers;for(a=0;a<b.length;a++)b[a].removeEventListener("scroll",this._onScroll,bt);b.length=0},b.prototype._resolveStartPredicate=function(b){var a=this._startPredicateData;if(!(b.distance<a.distance||a.delay))return this._resetStartPredicate(),!0},b.prototype._forceResolveStartPredicate=function(a){this._isDestroyed||1!==this._startPredicateState||(this._startPredicateState=2,this._onStart(a))},b.prototype._finishStartPredicate=function(a){var b=this._item._element,c=Math.abs(a.deltaX)<2&&Math.abs(a.deltaY)<2&&a.deltaTime<200;this._resetStartPredicate(),c&&function(c){var a,b;if("a"!==c.tagName.toLowerCase())return;if(a=c.getAttribute("href"),!a)return;b=c.getAttribute("target"),b&&"_self"!==b?window.open(a,b):window.location.href=a}(b)},b.prototype._resetHeuristics=function(a,b){this._blockedSortIndex=null,this._sortX1=this._sortX2=a,this._sortY1=this._sortY2=b},b.prototype._checkHeuristics=function(c,d){var b=this._getGrid()._settings.dragSortHeuristics,a=b.minDragDistance,e,f,g,h,i,j;return a<=0?(this._blockedSortIndex=null,!0):!!(e=c-this._sortX2,f=d-this._sortY2,g=a>3&&b.minBounceBackAngle>0,g||(this._blockedSortIndex=null),Math.abs(e)>a||Math.abs(f)>a)&&(g&&(h=Math.atan2(e,f),i=Math.atan2(this._sortX2-this._sortX1,this._sortY2-this._sortY1),j=Math.atan2(Math.sin(h-i),Math.cos(h-i)),Math.abs(j)>b.minBounceBackAngle&&(this._blockedSortIndex=null)),this._sortX1=this._sortX2,this._sortY1=this._sortY2,this._sortX2=c,this._sortY2=d,!0)},b.prototype._resetStartPredicate=function(){var a=this._startPredicateData;a&&(a.delayTimer&&(a.delayTimer=window.clearTimeout(a.delayTimer)),this._startPredicateData=null)},b.prototype._handleSort=function(){var a,d,c;if(this._isActive){if(a=this._getGrid()._settings,!a.dragSort||!a.dragAutoScroll.sortDuringScroll&&b.autoScroller.isItemScrolling(this._item))return this._sortX1=this._sortX2=this._gridX,this._sortY1=this._sortY2=this._gridY,this._isSortNeeded=!0,void(void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)));d=this._checkHeuristics(this._gridX,this._gridY),(this._isSortNeeded||d)&&(c=a.dragSortHeuristics.sortInterval,c<=0||this._isSortNeeded?(this._isSortNeeded=!1,void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)),this._checkOverlap()):void 0===this._sortTimer&&(this._sortTimer=window.setTimeout(this._handleSortDelayed,c)))}},b.prototype._handleSortDelayed=function(){this._isSortNeeded=!0,this._sortTimer=void 0,aa(this._item._id,this._handleSort)},b.prototype._cancelSort=function(){var a;this._isSortNeeded=!1,void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)),a=this._item._id,e.remove(1,a$+a)},b.prototype._finishSort=function(){var a=this._getGrid()._settings.dragSort&&(this._isSortNeeded||void 0!==this._sortTimer);this._cancelSort(),a&&this._checkOverlap()},b.prototype._checkOverlap=function(){if(this._isActive){var h,a,g,c,f,i,j,k,e=this._item,l=this._getGrid()._settings;(h=d(l.dragSortPredicate)?l.dragSortPredicate(e,this._dragMoveEvent):b.defaultSortPredicate(e,l.dragSortPredicate))&&"number"==typeof h.index&&(j=h.action===q?q:F,k=(a=e.getGrid())!==(c=h.grid||a),g=a._items.indexOf(e),f=P(c._items,h.index,k&&j===F?1:0),(k||f!==this._blockedSortIndex)&&(k?(this._blockedSortIndex=null,i=c._items[f],a._hasListeners(z)&&a._emit(z,{item:e,fromGrid:a,fromIndex:g,toGrid:c,toIndex:f}),c._hasListeners(ac)&&c._emit(ac,{item:e,fromGrid:a,fromIndex:g,toGrid:c,toIndex:f}),e._gridId=c._id,this._isMigrating=e._gridId!==this._gridId,a._items.splice(g,1),at(c._items,e,f),e._sortData=null,a._hasListeners(ai)&&a._emit(ai,{item:e,fromGrid:a,fromIndex:g,toGrid:c,toIndex:f}),c._hasListeners(af)&&c._emit(af,{item:e,fromGrid:a,fromIndex:g,toGrid:c,toIndex:f}),j===q&&i&&i.isActive()&&c._items.indexOf(i)>-1&&c.send(i,a,g,{appendTo:this._container||document.body,layoutSender:!1,layoutReceiver:!1}),a.layout(),c.layout()):g!==f&&(this._blockedSortIndex=g,(j===q?aS:bI)(a._items,g,f),a._hasListeners(al)&&a._emit(al,{item:e,fromIndex:g,toIndex:f,action:j}),a.layout())))}},b.prototype._finishMigration=function(){var h,e,a=this._item,m=a._dragRelease,d=a._element,j=a._isActive,o=a.getGrid(),n=o._element,c=o._settings,f=c.dragContainer||n,g=this._getGrid()._settings,l=d.parentNode,p=j?g.itemVisibleClass:g.itemHiddenClass,q=j?c.itemVisibleClass:c.itemHiddenClass;this._isMigrating=!1,this.destroy(),g.itemClass!==c.itemClass&&(i(d,g.itemClass),k(d,c.itemClass)),p!==q&&(i(d,p),k(d,q)),f!==l&&(f.appendChild(d),e=L(l,f,!0),(h=t(d)).x-=e.left,h.y-=e.top),a._refreshDimensions(),e=L(f,n,!0),m._containerDiffX=e.left,m._containerDiffY=e.top,a._drag=c.dragEnabled?new b(a):null,f!==l&&a._setTranslate(h.x,h.y),a._visibility.setStyles(j?c.visibleStyles:c.hiddenStyles),m.start()},b.prototype._preStartCheck=function(a){0===this._startPredicateState&&(this._startPredicateState=1),1===this._startPredicateState?(this._startPredicateResult=this._startPredicate(this._item,a),!0===this._startPredicateResult?(this._startPredicateState=2,this._onStart(a)):!1===this._startPredicateResult&&(this._resetStartPredicate(a),this._dragger._reset(),this._startPredicateState=0)):2===this._startPredicateState&&this._isActive&&this._onMove(a)},b.prototype._preEndCheck=function(a){var b=2===this._startPredicateState;this._startPredicate(this._item,a),this._startPredicateState=0,b&&this._isActive&&(this._isStarted?this._onEnd(a):this.stop())},b.prototype._onStart=function(g){var a,d,f,c=this._item;c._isActive&&(this._isActive=!0,this._dragStartEvent=g,b.autoScroller.addItem(c),a=c._id,d=this._prepareStart,f=this._applyStart,e.add(0,bo+a,d),e.add(2,bz+a,f))},b.prototype._prepareStart=function(){var c,d,e,j,a,b,f,g,h,k,i;this._isActive&&(c=this._item,c._isActive&&(d=c._element,e=this._getGrid(),j=e._settings,a=e._element,b=j.dragContainer||a,f=az(b),g=t(d),h=d.getBoundingClientRect(),k=b!==a,(this._container=b,this._containingBlock=f,this._clientX=h.left,this._clientY=h.top,this._left=this._gridX=g.x,this._top=this._gridY=g.y,this._scrollDiffX=this._scrollDiffY=0,this._moveDiffX=this._moveDiffY=0,this._resetHeuristics(this._gridX,this._gridY),k)&&(i=L(f,a),this._containerDiffX=i.left,this._containerDiffY=i.top)))},b.prototype._applyStart=function(){var a,c,d,e,b,f;this._isActive&&(a=this._item,a._isActive&&(c=this._getGrid(),d=a._element,e=a._dragRelease,b=a._migrate,f=this._container!==c._element,a.isPositioning()&&a._layout.stop(!0,this._left,this._top),b._isActive&&(this._left-=b._containerDiffX,this._top-=b._containerDiffY,this._gridX-=b._containerDiffX,this._gridY-=b._containerDiffY,b.stop(!0,this._left,this._top)),a.isReleasing()&&e._reset(),c._settings.dragPlaceholder.enabled&&a._dragPlaceholder.create(),this._isStarted=!0,c._emit("dragInit",a,this._dragStartEvent),f&&(d.parentNode===this._container?(this._gridX-=this._containerDiffX,this._gridY-=this._containerDiffY):(this._left+=this._containerDiffX,this._top+=this._containerDiffY,this._container.appendChild(d),a._setTranslate(this._left,this._top))),k(d,c._settings.itemDraggingClass),this._bindScrollListeners(),c._emit("dragStart",a,this._dragStartEvent)))},b.prototype._onMove=function(f){var a,c,d,b=this._item;b._isActive?(this._dragMoveEvent=f,a=b._id,c=this._prepareMove,d=this._applyMove,e.add(0,bm+a,c),e.add(2,bh+a,d),aa(b._id,this._handleSort)):this.stop()},b.prototype._prepareMove=function(){var d,a,e,b,c;this._isActive&&this._item._isActive&&(d=this._getGrid()._settings.dragAxis,a=this._dragMoveEvent,e=this._dragPrevMoveEvent||this._dragStartEvent||a,"y"!==d&&(b=a.clientX-e.clientX,this._left=this._left-this._moveDiffX+b,this._gridX=this._gridX-this._moveDiffX+b,this._clientX=this._clientX-this._moveDiffX+b,this._moveDiffX=b),"x"!==d&&(c=a.clientY-e.clientY,this._top=this._top-this._moveDiffY+c,this._gridY=this._gridY-this._moveDiffY+c,this._clientY=this._clientY-this._moveDiffY+c,this._moveDiffY=c),this._dragPrevMoveEvent=a)},b.prototype._applyMove=function(){if(this._isActive){var a=this._item;a._isActive&&(this._moveDiffX=this._moveDiffY=0,a._setTranslate(this._left,this._top),this._getGrid()._emit("dragMove",a,this._dragMoveEvent),b.autoScroller.updateItem(a))}},b.prototype._onScroll=function(f){var a,c,d,b=this._item;b._isActive?(this._scrollEvent=f,a=b._id,c=this._prepareScroll,d=this._applyScroll,e.add(0,bd+a,c),e.add(2,bn+a,d),aa(b._id,this._handleSort)):this.stop()},b.prototype._prepareScroll=function(){var a,g,b,c,d,e,f;this._isActive&&(a=this._item,a._isActive&&(g=a._element,b=this._getGrid()._element,c=g.getBoundingClientRect(),this._container!==b&&(d=L(this._containingBlock,b),this._containerDiffX=d.left,this._containerDiffY=d.top),e=this._clientX-this._moveDiffX-c.left,this._left=this._left-this._scrollDiffX+e,this._scrollDiffX=e,f=this._clientY-this._moveDiffY-c.top,this._top=this._top-this._scrollDiffY+f,this._scrollDiffY=f,this._gridX=this._left-this._containerDiffX,this._gridY=this._top-this._containerDiffY))},b.prototype._applyScroll=function(){if(this._isActive){var a=this._item;a._isActive&&(this._scrollDiffX=this._scrollDiffY=0,a._setTranslate(this._left,this._top),this._getGrid()._emit("dragScroll",a,this._scrollEvent))}},b.prototype._onEnd=function(e){var a=this._item,f=a._element,d=this._getGrid(),g=d._settings,c=a._dragRelease;a._isActive?(ba(a._id),be(a._id),by(a._id),this._finishSort(),this._unbindScrollListeners(),c._containerDiffX=this._containerDiffX,c._containerDiffY=this._containerDiffY,this._reset(),i(f,g.itemDraggingClass),b.autoScroller.removeItem(a),d._emit("dragEnd",a,e),this._isMigrating?this._finishMigration():c.start()):this.stop()},bS=/^(webkit|moz|ms|o|Webkit|Moz|MS|O)(?=[A-Z])/,bx={};function bR(b){var a=bx[b];return a||((a=b.replace(bS,""))!==b&&(a=a[0].toLowerCase()+a.slice(1)),bx[b]=a,a)}function M(c,a){for(var b in a)c.style[b]=a[b]}bP=!(!Element||!d(Element.prototype.animate)),bD=!!(Element&&(av=Element.prototype.animate,ap=window.Symbol,av&&d(ap)&&d(ap.toString)&&ap(av).toString().indexOf("[native code]")>-1));function r(a){this._element=a,this._animation=null,this._duration=0,this._easing="",this._callback=null,this._props=[],this._values=[],this._isDestroyed=!1,this._onFinish=this._onFinish.bind(this)}function bF(b,d){var c={},a;for(a in b)c[d?a:bR(a)]=b[a];return c}function A(a,b){return"translateX("+a+"px) translateY("+b+"px)"}function h(a){this._item=a,this._animation=new r,this._element=null,this._className="",this._didMigrate=!1,this._resetAfterLayout=!1,this._left=0,this._top=0,this._transX=0,this._transY=0,this._nextTransX=0,this._nextTransY=0,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this),this._updateDimensions=this._updateDimensions.bind(this),this._onLayoutStart=this._onLayoutStart.bind(this),this._onLayoutEnd=this._onLayoutEnd.bind(this),this._onReleaseEnd=this._onReleaseEnd.bind(this),this._onMigrate=this._onMigrate.bind(this),this._onHide=this._onHide.bind(this)}function C(a){this._item=a,this._isActive=!1,this._isDestroyed=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0}r.prototype.start=function(o,a,n){var k,b,c,i,m,j,f,l,g,h,e;if(!this._isDestroyed){if(k=this._element,b=n||{},!bP)return M(k,a),this._callback=d(b.onFinish)?b.onFinish:null,void this._onFinish();if(j=this._animation,f=this._props,l=this._values,g=b.duration||300,h=b.easing||"ease",e=!1,j&&(i=0,g===this._duration&&h===this._easing||(e=!0),!e)){for(c in a)if(++i,-1===(m=f.indexOf(c))||a[c]!==l[m]){e=!0;break}i!==f.length&&(e=!0)}if(e&&j.cancel(),this._callback=d(b.onFinish)?b.onFinish:null,!j||e){for(c in f.length=l.length=0,a)f.push(c),l.push(a[c]);this._duration=g,this._easing=h,this._animation=k.animate([bF(o,bD),bF(a,bD)],{duration:g,easing:h}),this._animation.onfinish=this._onFinish,M(k,a)}}},r.prototype.stop=function(){!this._isDestroyed&&this._animation&&(this._animation.cancel(),this._animation=this._callback=null,this._props.length=this._values.length=0)},r.prototype.getCurrentStyles=function(){return bv(element,currentProps)},r.prototype.isAnimating=function(){return!!this._animation},r.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._element=null,this._isDestroyed=!0)},r.prototype._onFinish=function(){var a=this._callback;this._animation=this._callback=null,this._props.length=this._values.length=0,a&&a()},h.prototype._updateDimensions=function(){this.isActive()&&M(this._element,{width:this._item._width+"px",height:this._item._height+"px"})},h.prototype._onLayoutStart=function(n,i){var a=this._item,c,d,m,l,b,j,k,f,g,h;if(-1!==n.indexOf(a)){if(c=a._left,d=a._top,m=this._left,l=this._top,this._left=c,this._top=d,i||this._didMigrate||m!==c||l!==d){if(f=c+a._marginLeft,g=d+a._marginTop,h=a.getGrid(),!(!i&&h._settings.layoutDuration>0)||this._didMigrate)return a_(a._id),this._element.style[s]=A(f,g),this._animation.stop(),void(this._didMigrate&&(h.getElement().appendChild(this._element),this._didMigrate=!1));this._nextTransX=f,this._nextTransY=g,b=a._id,j=this._setupAnimation,k=this._startAnimation,e.add(0,aQ+b,j),e.add(2,aN+b,k)}}else this.reset()},h.prototype._setupAnimation=function(){if(this.isActive()){var a=t(this._element);this._transX=a.x,this._transY=a.y}},h.prototype._startAnimation=function(){var a,d,e,b,c,f,g,h;this.isActive()&&(a=this._animation,d=this._transX,e=this._transY,b=this._nextTransX,c=this._nextTransY,d!==b||e!==c?(f=this._item.getGrid()._settings,g={},h={},g[s]=A(d,e),h[s]=A(b,c),a.start(g,h,{duration:f.layoutDuration,easing:f.layoutEasing,onFinish:this._onLayoutEnd})):a.isAnimating()&&(this._element.style[s]=A(b,c),a.stop()))},h.prototype._onLayoutEnd=function(){this._resetAfterLayout&&this.reset()},h.prototype._onReleaseEnd=function(a){if(a._id===this._item._id){if(!this._animation.isAnimating())return void this.reset();this._resetAfterLayout=!0}},h.prototype._onMigrate=function(c){if(c.item===this._item){var a=this._item.getGrid(),b=c.toGrid;a.off(Z,this._onReleaseEnd),a.off(E,this._onLayoutStart),a.off(z,this._onMigrate),a.off(V,this._onHide),b.on(Z,this._onReleaseEnd),b.on(E,this._onLayoutStart),b.on(z,this._onMigrate),b.on(V,this._onHide),this._didMigrate=!0}},h.prototype._onHide=function(a){a.indexOf(this._item)>-1&&this.reset()},h.prototype.create=function(){if(this.isActive())this._resetAfterLayout=!1;else{var b,a=this._item,c=a.getGrid(),e=c._settings,f=this._animation;this._left=a._left,this._top=a._top,b=d(e.dragPlaceholder.createElement)?e.dragPlaceholder.createElement(a):document.createElement("div"),this._element=b,f._element=b,this._className=e.itemPlaceholderClass||"",this._className&&k(b,this._className),M(b,{position:"absolute",left:"0px",top:"0px",width:a._width+"px",height:a._height+"px"}),b.style[s]=A(a._left+a._marginLeft,a._top+a._marginTop),c.on(E,this._onLayoutStart),c.on(Z,this._onReleaseEnd),c.on(z,this._onMigrate),c.on(V,this._onHide),d(e.dragPlaceholder.onCreate)&&e.dragPlaceholder.onCreate(a,b),c.getElement().appendChild(b)}},h.prototype.reset=function(){if(this.isActive()){var f,b=this._element,c=this._item,a=c.getGrid(),g=a._settings,h=this._animation;this._resetAfterLayout=!1,a_(c._id),f=c._id,e.remove(2,aM+f),h.stop(),h._element=null,a.off(Z,this._onReleaseEnd),a.off(E,this._onLayoutStart),a.off(z,this._onMigrate),a.off(V,this._onHide),this._className&&(i(b,this._className),this._className=""),b.parentNode.removeChild(b),this._element=null,d(g.dragPlaceholder.onRemove)&&g.dragPlaceholder.onRemove(c,b)}},h.prototype.isActive=function(){return!!this._element},h.prototype.getElement=function(){return this._element},h.prototype.updateDimensions=function(){var a,b;this.isActive()&&(a=this._item._id,b=this._updateDimensions,e.add(2,aM+a,b))},h.prototype.destroy=function(){this.reset(),this._animation.destroy(),this._item=this._animation=null},C.prototype.start=function(){if(!this._isDestroyed&&!this._isActive){var a=this._item,b=a.getGrid(),c=b._settings;this._isActive=!0,k(a._element,c.itemReleasingClass),c.dragRelease.useDragContainer||this._placeToGrid(),b._emit("dragReleaseStart",a),b._nextLayoutData||a._layout.start(!1)}},C.prototype.stop=function(d,b,c){var a,e,f;!this._isDestroyed&&this._isActive&&(a=this._item,e=a.getGrid(),d||void 0!==b&&void 0!==c||(b=a._left,c=a._top),f=this._placeToGrid(b,c),this._reset(f),d||e._emit(Z,a))},C.prototype.isJustReleased=function(){return this._isActive&&!1===this._isPositioningStarted},C.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)},C.prototype._placeToGrid=function(c,d){var a,b,e,f,g;if(!this._isDestroyed)return a=this._item,b=a._element,e=a.getGrid()._element,f=!1,b.parentNode!==e&&((void 0===c||void 0===d)&&(g=t(b),c=g.x-this._containerDiffX,d=g.y-this._containerDiffY),e.appendChild(b),a._setTranslate(c,d),f=!0),this._containerDiffX=0,this._containerDiffY=0,f},C.prototype._reset=function(c){if(!this._isDestroyed){var a=this._item,b=a.getGrid()._settings.itemReleasingClass;this._isActive=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0,b&&(c&&a._element.clientWidth,i(a._element,b))}};function u(a){var b=a._element,c=b.style;this._item=a,this._isActive=!1,this._isDestroyed=!1,this._isInterrupted=!1,this._currentStyles={},this._targetStyles={},this._nextLeft=0,this._nextTop=0,this._offsetLeft=0,this._offsetTop=0,this._skipNextAnimation=!1,this._animOptions={onFinish:this._finish.bind(this),duration:0,easing:0},c.left="0px",c.top="0px",a._setTranslate(0,0),this._animation=new r(b),this._queue="layout-"+a._id,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this)}function U(a){this._item=a,this._isActive=!1,this._isDestroyed=!1,this._container=!1,this._containerDiffX=0,this._containerDiffY=0}function o(a){var b=a._isActive,d=a._element,e=d.children[0],c=a.getGrid()._settings;if(!e)throw new Error("No valid child element found within item element.");this._item=a,this._isDestroyed=!1,this._isHidden=!b,this._isHiding=!1,this._isShowing=!1,this._childElement=e,this._currentStyleProps=[],this._animation=new r(e),this._queue="visibility-"+a._id,this._finishShow=this._finishShow.bind(this),this._finishHide=this._finishHide.bind(this),d.style.display=b?"":"none",k(d,b?c.itemVisibleClass:c.itemHiddenClass),this.setStyles(b?c.visibleStyles:c.hiddenStyles)}u.prototype.start=function(m,j){if(!this._isDestroyed){var c,l,h,a=this._item,i=a._dragRelease,b=a.getGrid()._settings,k=this._isActive,f=i.isJustReleased(),g=f?b.dragRelease.duration:b.layoutDuration,n=f?b.dragRelease.easing:b.layoutEasing,o=!m&&!this._skipNextAnimation&&g>0;if(k&&(aT(a._id),a._emitter.burst(this._queue,!0,a)),f&&(i._isPositioningStarted=!0),d(j)&&a._emitter.on(this._queue,j),this._skipNextAnimation=!1,!o)return this._updateOffsets(),a._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),void this._finish();this._animation.isAnimating()&&(this._animation._animation.onfinish=null),this._isActive=!0,this._animOptions.easing=n,this._animOptions.duration=g,this._isInterrupted=k,c=a._id,l=this._setupAnimation,h=this._startAnimation,e.add(0,bu+c,l),e.add(2,br+c,h)}},u.prototype.stop=function(e,b,c){var a,d;!this._isDestroyed&&this._isActive&&(a=this._item,(aT(a._id),this._animation.isAnimating())&&((void 0===b||void 0===c)&&(d=t(a._element),b=d.x,c=d.y),a._setTranslate(b,c),this._animation.stop()),i(a._element,a.getGrid()._settings.itemPositioningClass),this._isActive=!1,e&&a._emitter.burst(this._queue,!0,a))},u.prototype.destroy=function(){if(!this._isDestroyed){var a=this._item._element.style;this.stop(!0,0,0),this._item._emitter.clear(this._queue),this._animation.destroy(),a[s]="",a.left="",a.top="",this._item=null,this._currentStyles=null,this._targetStyles=null,this._animOptions=null,this._isDestroyed=!0}},u.prototype._updateOffsets=function(){if(!this._isDestroyed){var c=this._item,a=c._migrate,b=c._dragRelease;this._offsetLeft=b._isActive?b._containerDiffX:a._isActive?a._containerDiffX:0,this._offsetTop=b._isActive?b._containerDiffY:a._isActive?a._containerDiffY:0,this._nextLeft=this._item._left+this._offsetLeft,this._nextTop=this._item._top+this._offsetTop}},u.prototype._finish=function(){if(!this._isDestroyed){var a=this._item,b=a._migrate,c=a._dragRelease;a._tX=this._nextLeft,a._tY=this._nextTop,this._isActive&&(this._isActive=!1,i(a._element,a.getGrid()._settings.itemPositioningClass)),c._isActive&&c.stop(),b._isActive&&b.stop(),a._emitter.burst(this._queue,!1,a)}},u.prototype._setupAnimation=function(){var a=this._item,b;(void 0===a._tX||void 0===a._tY)&&(b=t(a._element),a._tX=b.x,a._tY=b.y)},u.prototype._startAnimation=function(){var a=this._item,d=a.getGrid()._settings,e=this._animOptions.duration<=0,b,c;if(this._updateOffsets(),b=Math.abs(a._left-(a._tX-this._offsetLeft)),c=Math.abs(a._top-(a._tY-this._offsetTop)),e||b<2&&c<2)return(b||c||this._isInterrupted)&&a._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),void this._finish();this._isInterrupted||k(a._element,d.itemPositioningClass),this._currentStyles[s]=A(a._tX,a._tY),this._targetStyles[s]=A(this._nextLeft,this._nextTop),a._tX=a._tY=void 0,this._animation.start(this._currentStyles,this._targetStyles,this._animOptions)},U.prototype.start=function(c,v,C){if(!this._isDestroyed){var j,x,A,q,p,m,f,g,w,B,a=this._item,e=a._element,s=a.isActive(),u=a.isVisible(),d=a.getGrid(),o=d._settings,h=c._settings,y=c._element,r=c._items,l=d._items.indexOf(a),n=C||document.body;if("number"==typeof v)j=P(r,v,1);else{if(!(x=c.getItem(v)))return;j=r.indexOf(x)}(a.isPositioning()||this._isActive||a.isReleasing())&&(f=(m=t(e)).x,g=m.y),a.isPositioning()&&a._layout.stop(!0,f,g),this._isActive&&(f-=this._containerDiffX,g-=this._containerDiffY,this.stop(!0,f,g)),a.isReleasing()&&(f-=a._dragRelease._containerDiffX,g-=a._dragRelease._containerDiffY,a._dragRelease.stop(!0,f,g)),a._visibility.stop(!0),a._drag&&a._drag.destroy(),d._hasListeners(z)&&d._emit(z,{item:a,fromGrid:d,fromIndex:l,toGrid:c,toIndex:j}),c._hasListeners(ac)&&c._emit(ac,{item:a,fromGrid:d,fromIndex:l,toGrid:c,toIndex:j}),o.itemClass!==h.itemClass&&(i(e,o.itemClass),k(e,h.itemClass)),(w=u?o.itemVisibleClass:o.itemHiddenClass)!==(B=u?h.itemVisibleClass:h.itemHiddenClass)&&(i(e,w),k(e,B)),d._items.splice(l,1),at(r,a,j),a._gridId=c._id,s?n!==(A=e.parentNode)&&(n.appendChild(e),q=L(n,A,!0),m||(f=(m=t(e)).x,g=m.y),a._setTranslate(f+q.left,g+q.top)):y.appendChild(e),a._visibility.setStyles(u?h.visibleStyles:h.hiddenStyles),s&&(p=L(n,y,!0)),a._refreshDimensions(),a._sortData=null,a._drag=h.dragEnabled?new b(a):null,s?(this._isActive=!0,this._container=n,this._containerDiffX=p.left,this._containerDiffY=p.top):(this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0),d._hasListeners(ai)&&d._emit(ai,{item:a,fromGrid:d,fromIndex:l,toGrid:c,toIndex:j}),c._hasListeners(af)&&c._emit(af,{item:a,fromGrid:d,fromIndex:l,toGrid:c,toIndex:j})}},U.prototype.stop=function(g,b,c){if(!this._isDestroyed&&this._isActive){var e,a=this._item,f=a._element,d=a.getGrid()._element;this._container!==d&&(void 0!==b&&void 0!==c||(g?(b=(e=t(f)).x-this._containerDiffX,c=e.y-this._containerDiffY):(b=a._left,c=a._top)),d.appendChild(f),a._setTranslate(b,c)),this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0}},U.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)},o.prototype.show=function(e,f){if(!this._isDestroyed){var a=this._item,c=a._element,b=d(f)?f:null,g=a.getGrid()._settings;this._isShowing||this._isHidden?!this._isShowing||e?(this._isShowing||(a._emitter.burst(this._queue,!0,a),i(c,g.itemHiddenClass),k(c,g.itemVisibleClass),this._isHiding||(c.style.display="")),b&&a._emitter.on(this._queue,b),this._isShowing=!0,this._isHiding=this._isHidden=!1,this._startAnimation(!0,e,this._finishShow)):b&&a._emitter.on(this._queue,b):b&&b(!1,a)}},o.prototype.hide=function(c,e){if(!this._isDestroyed){var a=this._item,f=a._element,b=d(e)?e:null,g=a.getGrid()._settings;this._isHiding||!this._isHidden?!this._isHiding||c?(this._isHiding||(a._emitter.burst(this._queue,!0,a),k(f,g.itemHiddenClass),i(f,g.itemVisibleClass)),b&&a._emitter.on(this._queue,b),this._isHidden=this._isHiding=!0,this._isShowing=!1,this._startAnimation(!1,c,this._finishHide)):b&&a._emitter.on(this._queue,b):b&&b(!1,a)}},o.prototype.stop=function(b){if(!this._isDestroyed&&(this._isHiding||this._isShowing)){var a=this._item;aX(a._id),this._animation.stop(),b&&a._emitter.burst(this._queue,!0,a)}},o.prototype.setStyles=function(b){var c=this._childElement,d=this._currentStyleProps,a;for(a in this._removeCurrentStyles(),b)d.push(a),c.style[a]=b[a]},o.prototype.destroy=function(){if(!this._isDestroyed){var a=this._item,b=a._element,c=a.getGrid()._settings;this.stop(!0),a._emitter.clear(this._queue),this._animation.destroy(),this._removeCurrentStyles(),i(b,c.itemVisibleClass),i(b,c.itemHiddenClass),b.style.display="",this._isHiding=this._isShowing=!1,this._isDestroyed=this._isHidden=!0}},o.prototype._startAnimation=function(h,p,b){var j,g,d,i,a,c,k,o,n,f,l,m;if(!this._isDestroyed)if(g=this._item,d=this._animation,i=this._childElement,a=g.getGrid()._settings,c=h?a.visibleStyles:a.hiddenStyles,k=h?a.showDuration:a.hideDuration,o=h?a.showEasing:a.hideEasing,n=p||k<=0,c){if(aX(g._id),n)return M(i,c),d.stop(),void(b&&b());d.isAnimating()&&(d._animation.onfinish=null),f=g._id,l=function(){j=bv(i,c)},m=function(){d.start(j,c,{duration:k,easing:o,onFinish:b})},e.add(0,bq+f,l),e.add(2,bp+f,m)}else b&&b()},o.prototype._finishShow=function(){this._isHidden||(this._isShowing=!1,this._item._emitter.burst(this._queue,!1,this._item))},o.prototype._finishHide=function(){if(this._isHidden){var a=this._item;this._isHiding=!1,a._layout.stop(!0,0,0),a._element.style.display="none",a._emitter.burst(this._queue,!1,a)}},o.prototype._removeCurrentStyles=function(){for(var c=this._childElement,a=this._currentStyleProps,b=0;b<a.length;b++)c.style[a[b]]="";a.length=0},bM=0;function bH(){return++bM}function g(c,a,d){var e=c._settings;if(G){if(G.has(a))throw new Error("You can only create one Muuri Item per element!");G.set(a,this)}this._id=bH(),this._gridId=c._id,this._element=a,this._isDestroyed=!1,this._left=0,this._top=0,this._width=0,this._height=0,this._marginLeft=0,this._marginRight=0,this._marginTop=0,this._marginBottom=0,this._tX=void 0,this._tY=void 0,this._sortData=null,this._emitter=new l,a.parentNode!==c._element&&c._element.appendChild(a),k(a,e.itemClass),"boolean"!=typeof d&&(d="none"!==j(a,"display")),this._isActive=d,this._visibility=new o(this),this._layout=new u(this),this._migrate=new U(this),this._drag=e.dragEnabled?new b(this):null,this._dragRelease=new C(this),this._dragPlaceholder=new h(this)}function bC(j){var c,e,f,g,h,a=.001,d=.5,k;function i(a){return((1e3*a+.5<<0)/10<<0)/100}function b(){this.currentRects=[],this.nextRects=[],this.rectTarget={},this.rectStore=[],this.slotSizes=[],this.rectId=0,this.slotIndex=-1,this.slotData={left:0,top:0,width:0,height:0},this.sortRectsLeftTop=this.sortRectsLeftTop.bind(this),this.sortRectsTopLeft=this.sortRectsTopLeft.bind(this)}return b.prototype.computeLayout=function(c,j){var a,k,e,h,g,b,f=c.items,d=c.slots,p=!!(1&j),l=!!(2&j),m=!!(4&j),n=!!(8&j),q=!!(16&j),o="number"==typeof f[0];if(!f.length)return c;for(k=o?2:1,a=0;a<f.length;a+=k)o?(h=f[a],g=f[a+1]):(h=(e=f[a])._width+e._marginLeft+e._marginRight,g=e._height+e._marginTop+e._marginBottom),q&&(h=i(h),g=i(g)),b=this.computeNextSlot(c,h,g,p,l),l?b.left+b.width>c.width&&(c.width=b.left+b.width):b.top+b.height>c.height&&(c.height=b.top+b.height),d[++this.slotIndex]=b.left,d[++this.slotIndex]=b.top,(m||n)&&this.slotSizes.push(b.width,b.height);if(m)for(a=0;a<d.length;a+=2)d[a]=c.width-(d[a]+this.slotSizes[a]);if(n)for(a=1;a<d.length;a+=2)d[a]=c.height-(d[a]+this.slotSizes[a]);return this.slotSizes.length=0,this.currentRects.length=0,this.nextRects.length=0,this.rectStore.length=0,this.rectId=0,this.slotIndex=-1,c},b.prototype.computeNextSlot=function(c,p,o,m,i){var e,h,l,g,k,b=this.slotData,j=this.currentRects,f=this.nextRects,n=!1;for(f.length=0,b.left=null,b.top=null,b.width=p,b.height=o,g=0;g<j.length;g++)if((h=j[g])&&(e=this.getRect(h),b.width<=e.width+a&&b.height<=e.height+a)){b.left=e.left,b.top=e.top;break}if(null===b.left&&(i?(b.left=c.width,b.top=0):(b.left=0,b.top=c.height),m||(n=!0)),!i&&b.top+b.height>c.height+a&&(b.left>d&&f.push(this.addRect(0,c.height,b.left,1/0)),b.left+b.width<c.width-d&&f.push(this.addRect(b.left+b.width,c.height,c.width-b.left-b.width,1/0)),c.height=b.top+b.height),i&&b.left+b.width>c.width+a&&(b.top>d&&f.push(this.addRect(c.width,0,1/0,b.top)),b.top+b.height<c.height-d&&f.push(this.addRect(c.width,b.top+b.height,1/0,c.height-b.top-b.height)),c.width=b.left+b.width),!n)for(m&&(g=0);g<j.length;g++)if(h=j[g])for(e=this.getRect(h),l=this.splitRect(e,b),k=0;k<l.length;k++)h=l[k],e=this.getRect(h),(i?e.left+a<c.width-a:e.top+a<c.height-a)&&f.push(h);return f.length>1&&this.purgeRects(f).sort(i?this.sortRectsLeftTop:this.sortRectsTopLeft),this.currentRects=f,this.nextRects=j,b},b.prototype.addRect=function(b,c,d,e){var a=++this.rectId;return this.rectStore[a]=b||0,this.rectStore[++this.rectId]=c||0,this.rectStore[++this.rectId]=d||0,this.rectStore[++this.rectId]=e||0,a},b.prototype.getRect=function(b,a){return a||(a=this.rectTarget),a.left=this.rectStore[b]||0,a.top=this.rectStore[++b]||0,a.width=this.rectStore[++b]||0,a.height=this.rectStore[++b]||0,a},b.prototype.splitRect=(c=[],e=0,f=0,function(b,g){return c.length=0,b.left+b.width<=g.left+a||g.left+g.width<=b.left+a||b.top+b.height<=g.top+a||g.top+g.height<=b.top+a?(c.push(this.addRect(b.left,b.top,b.width,b.height)),c):((e=g.left-b.left)>=d&&c.push(this.addRect(b.left,b.top,e,b.height)),(e=b.left+b.width-(g.left+g.width))>=d&&c.push(this.addRect(g.left+g.width,b.top,e,b.height)),(f=g.top-b.top)>=d&&c.push(this.addRect(b.left,b.top,b.width,f)),(f=b.top+b.height-(g.top+g.height))>=d&&c.push(this.addRect(b.left,g.top+g.height,b.width,f)),c)}),b.prototype.isRectAWithinRectB=function(b,c){return b.left+a>=c.left&&b.top+a>=c.top&&b.left+b.width-a<=c.left+c.width&&b.top+b.height-a<=c.top+c.height},b.prototype.purgeRects=(g={},h={},function(a){for(var b,c=a.length;c--;)if(b=a.length,a[c])for(this.getRect(a[c],g);b--;)if(a[b]&&c!==b&&(this.getRect(a[b],h),this.isRectAWithinRectB(g,h))){a[c]=0;break}return a}),b.prototype.sortRectsTopLeft=function(){var b={},c={};return function(d,e){return this.getRect(d,b),this.getRect(e,c),b.top<c.top&&b.top+a<c.top?-1:b.top>c.top&&b.top-a>c.top?1:b.left<c.left&&b.left+a<c.left?-1:b.left>c.left&&b.left-a>c.left?1:0}}(),b.prototype.sortRectsLeftTop=function(){var b={},c={};return function(d,e){return this.getRect(d,b),this.getRect(e,c),b.left<c.left&&b.left+a<c.left?-1:b.left>c.left&&b.left-a<c.left?1:b.top<c.top&&b.top+a<c.top?-1:b.top>c.top&&b.top-a>c.top?1:0}}(),j&&(k=new b,self.onmessage=function(d){var a=new Float32Array(d.data),c=a.subarray(4,a.length),e=new Float32Array(c.length),f=a[3],b={items:c,slots:e,width:a[1],height:a[2]};k.computeLayout(b,f),a[1]=b.width,a[2]=b.height,a.set(b.slots,4),postMessage(a.buffer,[a.buffer])}),b}g.prototype.getGrid=function(){return ad[this._gridId]},g.prototype.getElement=function(){return this._element},g.prototype.getWidth=function(){return this._width},g.prototype.getHeight=function(){return this._height},g.prototype.getMargin=function(){return{left:this._marginLeft,right:this._marginRight,top:this._marginTop,bottom:this._marginBottom}},g.prototype.getPosition=function(){return{left:this._left,top:this._top}},g.prototype.isActive=function(){return this._isActive},g.prototype.isVisible=function(){return!!this._visibility&&!this._visibility._isHidden},g.prototype.isShowing=function(){return!(!this._visibility||!this._visibility._isShowing)},g.prototype.isHiding=function(){return!(!this._visibility||!this._visibility._isHiding)},g.prototype.isPositioning=function(){return!(!this._layout||!this._layout._isActive)},g.prototype.isDragging=function(){return!(!this._drag||!this._drag._isActive)},g.prototype.isReleasing=function(){return!(!this._dragRelease||!this._dragRelease._isActive)},g.prototype.isDestroyed=function(){return this._isDestroyed},g.prototype._refreshDimensions=function(d){if(!(this._isDestroyed||!0!==d&&this._visibility._isHidden)){var a=this._element,b=this._dragPlaceholder,c=a.getBoundingClientRect();this._width=c.width,this._height=c.height,this._marginLeft=Math.max(0,m(a,"margin-left")),this._marginRight=Math.max(0,m(a,"margin-right")),this._marginTop=Math.max(0,m(a,"margin-top")),this._marginBottom=Math.max(0,m(a,"margin-bottom")),b&&b.updateDimensions()}},g.prototype._refreshSortData=function(){if(!this._isDestroyed){var a,c=this._sortData={},b=this.getGrid()._settings.sortData;for(a in b)c[a]=b[a](this,this._element)}},g.prototype._addToLayout=function(a,b){!0!==this._isActive&&(this._isActive=!0,this._left=a||0,this._top=b||0)},g.prototype._removeFromLayout=function(){!1!==this._isActive&&(this._isActive=!1,this._left=0,this._top=0)},g.prototype._canSkipLayout=function(a,b){return this._left===a&&this._top===b&&!this._migrate._isActive&&!this._layout._skipNextAnimation&&!this._dragRelease.isJustReleased()},g.prototype._setTranslate=function(a,b){return(this._tX!==a||this._tY!==b)&&(this._tX=a,this._tY=b,this._element.style[s]=A(a,b),!0)},g.prototype._destroy=function(b){if(!this._isDestroyed){var a=this._element,c=this.getGrid()._settings;this._dragPlaceholder.destroy(),this._dragRelease.destroy(),this._migrate.destroy(),this._layout.destroy(),this._visibility.destroy(),this._drag&&this._drag.destroy(),this._emitter.destroy(),i(a,c.itemClass),b&&a.parentNode.removeChild(a),G&&G.delete(a),this._isActive=!1,this._isDestroyed=!0}},bB=bC(),O=null,ae=[];function w(a,b){if(this._options=0,this._processor=null,this._layoutQueue=[],this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={},this._workers=[],this._onWorkerMessage=this._onWorkerMessage.bind(this),this.setOptions(b),(a="number"==typeof a?Math.max(0,a):0)&&window.Worker&&window.URL&&window.Blob)try{this._workers=function(b,c){var d=[],a,e;if(b>0){O||(O=URL.createObjectURL(new Blob(["("+bC.toString()+")(true)"],{type:"application/javascript"})));for(a,e=0;e<b;e++)a=new Worker(O),c&&(a.onmessage=c),d.push(a),ae.push(a)}return d}(a,this._onWorkerMessage)}catch(a){this._processor=new bB}else this._processor=new bB}w.prototype._sendToWorker=function(){if(this._layoutQueue.length&&this._workers.length){var a=this._layoutQueue.shift(),b=this._workers.pop(),c=this._layoutWorkerData[a];delete this._layoutWorkerData[a],this._layoutWorkers[a]=b,b.postMessage(c.buffer,[c.buffer])}},w.prototype._onWorkerMessage=function(f){var c=new Float32Array(f.data),b=c[0],a=this._layouts[b],d=this._layoutCallbacks[b],e=this._layoutWorkers[b];a&&delete this._layouts[b],d&&delete this._layoutCallbacks[b],e&&delete this._layoutWorkers[b],a&&d&&(a.width=c[1],a.height=c[2],a.slots=c.subarray(4,c.length),this._finalizeLayout(a),d(a)),e&&(this._workers.push(e),this._sendToWorker())},w.prototype._finalizeLayout=function(a){var b=a._grid,d=2&a._settings,c="border-box"===b._boxSizing;return delete a._grid,delete a._settings,a.styles={},d?a.styles.width=(c?a.width+b._borderLeft+b._borderRight:a.width)+"px":a.styles.height=(c?a.height+b._borderTop+b._borderBottom:a.height)+"px",a},w.prototype.setOptions=function(a){var b,c,d,e,f;a&&(b="boolean"==typeof a.fillGaps?a.fillGaps?1:0:1&this._options,c="boolean"==typeof a.horizontal?a.horizontal?2:0:2&this._options,d="boolean"==typeof a.alignRight?a.alignRight?4:0:4&this._options,e="boolean"==typeof a.alignBottom?a.alignBottom?8:0:8&this._options,f="boolean"==typeof a.rounding?a.rounding?16:0:16&this._options,this._options=b|c|d|e|f)},w.prototype.createLayout=function(j,d,e,k,l,i){var h,a,f,g,b,c;if(this._layouts[d])throw new Error("A layout with the provided id is currently being processed.");if(h=2&this._options,a={id:d,items:e,slots:null,width:h?0:k,height:h?l:0,_grid:j,_settings:this._options},!e.length)return a.slots=[],this._finalizeLayout(a),void i(a);if(this._processor)return a.slots=window.Float32Array?new Float32Array(2*e.length):new Array(2*e.length),this._processor.computeLayout(a,a._settings),this._finalizeLayout(a),void i(a);c=new Float32Array(4+2*e.length);for(c[0]=d,c[1]=a.width,c[2]=a.height,c[3]=a._settings,f=0,g=3;f<e.length;f++)b=e[f],c[++g]=b._width+b._marginLeft+b._marginRight,c[++g]=b._height+b._marginTop+b._marginBottom;return this._layoutQueue.push(d),this._layouts[d]=a,this._layoutCallbacks[d]=i,this._layoutWorkerData[d]=c,this._sendToWorker(),this.cancelLayout.bind(this,d)},w.prototype.cancelLayout=function(a){if(this._layouts[a]&&(delete this._layouts[a],delete this._layoutCallbacks[a],this._layoutWorkerData[a])){delete this._layoutWorkerData[a];var b=this._layoutQueue.indexOf(a);b>-1&&this._layoutQueue.splice(b,1)}},w.prototype.destroy=function(){for(var a in this._layoutWorkers)this._workers.push(this._layoutWorkers[a]);!function(c){for(var a,d,b=0;b<c.length;b++)(a=c[b]).onmessage=null,a.onerror=null,a.onmessageerror=null,a.terminate(),(d=ae.indexOf(a))>-1&&ae.splice(d,1);O&&!ae.length&&(URL.revokeObjectURL(O),O=null)}(this._workers),this._workers.length=0,this._layoutQueue.length=0,this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={}},bU=0;function bV(h,d){var g=++bU,a=0,b=0,f=!1,c=function(d){f||(b&&(a-=d-b),b=d,a>0?function(a,b){e.add(0,aP+a,b)}(g,c):(a=b=0,h()))};return function(i){if(!f){if(!(d<=0))return!0===i?(f=!0,a=b=0,c=void 0,void function(a){e.remove(0,aP+a)}(g)):void(a<=0?(a=d,c(0)):a=d);!0!==i&&h()}}}function ay(b){var a=Object.prototype.toString.call(b);return"[object HTMLCollection]"===a||"[object NodeList]"===a}bL=Object.prototype.toString;function bj(a){return"object"==typeof a&&"[object Object]"===bL.call(a)}function bZ(){}bf="number",an="string",B="instant",aV=0;function c(b,e){if(typeof b===an&&(b=document.querySelector(b)),!(b.getRootNode?b.getRootNode({composed:!0})===document:document.body.contains(b))||b===document.documentElement)throw new Error("Container element must be an existing DOM element.");var a=function(b,a){var c=X({},b);return a&&(c=X(c,a)),a&&a.visibleStyles?c.visibleStyles=a.visibleStyles:b&&b.visibleStyles&&(c.visibleStyles=b.visibleStyles),a&&a.hiddenStyles?c.hiddenStyles=a.hiddenStyles:b&&b.hiddenStyles&&(c.hiddenStyles=b.hiddenStyles),c}(c.defaultOptions,e);a.visibleStyles=aL(a.visibleStyles),a.hiddenStyles=aL(a.hiddenStyles),d(a.dragSort)||(a.dragSort=!!a.dragSort),this._id=bH(),this._element=b,this._settings=a,this._isDestroyed=!1,this._items=[],this._layout={id:0,items:[],slots:[]},this._isLayoutFinished=!0,this._nextLayoutData=null,this._emitter=new l,this._onLayoutDataReceived=this._onLayoutDataReceived.bind(this),ad[this._id]=this,k(b,a.containerClass),function(b,a){typeof a!==bf&&(a=!0===a?0:-1),a>=0&&(b._resizeHandler=bV(function(){b.refreshItems().layout()},a),window.addEventListener("resize",b._resizeHandler))}(this,a.layoutOnResize),this.add(function(d,a){if("*"===a)return d.children;if(typeof a===an){for(var e=[],c=d.children,b=0;b<c.length;b++)_(c[b],a)&&e.push(c[b]);return e}return Array.isArray(a)||ay(a)?a:[]}(b,a.items),{layout:!1}),a.layoutOnInit&&this.layout(!0)}function X(b,c){var e,a,d,f=Object.keys(c),g=f.length;for(d=0;d<g;d++)e=bj(c[a=f[d]]),bj(b[a])&&e?b[a]=X(X({},b[a]),c[a]):e?b[a]=X({},c[a]):Array.isArray(c[a])?b[a]=c[a].slice(0):b[a]=c[a];return b}function aL(b){var a,c,d={},e=document.documentElement.style;for(a in b)b[a]&&(c=aj(e,a))&&(d[c]=b[a]);return d}function bb(b){for(var c={},a=0;a<b.length;a++)c[b[a]._id]=a;return c}function ar(a,b,c){return a[b._id]-a[c._id]}return c.Item=g,c.ItemLayout=u,c.ItemVisibility=o,c.ItemMigrate=U,c.ItemDrag=b,c.ItemDragRelease=C,c.ItemDragPlaceholder=h,c.Emitter=l,c.Animator=r,c.Dragger=a,c.Packer=w,c.AutoScroller=f,c.defaultPacker=new w(2),c.defaultOptions={items:"*",showDuration:300,showEasing:"ease",hideDuration:300,hideEasing:"ease",visibleStyles:{opacity:"1",transform:"scale(1)"},hiddenStyles:{opacity:"0",transform:"scale(0.5)"},layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1},layoutOnResize:150,layoutOnInit:!0,layoutDuration:300,layoutEasing:"ease",sortData:null,dragEnabled:!1,dragContainer:null,dragHandle:null,dragStartPredicate:{distance:0,delay:0},dragAxis:"xy",dragSort:!0,dragSortHeuristics:{sortInterval:100,minDragDistance:10,minBounceBackAngle:1},dragSortPredicate:{threshold:50,action:F,migrateAction:F},dragRelease:{duration:300,easing:"ease",useDragContainer:!0},dragCssProps:{touchAction:"none",userSelect:"none",userDrag:"none",tapHighlightColor:"rgba(0, 0, 0, 0)",touchCallout:"none",contentZooming:"none"},dragPlaceholder:{enabled:!1,createElement:null,onCreate:null,onRemove:null},dragAutoScroll:{targets:[],handle:null,threshold:50,safeZone:.2,speed:f.smoothSpeed(1e3,2e3,2500),sortDuringScroll:!0,smoothStop:!1,onStart:null,onStop:null},containerClass:"muuri",itemClass:"muuri-item",itemVisibleClass:"muuri-item-shown",itemHiddenClass:"muuri-item-hidden",itemPositioningClass:"muuri-item-positioning",itemDraggingClass:"muuri-item-dragging",itemReleasingClass:"muuri-item-releasing",itemPlaceholderClass:"muuri-item-placeholder"},c.prototype.on=function(a,b){return this._emitter.on(a,b),this},c.prototype.off=function(a,b){return this._emitter.off(a,b),this},c.prototype.getElement=function(){return this._element},c.prototype.getItem=function(a){var c,b;if(this._isDestroyed||!a&&0!==a)return null;if(typeof a===bf)return this._items[a>-1?a:this._items.length+a]||null;if(a instanceof g)return a._gridId===this._id?a:null;if(G)return c=G.get(a),c&&c._gridId===this._id?c:null;for(b=0;b<this._items.length;b++)if(this._items[b]._element===a)return this._items[b];return null},c.prototype.getItems=function(a){if(this._isDestroyed||void 0===a)return this._items.slice(0);var b,c,d=[];if(Array.isArray(a)||ay(a))for(b=0;b<a.length;b++)(c=this.getItem(a[b]))&&d.push(c);else(c=this.getItem(a))&&d.push(c);return d},c.prototype.refreshItems=function(g,e){if(this._isDestroyed)return this;var a,f,b,c,d=g||this._items;if(!0===e)for(c=[],a=0;a<d.length;a++)(f=d[a]).isVisible()||f.isHiding()||((b=f.getElement().style).visibility="hidden",b.display="",c.push(b));for(a=0;a<d.length;a++)d[a]._refreshDimensions(e);if(!0===e){for(a=0;a<c.length;a++)(b=c[a]).visibility="",b.display="none";c.length=0}return this},c.prototype.refreshSortData=function(c){if(this._isDestroyed)return this;for(var b=c||this._items,a=0;a<b.length;a++)b[a]._refreshSortData();return this},c.prototype.synchronize=function(){var a,d,b,c;if(this._isDestroyed)return this;if(b=this._items,!b.length)return this;for(c=0;c<b.length;c++)(d=b[c]._element).parentNode===this._element&&(a=a||document.createDocumentFragment()).appendChild(d);return a?(this._element.appendChild(a),this._emit("synchronize"),this):this},c.prototype.layout=function(l,m){var f,e,g,h,a,b,j,k,i;if(this._isDestroyed)return this;f=this._nextLayoutData,f&&d(f.cancel)&&f.cancel(),e=aV=aV%16777216+1,this._nextLayoutData={id:e,instant:l,onFinish:m,cancel:null};for(g=this._items,h=[],a=0;a<g.length;a++)g[a]._isActive&&h.push(g[a]);return this._refreshDimensions(),j=this._width-this._borderLeft-this._borderRight,k=this._height-this._borderTop-this._borderBottom,i=this._settings.layout,d(i)?b=i(this,e,h,j,k,this._onLayoutDataReceived):(c.defaultPacker.setOptions(i),b=c.defaultPacker.createLayout(this,e,h,j,k,this._onLayoutDataReceived)),d(b)&&this._nextLayoutData&&this._nextLayoutData.id===e&&(this._nextLayoutData.cancel=b),this},c.prototype.add=function(l,n){var j,b,f,h,e,a,c,i,m,k;if(this._isDestroyed||!l)return[];if(b=ay(j=l)?Array.prototype.slice.call(j):Array.prototype.concat(j),!b.length)return b;c=n||{},i=c.layout?c.layout:void 0===c.layout,m=this._items,k=!1;for(a=0;a<b.length;a++)(h=b[a]).parentNode!==this._element&&(f=f||document.createDocumentFragment()).appendChild(h);for(f&&this._element.appendChild(f),a=0;a<b.length;a++)h=b[a],(e=b[a]=new g(this,h,c.active))._isActive&&(k=!0,e._layout._skipNextAnimation=!0);for(a=0;a<b.length;a++)(e=b[a])._refreshDimensions(),e._refreshSortData();return at(m,b,c.index),this._hasListeners("add")&&this._emit("add",b.slice(0)),k&&i&&this.layout(i===B,d(i)?i:void 0),b},c.prototype.remove=function(f,k){if(this._isDestroyed||!f.length)return[];var i,a,c,e=k||{},b=e.layout?e.layout:void 0===e.layout,h=!1,l=this.getItems(),g=[],j=[];for(c=0;c<f.length;c++)(a=f[c])._isDestroyed||-1!==(i=this._items.indexOf(a))&&(a._isActive&&(h=!0),g.push(a),j.push(l.indexOf(a)),a._destroy(e.removeElements),this._items.splice(i,1));return this._hasListeners(aW)&&this._emit(aW,g.slice(0),j),h&&b&&this.layout(b===B,d(b)?b:void 0),g},c.prototype.show=function(a,b){return!this._isDestroyed&&a.length&&this._setItemsVisibility(a,!0,b),this},c.prototype.hide=function(a,b){return!this._isDestroyed&&a.length&&this._setItemsVisibility(a,!1,b),this},c.prototype.filter=function(i,n){if(this._isDestroyed||!this._items.length)return this;var e,h,b=[],c=[],p=typeof i===an,j=d(i),a=n||{},k=!0===a.instant,l=a.syncWithLayout,g=a.layout?a.layout:void 0===a.layout,m=d(a.onFinish)?a.onFinish:null,o=-1,f=bZ;if(m&&(f=function(){++o&&m(b.slice(0),c.slice(0))}),j||p)for(h=0;h<this._items.length;h++)e=this._items[h],(j?i(e):_(e._element,i))?b.push(e):c.push(e);return b.length?this.show(b,{instant:k,syncWithLayout:l,onFinish:f,layout:!1}):f(),c.length?this.hide(c,{instant:k,syncWithLayout:l,onFinish:f,layout:!1}):f(),(b.length||c.length)&&(this._hasListeners(aZ)&&this._emit(aZ,b.slice(0),c.slice(0)),g&&this.layout(g===B,d(g)?g:void 0)),this},c.prototype.sort=function(){var b,c,e,a;function f(d,f){for(var k,l,g,h,i=0,j=0;j<b.length;j++)if(k=b[j][0],l=b[j][1],g=(d._sortData?d:d._refreshSortData())._sortData[k],h=(f._sortData?f:f._refreshSortData())._sortData[k],i="desc"===l||!l&&c?h<g?-1:h>g?1:0:g<h?-1:g>h?1:0)return i;return i||(a||(a=bb(e)),i=c?ar(a,f,d):ar(a,d,f)),i}function g(d,f){var g=c?-b(d,f):b(d,f);return g||(a||(a=bb(e)),g=c?ar(a,f,d):ar(a,d,f)),g}return function(i,l){if(this._isDestroyed||this._items.length<2)return this;var h=this._items,j=l||{},k=j.layout?j.layout:void 0===j.layout;if(c=!!j.descending,e=h.slice(0),a=null,d(i))b=i,h.sort(g);else if(typeof i===an)b=i.trim().split(" ").filter(function(a){return a}).map(function(a){return a.split(":")}),h.sort(f);else{if(!Array.isArray(i))throw b=c=e=a=null,new Error("Invalid comparer argument provided.");h.length=0,h.push.apply(h,i)}return this._hasListeners(bi)&&this._emit(bi,h.slice(0),e),k&&this.layout(k===B,d(k)?k:void 0),b=c=e=a=null,this}}(),c.prototype.move=function(j,k,l){if(this._isDestroyed||this._items.length<2)return this;var c,e,f=this._items,a=l||{},b=a.layout?a.layout:void 0===a.layout,i=a.action===q,m=i?q:F,g=this.getItem(j),h=this.getItem(k);return g&&h&&g!==h&&(c=f.indexOf(g),e=f.indexOf(h),i?aS(f,c,e):bI(f,c,e),this._hasListeners(al)&&this._emit(al,{item:g,fromIndex:c,toIndex:e,action:m}),b&&this.layout(b===B,d(b)?b:void 0)),this},c.prototype.send=function(b,c,g,h){if(this._isDestroyed||c._isDestroyed||this===c)return this;if(!(b=this.getItem(b)))return this;var a=h||{},i=a.appendTo||document.body,e=a.layoutSender?a.layoutSender:void 0===a.layoutSender,f=a.layoutReceiver?a.layoutReceiver:void 0===a.layoutReceiver;return b._migrate.start(c,g,i),b._migrate._isActive&&b._isActive&&(e&&this.layout(e===B,d(e)?e:void 0),f&&c.layout(f===B,d(f)?f:void 0)),this},c.prototype.destroy=function(f){if(this._isDestroyed)return this;var a,c,b,d=this._element,e=this._items.slice(0),g=this._layout&&this._layout.styles||{};for((b=this)._resizeHandler&&(b._resizeHandler(!0),window.removeEventListener("resize",b._resizeHandler),b._resizeHandler=null),a=0;a<e.length;a++)e[a]._destroy(f);for(c in this._items.length=0,i(d,this._settings.containerClass),g)d.style[c]="";return this._emit("destroy"),this._emitter.destroy(),delete ad[this._id],this._isDestroyed=!0,this},c.prototype._emit=function(){this._isDestroyed||this._emitter.emit.apply(this._emitter,arguments)},c.prototype._hasListeners=function(a){return!this._isDestroyed&&this._emitter.countListeners(a)>0},c.prototype._updateBoundingRect=function(){var a=this._element.getBoundingClientRect();this._width=a.width,this._height=a.height,this._left=a.left,this._top=a.top,this._right=a.right,this._bottom=a.bottom},c.prototype._updateBorders=function(b,c,d,e){var a=this._element;b&&(this._borderLeft=m(a,"border-left-width")),c&&(this._borderRight=m(a,"border-right-width")),d&&(this._borderTop=m(a,"border-top-width")),e&&(this._borderBottom=m(a,"border-bottom-width"))},c.prototype._refreshDimensions=function(){this._updateBoundingRect(),this._updateBorders(1,1,1,1),this._boxSizing=j(this._element,"box-sizing")},c.prototype._onLayoutDataReceived=(H=[],function(a){var c,h,i,b,f,g,l,j,e,k;if(!this._isDestroyed&&this._nextLayoutData&&this._nextLayoutData.id===a.id){f=this,g=this._nextLayoutData.instant,l=this._nextLayoutData.onFinish,j=a.items.length,e=j;for(this._nextLayoutData=null,!this._isLayoutFinished&&this._hasListeners(aU)&&this._emit(aU,this._layout.items.slice(0)),this._layout=a,H.length=0,b=0;b<j;b++)(c=a.items[b])?(h=a.slots[2*b],i=a.slots[2*b+1],c._canSkipLayout(h,i)?--e:(c._left=h,c._top=i,c.isActive()&&!c.isDragging()?H.push(c):--e)):--e;if(a.styles&&M(this._element,a.styles),!this._hasListeners(E)||(this._emit(E,a.items.slice(0),!0===g),this._layout.id===a.id)){if(k=function(){if(!(--e>0)){var b=f._layout.id!==a.id,c=d(g)?g:l;b||(f._isLayoutFinished=!0),d(c)&&c(a.items.slice(0),b),!b&&f._hasListeners(aR)&&f._emit(aR,a.items.slice(0))}},!H.length)return k(),this;for(this._isLayoutFinished=!1,b=0;b<H.length&&this._layout.id===a.id;b++)H[b]._layout.start(!0===g,k);return this._layout.id===a.id&&(H.length=0),this}}}),c.prototype._setItemsVisibility=function(t,e,s){var a,b,f=this,c=t.slice(0),g=s||{},r=!0===g.instant,h=g.onFinish,l=g.layout?g.layout:void 0===g.layout,n=c.length,p=e?"showStart":V,j=e?"showEnd":"hideEnd",q=e?"show":"hide",m=!1,i=[],k=[];if(n){for(b=0;b<c.length;b++)a=c[b],(e&&!a._isActive||!e&&a._isActive)&&(m=!0),a._layout._skipNextAnimation=!(!e||a._isActive),e&&a._visibility._isHidden&&k.push(a),e?a._addToLayout():a._removeFromLayout();k.length&&(this.refreshItems(k,!0),k.length=0),m&&!1!==g.syncWithLayout?this.on(E,o):o(),m&&l&&this.layout(l===B,d(l)?l:void 0)}else d(h)&&h(c);function o(){for(m&&!1!==g.syncWithLayout&&f.off(E,o),f._hasListeners(p)&&f._emit(p,c.slice(0)),b=0;b<c.length;b++)c[b]._gridId===f._id?c[b]._visibility[q](r,function(a,b){a||i.push(b),--n<1&&(d(h)&&h(i.slice(0)),f._hasListeners(j)&&f._emit(j,i.slice(0)))}):--n<1&&(d(h)&&h(i.slice(0)),f._hasListeners(j)&&f._emit(j,i.slice(0)))}},c});const options={items:'*',showDuration:700,showEasing:'cubic-bezier(0.215, 0.61, 0.355, 1)',hideDuration:700,hideEasing:'cubic-bezier(0.215, 0.61, 0.355, 1)',visibleStyles:{opacity:'1',transform:'scale(1)'},hiddenStyles:{opacity:'0',transform:'scale(0.5)'},layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1},layoutOnResize:150,layoutOnInit:!0,layoutDuration:300,layoutEasing:'cubic-bezier(0.215, 0.61, 0.355, 1)',sortData:null,dragEnabled:!1,containerClass:'muuri',itemClass:'muuri-item',itemVisibleClass:'muuri-item-shown',itemHiddenClass:'muuri-item-hidden',itemPositioningClass:'muuri-item-positioning',itemDraggingClass:'muuri-item-dragging',itemReleasingClass:'muuri-item-releasing',itemPlaceholderClass:'muuri-item-placeholder'};document.getElementsByClassName("muugrid")&&(muugrid=new Muuri('.muugrid',options)),searchField=document.querySelector('.search-field'),itemz=document.querySelector('.item'),searchField.value='',searchField.addEventListener('keyup',function(){var a=searchField.value.toLowerCase();searchFieldValue!==a&&(searchFieldValue=a,filter())});function filter(){muugrid.filter(function(a){var b=a.getElement(),c=!searchFieldValue||(b.getAttribute('data-search')||'').toLowerCase().indexOf(searchFieldValue)>-1;return c}),showPic()}location.href.indexOf("#")!=-1&&(filt=window.location.hash,filt="."+filt.substring(1),filt=='.'?muugrid.filter('*'):muugrid.filter(filt));function menuFilter(a){a=='.'?muugrid.filter('*'):muugrid.filter(a),window.scrollTo({top:0,behavior:'smooth'});var b=a.substring(1);window.location.hash=b,showPic()}