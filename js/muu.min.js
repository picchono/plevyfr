!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Muuri=t()}(this,function(){"use strict";var m,y,N,V,$,Q,oe={},T="function"==typeof Map?new Map:null,g="swap",z="move",A="layoutStart",Ue="layoutEnd",Ke="layoutAbort",Xe="remove",K="hideStart",ot="filter",ct="sort",pe="move",fe="send",E="beforeSend",me="receive",he="beforeReceive",W="dragReleaseEnd",zt="ontouchstart"in window,we=!!window.PointerEvent,_e=!!window.navigator.msPointerEnabled,de,ye,St,Te,ze,Ge,je,Le,ie,vt,Ae,_t,Ee,Fe,ae,kt,Oe,Rt,Tt,Vt;function h(){this._events={},this._queue=[],this._counter=0,this._clearOnEmit=!1}h.prototype.on=function(e,t){if(!this._events||!e||!t)return this;var n=this._events[e];return n||(n=this._events[e]=[]),n.push(t),this},h.prototype.off=function(e,t){if(!this._events||!e||!t)return this;var s,n=this._events[e];if(!n||!n.length)return this;for(;-1!==(s=n.indexOf(t));)n.splice(s,1);return this},h.prototype.clear=function(e){if(!this._events||!e)return this;var t=this._events[e];return t&&(t.length=0,delete this._events[e]),this},h.prototype.emit=function(e){if(!this._events||!e)return this._clearOnEmit=!1,this;if(s=this._events[e],!s||!s.length)return this._clearOnEmit=!1,this;var n,s,i,a,t=this._queue,r=t.length,o=arguments.length-1;o>3&&((i=[]).push.apply(i,arguments),i.shift()),t.push.apply(t,s),this._clearOnEmit&&(s.length=0,this._clearOnEmit=!1),++this._counter;for(n=r,a=t.length;n<a;n++)if(0===o?t[n]():1===o?t[n](arguments[1]):2===o?t[n](arguments[1],arguments[2]):3===o?t[n](arguments[1],arguments[2],arguments[3]):t[n].apply(null,i),!this._events)return this;return--this._counter,this._counter||(t.length=0),this},h.prototype.burst=function(){return this._events?(this._clearOnEmit=!0,this.emit.apply(this,arguments),this):this},h.prototype.countListeners=function(e){if(!this._events)return 0;var t=this._events[e];return t?t.length:0},h.prototype.destroy=function(){return this._events?(this._queue.length=this._counter=0,this._events=null,this):this},Q=we?"pointerout":_e?"MSPointerOut":"";function x(e){Q&&(this._dragger=e,this._timeout=null,this._outEvent=null,this._isActive=!1,this._addBehaviour=this._addBehaviour.bind(this),this._removeBehaviour=this._removeBehaviour.bind(this),this._onTimeout=this._onTimeout.bind(this),this._resetData=this._resetData.bind(this),this._onStart=this._onStart.bind(this),this._onOut=this._onOut.bind(this),this._dragger.on("start",this._onStart))}x.prototype._addBehaviour=function(){this._isActive||(this._isActive=!0,this._dragger.on("move",this._resetData),this._dragger.on("cancel",this._removeBehaviour),this._dragger.on("end",this._removeBehaviour),window.addEventListener(Q,this._onOut))},x.prototype._removeBehaviour=function(){this._isActive&&(this._dragger.off("move",this._resetData),this._dragger.off("cancel",this._removeBehaviour),this._dragger.off("end",this._removeBehaviour),window.removeEventListener(Q,this._onOut),this._resetData(),this._isActive=!1)},x.prototype._resetData=function(){window.clearTimeout(this._timeout),this._timeout=null,this._outEvent=null},x.prototype._onStart=function(e){"mouse"!==e.pointerType&&this._addBehaviour()},x.prototype._onOut=function(e){this._dragger._getTrackedTouch(e)&&(this._resetData(),this._outEvent=e,this._timeout=window.setTimeout(this._onTimeout,100))},x.prototype._onTimeout=function(){var e=this._outEvent;this._resetData(),this._dragger.isActive()&&this._dragger._onCancel(e)},x.prototype.destroy=function(){Q&&(this._dragger.off("start",this._onStart),this._removeBehaviour())},de=["","webkit","moz","ms","o","Webkit","Moz","MS","O"],ye={};function le(e,t){if(n=ye[t]||"",n)return n;for(var n,o=t[0].toUpperCase()+t.slice(1),s=0;s<de.length;){if((n=de[s]?de[s]+o:t)in e)return ye[t]=n,n;++s}return""}function Lt(){var e,t=!1;try{e=Object.defineProperty({},"passive",{get:function(){t=!0}}),window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch{}return t}var ne=window.navigator.userAgent.toLowerCase(),rn=ne.indexOf("edge")>-1,$t=ne.indexOf("trident")>-1,Wt=ne.indexOf("firefox")>-1,Ut=ne.indexOf("android")>-1,C=!!Lt()&&{passive:!0},Ft="touchAction",ce=le(document.documentElement.style,Ft);function e(t,n){this._element=t,this._emitter=new h,this._isDestroyed=!1,this._cssProps={},this._touchAction="",this._isActive=!1,this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._onStart=this._onStart.bind(this),this._onMove=this._onMove.bind(this),this._onCancel=this._onCancel.bind(this),this._onEnd=this._onEnd.bind(this),this._edgeHack=null,(rn||$t)&&(we||_e)&&(this._edgeHack=new x(this)),this.setCssProps(n),this._touchAction||this.setTouchAction("auto"),t.addEventListener("dragstart",e._preventDefault,!1),t.addEventListener(e._inputEvents.start,this._onStart,C)}e._pointerEvents={start:"pointerdown",move:"pointermove",cancel:"pointercancel",end:"pointerup"},e._msPointerEvents={start:"MSPointerDown",move:"MSPointerMove",cancel:"MSPointerCancel",end:"MSPointerUp"},e._touchEvents={start:"touchstart",move:"touchmove",cancel:"touchcancel",end:"touchend"},e._mouseEvents={start:"mousedown",move:"mousemove",cancel:"",end:"mouseup"},e._inputEvents=zt?e._touchEvents:we?e._pointerEvents:_e?e._msPointerEvents:e._mouseEvents,e._emitter=new h,e._emitterEvents={start:"start",move:"move",end:"end",cancel:"cancel"},e._activeInstances=[],e._preventDefault=function(e){e.preventDefault&&!1!==e.cancelable&&e.preventDefault()},e._activateInstance=function(t){e._activeInstances.indexOf(t)>-1||(e._activeInstances.push(t),e._emitter.on(e._emitterEvents.move,t._onMove),e._emitter.on(e._emitterEvents.cancel,t._onCancel),e._emitter.on(e._emitterEvents.end,t._onEnd),1===e._activeInstances.length&&e._bindListeners())},e._deactivateInstance=function(t){var n=e._activeInstances.indexOf(t);-1!==n&&(e._activeInstances.splice(n,1),e._emitter.off(e._emitterEvents.move,t._onMove),e._emitter.off(e._emitterEvents.cancel,t._onCancel),e._emitter.off(e._emitterEvents.end,t._onEnd),e._activeInstances.length||e._unbindListeners())},e._bindListeners=function(){window.addEventListener(e._inputEvents.move,e._onMove,C),window.addEventListener(e._inputEvents.end,e._onEnd,C),e._inputEvents.cancel&&window.addEventListener(e._inputEvents.cancel,e._onCancel,C)},e._unbindListeners=function(){window.removeEventListener(e._inputEvents.move,e._onMove,C),window.removeEventListener(e._inputEvents.end,e._onEnd,C),e._inputEvents.cancel&&window.removeEventListener(e._inputEvents.cancel,e._onCancel,C)},e._getEventPointerId=function(e){return"number"==typeof e.pointerId?e.pointerId:e.changedTouches?e.changedTouches[0]?e.changedTouches[0].identifier:null:1},e._getTouchById=function(e,t){if("number"==typeof e.pointerId)return e.pointerId===t?e:null;if(e.changedTouches){for(var n=0;n<e.changedTouches.length;n++)if(e.changedTouches[n].identifier===t)return e.changedTouches[n];return null}return e},e._onMove=function(t){e._emitter.emit(e._emitterEvents.move,t)},e._onCancel=function(t){e._emitter.emit(e._emitterEvents.cancel,t)},e._onEnd=function(t){e._emitter.emit(e._emitterEvents.end,t)},e.prototype._reset=function(){this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._isActive=!1,e._deactivateInstance(this)},e.prototype._createEvent=function(t,n){var s=this._getTrackedTouch(n);return{type:t,srcEvent:n,distance:this.getDistance(),deltaX:this.getDeltaX(),deltaY:this.getDeltaY(),deltaTime:t===e._emitterEvents.start?0:this.getDeltaTime(),isFirst:t===e._emitterEvents.start,isFinal:t===e._emitterEvents.end||t===e._emitterEvents.cancel,pointerType:n.pointerType||(n.touches?"touch":"mouse"),identifier:this._pointerId,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,target:s.target}},e.prototype._emit=function(e,t){this._emitter.emit(e,this._createEvent(e,t))},e.prototype._getTrackedTouch=function(t){return null===this._pointerId?null:e._getTouchById(t,this._pointerId)},e.prototype._onStart=function(t){if(!this._isDestroyed&&null===this._pointerId&&(this._pointerId=e._getEventPointerId(t),null!==this._pointerId)){var n=this._getTrackedTouch(t);this._startX=this._currentX=n.clientX,this._startY=this._currentY=n.clientY,this._startTime=Date.now(),this._isActive=!0,this._emit(e._emitterEvents.start,t),this._isActive&&e._activateInstance(this)}},e.prototype._onMove=function(t){var n=this._getTrackedTouch(t);n&&(this._currentX=n.clientX,this._currentY=n.clientY,this._emit(e._emitterEvents.move,t))},e.prototype._onCancel=function(t){this._getTrackedTouch(t)&&(this._emit(e._emitterEvents.cancel,t),this._reset())},e.prototype._onEnd=function(t){this._getTrackedTouch(t)&&(this._emit(e._emitterEvents.end,t),this._reset())},e.prototype.isActive=function(){return this._isActive},e.prototype.setTouchAction=function(t){this._touchAction=t,ce&&(this._cssProps[ce]="",this._element.style[ce]=t),zt&&(this._element.removeEventListener(e._touchEvents.start,e._preventDefault,!0),(this._element.style[ce]!==t||Wt&&Ut)&&this._element.addEventListener(e._touchEvents.start,e._preventDefault,!0))},e.prototype.setCssProps=function(e){if(e){var t,s,n=this._cssProps,o=this._element;for(t in n)o.style[t]=n[t],delete n[t];for(t in e)e[t]&&(t!==Ft?(s=le(o.style,t))&&(n[s]="",o.style[s]=e[t]):this.setTouchAction(e[t]))}},e.prototype.getDeltaX=function(){return this._currentX-this._startX},e.prototype.getDeltaY=function(){return this._currentY-this._startY},e.prototype.getDistance=function(){var e=this.getDeltaX(),t=this.getDeltaY();return Math.sqrt(e*e+t*t)},e.prototype.getDeltaTime=function(){return this._startTime?Date.now()-this._startTime:0},e.prototype.on=function(e,t){this._emitter.on(e,t)},e.prototype.off=function(e,t){this._emitter.off(e,t)},e.prototype.destroy=function(){if(!this._isDestroyed){var n,t=this._element;for(n in this._edgeHack&&this._edgeHack.destroy(),this._reset(),this._emitter.destroy(),t.removeEventListener(e._inputEvents.start,this._onStart,C),t.removeEventListener("dragstart",e._preventDefault,!1),t.removeEventListener(e._touchEvents.start,e._preventDefault,!0),this._cssProps)t.style[n]=this._cssProps[n],delete this._cssProps[n];this._element=null,this._isDestroyed=!0}},St=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return this.setTimeout(function(){e(Date.now())},16.666666666666668)}).bind(window);function re(e){this._nextStep=null,this._lanes=[],this._stepQueue=[],this._stepCallbacks={},this._step=this._step.bind(this);for(var t=0;t<e;t++)this._lanes.push(new xe)}function xe(){this.queue=[],this.indices={},this.callbacks={}}re.prototype._step=function(e){var t,n,s,o,c,l,i=this._lanes,a=this._stepQueue,r=this._stepCallbacks;for(this._nextStep=null,t=0;t<i.length;t++){for(o=i[t].queue,c=i[t].callbacks,l=i[t].indices,s=0;s<o.length;s++)(n=o[s])&&(a.push(n),r[n]=c[n],delete c[n],delete l[n]);o.length=0}for(t=0;t<a.length;t++)r[n=a[t]]&&r[n](e),delete r[n];a.length=0},re.prototype.add=function(e,t,n){this._lanes[e].add(t,n),this._nextStep||(this._nextStep=St(this._step))},re.prototype.remove=function(e,t){this._lanes[e].remove(t)},xe.prototype.add=function(e,t){var n=this.indices[e];void 0!==n&&(this.queue[n]=void 0),this.queue.push(e),this.callbacks[e]=t,this.indices[e]=this.queue.length-1},xe.prototype.remove=function(e){var t=this.indices[e];void 0!==t&&(this.queue[t]=void 0,delete this.callbacks[e],delete this.indices[e])};var xt="layoutRead",jt="layoutWrite",gt="visibilityRead",pt="visibilityWrite",ft="dragStartRead",Ct="dragStartWrite",ht="dragMoveRead",ut="dragMoveWrite",at="dragScrollRead",nt="dragScrollWrite",et="dragSortRead",We="placeholderLayoutRead",Be="placeholderLayoutWrite",Ie="placeholderResizeWrite",Ye="autoScrollRead",Ze="autoScrollWrite",Je="debounceRead",o=new re(3);function tt(e){o.remove(0,xt+e),o.remove(2,jt+e)}function st(e){o.remove(0,gt+e),o.remove(2,pt+e)}function dt(e){o.remove(0,ft+e),o.remove(2,Ct+e)}function bt(e){o.remove(0,ht+e),o.remove(2,ut+e)}function Ot(e){o.remove(0,at+e),o.remove(2,nt+e)}function ve(e,t){o.add(1,et+e,t)}function Qe(e){o.remove(0,We+e),o.remove(2,Be+e)}function Nt(e,t){o.add(0,Ye,e),o.add(2,Ze,t)}function s(e){return"function"==typeof e}$="function"==typeof WeakMap?new WeakMap:null;function l(e,t){var n=$&&$.get(e);return n||(n=window.getComputedStyle(e,null),$&&$.set(e,n)),n.getPropertyValue(t)}function u(e,t){return parseFloat(l(e,t))||0}var p,F=document.documentElement,an=document.body,ee={value:0,offset:0};function He(e){return e===window||e===F||e===an?window:e}function X(e){return e===window?e.pageXOffset:e.scrollLeft}function Y(e){return e===window?e.pageYOffset:e.scrollTop}function Dt(e){return e===window?F.scrollWidth-F.clientWidth:e.scrollWidth-e.clientWidth}function At(e){return e===window?F.scrollHeight-F.clientHeight:e.scrollHeight-e.clientHeight}function Et(e,t){if(t=t||{},e===window)t.width=F.clientWidth,t.height=F.clientHeight,t.left=0,t.right=t.width,t.top=0,t.bottom=t.height;else{var n=e.getBoundingClientRect(),s=e.clientLeft||u(e,"border-left-width"),o=e.clientTop||u(e,"border-top-width");t.width=e.clientWidth,t.height=e.clientHeight,t.left=n.left+s,t.right=t.left+t.width,t.top=n.top+o,t.bottom=t.top+t.height}return t}function U(e){return e._drag._getGrid()._settings.dragAutoScroll}function on(e){if(e._drag&&e._isActive){var t=e._drag;t._scrollDiffX=t._scrollDiffY=0,e._setTranslate(t._left,t._top)}}function ke(e,t,n,s){return ee.value=Math.min(s/2,e),ee.offset=Math.max(0,n+2*ee.value+s*t-s)/2,ee}function w(){this.reset()}function B(){this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}function Z(e,t){this.pool=[],this.createItem=e,this.releaseItem=t}function se(e,t){var n=function(e,t){return function(e,t){return!(e.left+e.width<=t.left||t.left+t.width<=e.left||e.top+e.height<=t.top||t.top+t.height<=e.top)}(e,t)?(Math.min(e.left+e.width,t.left+t.width)-Math.max(e.left,t.left))*(Math.min(e.top+e.height,t.top+t.height)-Math.max(e.top,t.top)):0}(e,t);return n?n/(Math.min(e.width,t.width)*Math.min(e.height,t.height))*100:0}w.prototype.reset=function(){this.isActive&&this.onStop(),this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=null,this.value=null,this.maxValue=0,this.threshold=0,this.distance=0,this.speed=0,this.duration=0,this.action=null},w.prototype.hasReachedEnd=function(){return 4&this.direction?this.value>=this.maxValue:this.value<=0},w.prototype.computeCurrentScrollValue=function(){return null===this.value?1&this.direction?X(this.element):Y(this.element):Math.max(0,Math.min(this.value,this.maxValue))},w.prototype.computeNextScrollValue=function(e){var t=this.speed*(e/1e3),n=4&this.direction?this.value+t:this.value-t;return Math.max(0,Math.min(n,this.maxValue))},w.prototype.computeSpeed=(p={direction:null,threshold:0,distance:0,value:0,maxValue:0,deltaTime:0,duration:0,isEnding:!1},function(e){var n=this.item,t=U(n).speed;return s(t)?(p.direction=this.direction,p.threshold=this.threshold,p.distance=this.distance,p.value=this.value,p.maxValue=this.maxValue,p.duration=this.duration,p.speed=this.speed,p.deltaTime=e,p.isEnding=this.isEnding,t(n,this.element,p)):t}),w.prototype.tick=function(e){return this.isActive||(this.isActive=!0,this.onStart()),this.value=this.computeCurrentScrollValue(),this.speed=this.computeSpeed(e),this.value=this.computeNextScrollValue(e),this.duration+=e,this.value},w.prototype.onStart=function(){var e=this.item,t=U(e).onStart;s(t)&&t(e,this.element,this.direction)},w.prototype.onStop=function(){var e=this.item,t=U(e).onStop;s(t)&&t(e,this.element,this.direction),e._drag&&e._drag.sort()},B.prototype.reset=function(){this.requestX&&(this.requestX.action=null),this.requestY&&(this.requestY.action=null),this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0},B.prototype.addRequest=function(e){1&e.direction?(this.removeRequest(this.requestX),this.requestX=e):(this.removeRequest(this.requestY),this.requestY=e),e.action=this},B.prototype.removeRequest=function(e){e&&(this.requestX===e?(this.requestX=null,e.action=null):this.requestY===e&&(this.requestY=null,e.action=null))},B.prototype.computeScrollValues=function(){this.scrollLeft=this.requestX?this.requestX.value:X(this.element),this.scrollTop=this.requestY?this.requestY.value:Y(this.element)},B.prototype.scroll=function(){var e=this.element;e&&(e.scrollTo?e.scrollTo(this.scrollLeft,this.scrollTop):(e.scrollLeft=this.scrollLeft,e.scrollTop=this.scrollTop))},Z.prototype.pick=function(){return this.pool.pop()||this.createItem()},Z.prototype.release=function(e){this.releaseItem(e),-1===this.pool.indexOf(e)&&this.pool.push(e)},Z.prototype.reset=function(){this.pool.length=0},Te={width:0,height:0,left:0,right:0,top:0,bottom:0},ze={width:0,height:0,left:0,right:0,top:0,bottom:0};function i(){this._isDestroyed=!1,this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,this._items=[],this._actions=[],this._requests={},this._requests[1]={},this._requests[2]={},this._requestOverlapCheck={},this._dragPositions={},this._dragDirections={},this._overlapCheckInterval=150,this._requestPool=new Z(function(){return new w},function(e){e.reset()}),this._actionPool=new Z(function(){return new B},function(e){e.reset()}),this._readTick=this._readTick.bind(this),this._writeTick=this._writeTick.bind(this)}i.AXIS_X=1,i.AXIS_Y=2,i.FORWARD=4,i.BACKWARD=8,i.LEFT=9,i.RIGHT=5,i.UP=10,i.DOWN=6,i.smoothSpeed=function(e,t,n){return function(s,o,i){a=0,i.isEnding||(i.threshold>0?(l=i.threshold-Math.max(0,i.distance),a=e/i.threshold*l):a=e);var a,l,c=i.speed,r=a;return c===a?r:c<a?(r=c+t*(i.deltaTime/1e3),Math.min(a,r)):(r=c-n*(i.deltaTime/1e3),Math.max(a,r))}},i.pointerHandle=function(e){var t={left:0,top:0,width:0,height:0},n=e||1;return function(e,s,o,i,a,r,c){return t.left=r-.5*n,t.top=c-.5*n,t.width=n,t.height=n,t}},i.prototype._readTick=function(e){this._isDestroyed||(e&&this._tickTime?(this._tickDeltaTime=e-this._tickTime,this._tickTime=e,this._updateRequests(),this._updateActions()):(this._tickTime=e,this._tickDeltaTime=0))},i.prototype._writeTick=function(){this._isDestroyed||(this._applyActions(),Nt(this._readTick,this._writeTick))},i.prototype._startTicking=function(){this._isTicking=!0,Nt(this._readTick,this._writeTick)},i.prototype._stopTicking=function(){this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,o.remove(0,Ye),o.remove(2,Ze)},i.prototype._getItemHandleRect=function(e,t,n){if(s=e._drag,t){var s,i=s._dragMoveEvent||s._dragStartEvent,o=t(e,s._clientX,s._clientY,e._width,e._height,i.clientX,i.clientY);n.left=o.left,n.top=o.top,n.width=o.width,n.height=o.height}else n.left=s._clientX,n.top=s._clientY,n.width=e._width,n.height=e._height;return n.right=n.left+n.width,n.bottom=n.top+n.height,n},i.prototype._requestItemScroll=function(e,t,n,s,o,i,a){var c=this._requests[t],r=c[e._id];r?r.element===n&&r.direction===s||r.reset():r=this._requestPool.pick(),r.item=e,r.element=n,r.direction=s,r.threshold=o,r.distance=i,r.maxValue=a,c[e._id]=r},i.prototype._cancelItemScroll=function(e,t){var s=this._requests[t],n=s[e._id];n&&(n.action&&n.action.removeRequest(n),this._requestPool.release(n),delete s[e._id])},i.prototype._checkItemOverlap=function(e,t,n){var h=U(e),_=s(h.targets)?h.targets(e):h.targets,E=h.threshold,F=h.safeZone;if(!_||!_.length)return t&&this._cancelItemScroll(e,1),void(n&&this._cancelItemScroll(e,2));var T=this._dragDirections[e._id],v=T[0],y=T[1];if(!v&&!y)return t&&this._cancelItemScroll(e,1),void(n&&this._cancelItemScroll(e,2));for(var d=this._getItemHandleRect(e,h.handle,Te),l=ze,i=null,r=null,b=!0,w=!0,f=0,c=0,o=null,a=null,u=0,m=0,p=0,x=null,g=-1/0,P=0,k=0,A=null,S=0,M=0,O=null,j=-1/0,z=0,D=0,N=null,L=0,R=0,C=0;C<_.length;C++)i=_[C],b=t&&v&&2!==i.axis,w=n&&y&&1!==i.axis,c=i.priority||0,(!b||c<g)&&(!w||c<j)||(r=He(i.element||i),m=b?Dt(r):-1,p=w?At(r):-1,(m||p)&&((f=se(d,l=Et(r,l)))<=0||(b&&c>=g&&m>0&&(c>g||f>k)&&(a=null,o=ke("number"==typeof i.threshold?i.threshold:E,F,d.width,l.width),5===v?(u=l.right+o.offset-d.right)<=o.value&&X(r)<m&&(a=5):9===v&&(u=d.left-(l.left-o.offset))<=o.value&&X(r)>0&&(a=9),null!==a&&(x=r,g=c,P=o.value,k=f,A=a,S=u,M=m)),w&&c>=j&&p>0&&(c>j||f>D)&&(a=null,o=ke("number"==typeof i.threshold?i.threshold:E,F,d.height,l.height),6===y?(u=l.bottom+o.offset-d.bottom)<=o.value&&Y(r)<p&&(a=6):10===y&&(u=d.top-(l.top-o.offset))<=o.value&&Y(r)>0&&(a=10),null!==a&&(O=r,j=c,z=o.value,D=f,N=a,L=u,R=p)))));t&&(x?this._requestItemScroll(e,1,x,A,P,S,M):this._cancelItemScroll(e,1)),n&&(O?this._requestItemScroll(e,2,O,N,z,L,R):this._cancelItemScroll(e,2))},i.prototype._updateScrollRequest=function(e){for(var m=e.item,i=U(m),u=s(i.targets)?i.targets(m):i.targets,b=u&&u.length||0,v=i.threshold,g=i.safeZone,o=this._getItemHandleRect(m,i.handle,Te),t=ze,a=null,r=null,c=!1,n=null,p=null,d=null,h=null,l=null,f=0;f<b;f++)if((r=He((a=u[f]).element||a))===e.element){if(c=!!(1&e.direction)){if(2===a.axis)continue}else if(1===a.axis)continue;if((h=c?Dt(r):At(r))<=0)break;if(se(o,t=Et(r,t))<=0)break;if(n=ke("number"==typeof a.threshold?a.threshold:v,g,c?o.width:o.height,c?t.width:t.height),(p=9===e.direction?o.left-(t.left-n.offset):5===e.direction?t.right+n.offset-o.right:10===e.direction?o.top-(t.top-n.offset):t.bottom+n.offset-o.bottom)>n.value)break;if(d=c?X(r):Y(r),l=4&e.direction?d>=h:d<=0)break;return e.maxValue=h,e.threshold=n.value,e.distance=p,e.isEnding=!1,!0}return!0===i.smoothStop&&e.speed>0?(null===l&&(l=e.hasReachedEnd()),e.isEnding=!l):e.isEnding=!1,e.isEnding},i.prototype._updateRequests=function(){for(var e,t,n,s,o,i,r,c=this._items,l=this._requests[1],d=this._requests[2],a=0;a<c.length;a++)e=c[a],t=(r=this._requestOverlapCheck[e._id])>0&&this._tickTime-r>this._overlapCheckInterval,o=!0,(n=l[e._id])&&n.isActive&&(o=!this._updateScrollRequest(n))&&(t=!0,this._cancelItemScroll(e,1)),i=!0,(s=d[e._id])&&s.isActive&&(i=!this._updateScrollRequest(s))&&(t=!0,this._cancelItemScroll(e,2)),t&&(this._requestOverlapCheck[e._id]=0,this._checkItemOverlap(e,o,i))},i.prototype._requestAction=function(e,t){for(var s=this._actions,i=1===t,n=null,o=0;o<s.length;o++){if(n=s[o],e.element===n.element){if(i?n.requestX:n.requestY)return void this._cancelItemScroll(e.item,t);break}n=null}n||(n=this._actionPool.pick()),n.element=e.element,n.addRequest(e),e.tick(this._tickDeltaTime),s.push(n)},i.prototype._updateActions=function(){var e,t,n,s,o=this._items,i=this._requests,a=this._actions;for(e=0;e<o.length;e++)t=o[e]._id,n=i[1][t],s=i[2][t],n&&this._requestAction(n,1),s&&this._requestAction(s,2);for(e=0;e<a.length;e++)a[e].computeScrollValues()},i.prototype._applyActions=function(){var e,s,t=this._actions,n=this._items;if(t.length){for(e=0;e<t.length;e++)t[e].scroll(),this._actionPool.release(t[e]);for(t.length=0,e=0;e<n.length;e++)(s=n[e])._drag&&s._drag._prepareScroll();for(e=0;e<n.length;e++)on(n[e])}},i.prototype._updateDragDirection=function(e){var i,a,t=this._dragPositions[e._id],n=this._dragDirections[e._id],s=e._drag._left,o=e._drag._top;t.length&&(i=t[0],a=t[1],n[0]=s>i?5:s<i?9:n[0]||0,n[1]=o>a?6:o<a?10:n[1]||0),t[0]=s,t[1]=o},i.prototype.addItem=function(e){this._isDestroyed||-1===this._items.indexOf(e)&&(this._items.push(e),this._requestOverlapCheck[e._id]=this._tickTime,this._dragDirections[e._id]=[0,0],this._dragPositions[e._id]=[],this._isTicking||this._startTicking())},i.prototype.updateItem=function(e){this._isDestroyed||this._dragDirections[e._id]&&(this._updateDragDirection(e),this._requestOverlapCheck[e._id]||(this._requestOverlapCheck[e._id]=this._tickTime))},i.prototype.removeItem=function(e){if(!this._isDestroyed){var t,n=this._items.indexOf(e);-1!==n&&(t=e._id,this._requests[1][t]&&(this._cancelItemScroll(e,1),delete this._requests[1][t]),this._requests[2][t]&&(this._cancelItemScroll(e,2),delete this._requests[2][t]),delete this._requestOverlapCheck[t],delete this._dragPositions[t],delete this._dragDirections[t],this._items.splice(n,1),this._isTicking&&!this._items.length&&this._stopTicking())}},i.prototype.isItemScrollingX=function(e){var t=this._requests[1][e._id];return!!t&&!!t.isActive},i.prototype.isItemScrollingY=function(e){var t=this._requests[2][e._id];return!!t&&!!t.isActive},i.prototype.isItemScrolling=function(e){return this.isItemScrollingX(e)||this.isItemScrollingY(e)},i.prototype.destroy=function(){if(!this._isDestroyed){for(var t=this._items.slice(0),e=0;e<t.length;e++)this.removeItem(t[e]);this._actions.length=0,this._requestPool.reset(),this._actionPool.reset(),this._isDestroyed=!0}},N=window.Element.prototype,Ge=N.matches||N.matchesSelector||N.webkitMatchesSelector||N.mozMatchesSelector||N.msMatchesSelector||N.oMatchesSelector||function(){return!1};function te(e,t){return Ge.call(e,t)}function d(e,t){t&&(e.classList?e.classList.add(t):te(e,"."+t)||(e.className+=" "+t))}je=[];function Pe(e,t,n){var s="number"==typeof n?n:-1;s<0&&(s=e.length-s+1),e.splice.apply(e,je.concat(s,0,t)),je.length=0}function L(e,t,n){var s=Math.max(0,e.length-1+(n||0));return t>s?s:t<0?Math.max(s+t+1,0):t}function Ve(e,t,n){if(!(e.length<2)){var s=L(e,t),o=L(e,n);s!==o&&e.splice(o,0,e.splice(s,1)[0])}}function $e(e,t,n){if(!(e.length<2)){var i,s=L(e,t),o=L(e,n);s!==o&&(i=e[s],e[s]=e[o],e[o]=i)}}var v=le(document.documentElement.style,"transform")||"transform",sn=/([A-Z])/g,nn=/^(webkit-|moz-|ms-|o-)/,tn=/^(-m-s-)/;function Re(e){var t=e.replace(sn,"-$1").toLowerCase();return t=(t=t.replace(nn,"-$1")).replace(tn,"-ms-")}Le=Re(v);function en(e){var t,n=l(e,Le);return!!n&&"none"!==n&&(t=l(e,"display"),"inline"!==t&&"none"!==t)}function Se(e){for(var n=document,t=e||n;t&&t!==n&&"static"===l(t,"position")&&!en(t);)t=t.parentElement||n;return t}var Ne={},De={},G={};function It(e,t){var s,n=t||{};return n.left=0,n.top=0,e===document?n:(n.left=window.pageXOffset||0,n.top=window.pageYOffset||0,e.self===window.self||(s=e.getBoundingClientRect(),n.left+=s.left,n.top+=s.top,n.left+=u(e,"border-left-width"),n.top+=u(e,"border-top-width")),n)}function R(e,t,n){return G.left=0,G.top=0,e===t||n&&(e=Se(e))===(t=Se(t))||(It(e,Ne),It(t,De),G.left=De.left-Ne.left,G.top=De.top-Ne.top),G}function Me(e){return"auto"===e||"scroll"===e||"overlay"===e}function Jt(e){return Me(l(e,"overflow"))||Me(l(e,"overflow-x"))||Me(l(e,"overflow-y"))}function it(e,t){for(t=t||[];e&&e!==document;)e.getRootNode&&e instanceof DocumentFragment?e=e.getRootNode().host:(Jt(e)&&t.push(e),e=e.parentNode);return t.push(window),t}var H={},Zt=/^matrix3d/,Qt=/([^,]*,){4}/,Gt=/([^,]*,){12}/,Yt=/[^,]*,/;function _(e){if(H.x=0,H.y=0,t=l(e,Le),!t||"none"===t)return H;var t,s=Zt.test(t),n=t.replace(s?Gt:Qt,""),o=n.replace(Yt,"");return H.x=parseFloat(n)||0,H.y=parseFloat(o)||0,H}function r(e,t){t&&(e.classList?e.classList.remove(t):te(e,"."+t)&&(e.className=(" "+e.className+" ").replace(" "+t+" "," ").trim()))}vt=/^(iPad|iPhone|iPod)/.test(window.navigator.platform)||/^Mac/.test(window.navigator.platform)&&window.navigator.maxTouchPoints>1,Ae=!!Lt()&&{passive:!0};function t(n){var i=n._element,a=n.getGrid(),o=a._settings;this._item=n,this._gridId=a._id,this._isDestroyed=!1,this._isMigrating=!1,this._startPredicate=s(o.dragStartPredicate)?o.dragStartPredicate:t.defaultStartPredicate,this._startPredicateState=0,this._startPredicateResult=void 0,this._isSortNeeded=!1,this._sortTimer=void 0,this._blockedSortIndex=null,this._sortX1=0,this._sortX2=0,this._sortY1=0,this._sortY2=0,this._reset(),this._preStartCheck=this._preStartCheck.bind(this),this._preEndCheck=this._preEndCheck.bind(this),this._onScroll=this._onScroll.bind(this),this._prepareStart=this._prepareStart.bind(this),this._applyStart=this._applyStart.bind(this),this._prepareMove=this._prepareMove.bind(this),this._applyMove=this._applyMove.bind(this),this._prepareScroll=this._prepareScroll.bind(this),this._applyScroll=this._applyScroll.bind(this),this._handleSort=this._handleSort.bind(this),this._handleSortDelayed=this._handleSortDelayed.bind(this),this._handle=o.dragHandle&&i.querySelector(o.dragHandle)||i,this._dragger=new e(this._handle,o.dragCssProps),this._dragger.on("start",this._preStartCheck),this._dragger.on("move",this._preStartCheck),this._dragger.on("cancel",this._preEndCheck),this._dragger.on("end",this._preEndCheck)}function yt(e,t){var n,s,o={};if(Array.isArray(t))for(s=0;s<t.length;s++)o[n=t[s]]=l(e,Re(n));else for(n in t)o[n]=l(e,Re(n));return o}t.autoScroller=new i,t.defaultStartPredicate=function(e,t,n){var s,i,o=e._drag;if(t.isFirst&&t.srcEvent.button)return!1;if(!vt&&t.isFirst&&!0===t.srcEvent.isTrusted&&!1===t.srcEvent.defaultPrevented&&!1===t.srcEvent.cancelable)return!1;if(!t.isFinal)return s=o._startPredicateData,s||(i=n||o._getGrid()._settings.dragStartPredicate||{},o._startPredicateData=s={distance:Math.max(i.distance,0)||0,delay:Math.max(i.delay,0)||0}),s.delay&&(s.event=t,s.delayTimer||(s.delayTimer=window.setTimeout(function(){s.delay=0,o._resolveStartPredicate(s.event)&&(o._forceResolveStartPredicate(s.event),o._resetStartPredicate())},s.delay))),o._resolveStartPredicate(t);o._finishStartPredicate(t)},t.defaultSortPredicate=(y={},m={},V={},ie=[],function(e,t){var c=e._drag,h=c._getGrid(),i=t&&"number"==typeof t.threshold?t.threshold:50,_=t&&t.action===g?g:z,j=t&&t.migrateAction===g?g:z,i=Math.min(Math.max(i,1),100);if(y.width=e._width,y.height=e._height,y.left=c._clientX,y.top=c._clientY,n=function(e,t,n){var o,i,a,r,c,d,u,h,f,p,g=null,v=t._settings.dragSort,b=-1;if(!0===v?(ie[0]=t,a=ie):s(v)&&(a=v.call(t,e)),!a||!Array.isArray(a)||!a.length)return g;for(f=0;f<a.length;f++)if(!(i=a[f])._isDestroyed){for(i._updateBoundingRect(),c=Math.max(0,i._left),r=Math.max(0,i._top),u=Math.min(window.innerWidth,i._right),h=Math.min(window.innerHeight,i._bottom),o=i._element.parentNode;o&&o!==document&&o!==document.documentElement&&o!==document.body;)if(o.getRootNode&&o instanceof DocumentFragment)o=o.getRootNode().host;else{if("visible"!==l(o,"overflow")&&(d=o.getBoundingClientRect(),c=Math.max(c,d.left),r=Math.max(r,d.top),u=Math.min(u,d.right),h=Math.min(h,d.bottom)),"fixed"===l(o,"position"))break;o=o.parentNode}c>=u||r>=h||(m.left=c,m.top=r,m.width=u-c,m.height=h-r,(p=se(y,m))>n&&p>b&&(b=p,g=i))}return ie.length=0,g}(e,h,i),!n)return null;var n,o,a,u,f=e.getGrid()!==n,p=0,v=0,r=0,d=-1,b=!1;for(n===h?(y.left=c._gridX+e._marginLeft,y.top=c._gridY+e._marginTop):(n._updateBorders(1,0,1,0),p=n._left+n._borderLeft,v=n._top+n._borderTop),a=0;a<n._items.length;a++)(o=n._items[a])._isActive&&o!==e&&(b=!0,m.width=o._width,m.height=o._height,m.left=o._left+o._marginLeft+p,m.top=o._top+o._marginTop+v,(u=se(y,m))>r&&(d=a,r=u));return f&&r<i&&(d=b?d:0,r=i),r>=i?(V.grid=n,V.index=d,V.action=f?j:_,V):null}),t.prototype.stop=function(){if(this._isActive)if(this._isMigrating)this._finishMigration();else{if(e=this._item,n=e._id,t.autoScroller.removeItem(e),dt(n),bt(n),Ot(n),this._cancelSort(),this._isStarted){this._unbindScrollListeners();var e,n,s=e._element,o=this._getGrid(),i=o._settings.itemDraggingClass;s.parentNode!==o._element&&(o._element.appendChild(s),e._setTranslate(this._gridX,this._gridY),i&&s.clientWidth),r(s,i)}this._reset()}},t.prototype.sort=function(e){var t=this._item;this._isActive&&t._isActive&&this._dragMoveEvent&&(!0===e?this._handleSort():ve(t._id,this._handleSort))},t.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._dragger.destroy(),t.autoScroller.removeItem(this._item),this._isDestroyed=!0)},t.prototype._getGrid=function(){return oe[this._gridId]||null},t.prototype._reset=function(){this._isActive=!1,this._isStarted=!1,this._container=null,this._containingBlock=null,this._dragStartEvent=null,this._dragMoveEvent=null,this._dragPrevMoveEvent=null,this._scrollEvent=null,this._scrollers=[],this._left=0,this._top=0,this._gridX=0,this._gridY=0,this._clientX=0,this._clientY=0,this._scrollDiffX=0,this._scrollDiffY=0,this._moveDiffX=0,this._moveDiffY=0,this._containerDiffX=0,this._containerDiffY=0},t.prototype._bindScrollListeners=function(){var e,n,s=this._getGrid()._element,o=this._container,t=this._scrollers;if(t.length=0,it(this._item._element.parentNode,t),o!==s)for(it(s,n=[]),e=0;e<n.length;e++)t.indexOf(n[e])<0&&t.push(n[e]);for(e=0;e<t.length;e++)t[e].addEventListener("scroll",this._onScroll,Ae)},t.prototype._unbindScrollListeners=function(){var e,t=this._scrollers;for(e=0;e<t.length;e++)t[e].removeEventListener("scroll",this._onScroll,Ae);t.length=0},t.prototype._resolveStartPredicate=function(e){var t=this._startPredicateData;if(!(e.distance<t.distance||t.delay))return this._resetStartPredicate(),!0},t.prototype._forceResolveStartPredicate=function(e){this._isDestroyed||1!==this._startPredicateState||(this._startPredicateState=2,this._onStart(e))},t.prototype._finishStartPredicate=function(e){var t=this._item._element,n=Math.abs(e.deltaX)<2&&Math.abs(e.deltaY)<2&&e.deltaTime<200;this._resetStartPredicate(),n&&function(e){if("a"!==e.tagName.toLowerCase())return;var t,n=e.getAttribute("href");if(!n)return;t=e.getAttribute("target"),t&&"_self"!==t?window.open(n,t):window.location.href=n}(t)},t.prototype._resetHeuristics=function(e,t){this._blockedSortIndex=null,this._sortX1=this._sortX2=e,this._sortY1=this._sortY2=t},t.prototype._checkHeuristics=function(e,t){if(s=this._getGrid()._settings.dragSortHeuristics,n=s.minDragDistance,n<=0)return this._blockedSortIndex=null,!0;var n,s,o=e-this._sortX2,i=t-this._sortY2,a=n>3&&s.minBounceBackAngle>0;if(a||(this._blockedSortIndex=null),Math.abs(o)>n||Math.abs(i)>n){if(a){var r=Math.atan2(o,i),c=Math.atan2(this._sortX2-this._sortX1,this._sortY2-this._sortY1),l=Math.atan2(Math.sin(r-c),Math.cos(r-c));Math.abs(l)>s.minBounceBackAngle&&(this._blockedSortIndex=null)}return this._sortX1=this._sortX2,this._sortY1=this._sortY2,this._sortX2=e,this._sortY2=t,!0}return!1},t.prototype._resetStartPredicate=function(){var e=this._startPredicateData;e&&(e.delayTimer&&(e.delayTimer=window.clearTimeout(e.delayTimer)),this._startPredicateData=null)},t.prototype._handleSort=function(){if(this._isActive){var n,s,e=this._getGrid()._settings;if(!e.dragSort||!e.dragAutoScroll.sortDuringScroll&&t.autoScroller.isItemScrolling(this._item))return this._sortX1=this._sortX2=this._gridX,this._sortY1=this._sortY2=this._gridY,this._isSortNeeded=!0,void(void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)));s=this._checkHeuristics(this._gridX,this._gridY),(this._isSortNeeded||s)&&(n=e.dragSortHeuristics.sortInterval,n<=0||this._isSortNeeded?(this._isSortNeeded=!1,void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)),this._checkOverlap()):void 0===this._sortTimer&&(this._sortTimer=window.setTimeout(this._handleSortDelayed,n)))}},t.prototype._handleSortDelayed=function(){this._isSortNeeded=!0,this._sortTimer=void 0,ve(this._item._id,this._handleSort)},t.prototype._cancelSort=function(){var e;this._isSortNeeded=!1,void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)),e=this._item._id,o.remove(1,et+e)},t.prototype._finishSort=function(){var e=this._getGrid()._settings.dragSort&&(this._isSortNeeded||void 0!==this._sortTimer);this._cancelSort(),e&&this._checkOverlap()},t.prototype._checkOverlap=function(){if(this._isActive){var e,n,i,a,r,c,l,d,o=this._item,u=this._getGrid()._settings;(r=s(u.dragSortPredicate)?u.dragSortPredicate(o,this._dragMoveEvent):t.defaultSortPredicate(o,u.dragSortPredicate))&&"number"==typeof r.index&&(l=r.action===g?g:z,d=(e=o.getGrid())!==(n=r.grid||e),a=e._items.indexOf(o),i=L(n._items,r.index,d&&l===z?1:0),(d||i!==this._blockedSortIndex)&&(d?(this._blockedSortIndex=null,c=n._items[i],e._hasListeners(E)&&e._emit(E,{item:o,fromGrid:e,fromIndex:a,toGrid:n,toIndex:i}),n._hasListeners(he)&&n._emit(he,{item:o,fromGrid:e,fromIndex:a,toGrid:n,toIndex:i}),o._gridId=n._id,this._isMigrating=o._gridId!==this._gridId,e._items.splice(a,1),Pe(n._items,o,i),o._sortData=null,e._hasListeners(fe)&&e._emit(fe,{item:o,fromGrid:e,fromIndex:a,toGrid:n,toIndex:i}),n._hasListeners(me)&&n._emit(me,{item:o,fromGrid:e,fromIndex:a,toGrid:n,toIndex:i}),l===g&&c&&c.isActive()&&n._items.indexOf(c)>-1&&n.send(c,e,a,{appendTo:this._container||document.body,layoutSender:!1,layoutReceiver:!1}),e.layout(),n.layout()):a!==i&&(this._blockedSortIndex=a,(l===g?$e:Ve)(e._items,a,i),e._hasListeners(pe)&&e._emit(pe,{item:o,fromIndex:a,toIndex:i,action:l}),e.layout())))}},t.prototype._finishMigration=function(){var o,c,e=this._item,h=e._dragRelease,s=e._element,l=e._isActive,f=e.getGrid(),m=f._element,n=f._settings,i=n.dragContainer||m,a=this._getGrid()._settings,u=s.parentNode,p=l?a.itemVisibleClass:a.itemHiddenClass,g=l?n.itemVisibleClass:n.itemHiddenClass;this._isMigrating=!1,this.destroy(),a.itemClass!==n.itemClass&&(r(s,a.itemClass),d(s,n.itemClass)),p!==g&&(r(s,p),d(s,g)),i!==u&&(i.appendChild(s),o=R(u,i,!0),(c=_(s)).x-=o.left,c.y-=o.top),e._refreshDimensions(),o=R(i,m,!0),h._containerDiffX=o.left,h._containerDiffY=o.top,e._drag=n.dragEnabled?new t(e):null,i!==u&&e._setTranslate(c.x,c.y),e._visibility.setStyles(l?n.visibleStyles:n.hiddenStyles),h.start()},t.prototype._preStartCheck=function(e){0===this._startPredicateState&&(this._startPredicateState=1),1===this._startPredicateState?(this._startPredicateResult=this._startPredicate(this._item,e),!0===this._startPredicateResult?(this._startPredicateState=2,this._onStart(e)):!1===this._startPredicateResult&&(this._resetStartPredicate(e),this._dragger._reset(),this._startPredicateState=0)):2===this._startPredicateState&&this._isActive&&this._onMove(e)},t.prototype._preEndCheck=function(e){var t=2===this._startPredicateState;this._startPredicate(this._item,e),this._startPredicateState=0,t&&this._isActive&&(this._isStarted?this._onEnd(e):this.stop())},t.prototype._onStart=function(e){var n,i,a,s=this._item;s._isActive&&(this._isActive=!0,this._dragStartEvent=e,t.autoScroller.addItem(s),n=s._id,i=this._prepareStart,a=this._applyStart,o.add(0,ft+n,i),o.add(2,Ct+n,a))},t.prototype._prepareStart=function(){if(this._isActive&&(e=this._item,e._isActive)){var e,s,o=e._element,i=this._getGrid(),l=i._settings,t=i._element,n=l.dragContainer||t,a=Se(n),r=_(o),c=o.getBoundingClientRect(),d=n!==t;this._container=n,this._containingBlock=a,this._clientX=c.left,this._clientY=c.top,this._left=this._gridX=r.x,this._top=this._gridY=r.y,this._scrollDiffX=this._scrollDiffY=0,this._moveDiffX=this._moveDiffY=0,this._resetHeuristics(this._gridX,this._gridY),d&&(s=R(a,t),this._containerDiffX=s.left,this._containerDiffY=s.top)}},t.prototype._applyStart=function(){if(this._isActive&&(e=this._item,e._isActive)){var e,n=this._getGrid(),s=e._element,o=e._dragRelease,t=e._migrate,i=this._container!==n._element;e.isPositioning()&&e._layout.stop(!0,this._left,this._top),t._isActive&&(this._left-=t._containerDiffX,this._top-=t._containerDiffY,this._gridX-=t._containerDiffX,this._gridY-=t._containerDiffY,t.stop(!0,this._left,this._top)),e.isReleasing()&&o._reset(),n._settings.dragPlaceholder.enabled&&e._dragPlaceholder.create(),this._isStarted=!0,n._emit("dragInit",e,this._dragStartEvent),i&&(s.parentNode===this._container?(this._gridX-=this._containerDiffX,this._gridY-=this._containerDiffY):(this._left+=this._containerDiffX,this._top+=this._containerDiffY,this._container.appendChild(s),e._setTranslate(this._left,this._top))),d(s,n._settings.itemDraggingClass),this._bindScrollListeners(),n._emit("dragStart",e,this._dragStartEvent)}},t.prototype._onMove=function(e){var t,s,i,n=this._item;n._isActive?(this._dragMoveEvent=e,t=n._id,s=this._prepareMove,i=this._applyMove,o.add(0,ht+t,s),o.add(2,ut+t,i),ve(n._id,this._handleSort)):this.stop()},t.prototype._prepareMove=function(){if(this._isActive&&this._item._isActive){var e,t,s=this._getGrid()._settings.dragAxis,n=this._dragMoveEvent,o=this._dragPrevMoveEvent||this._dragStartEvent||n;"y"!==s&&(e=n.clientX-o.clientX,this._left=this._left-this._moveDiffX+e,this._gridX=this._gridX-this._moveDiffX+e,this._clientX=this._clientX-this._moveDiffX+e,this._moveDiffX=e),"x"!==s&&(t=n.clientY-o.clientY,this._top=this._top-this._moveDiffY+t,this._gridY=this._gridY-this._moveDiffY+t,this._clientY=this._clientY-this._moveDiffY+t,this._moveDiffY=t),this._dragPrevMoveEvent=n}},t.prototype._applyMove=function(){if(this._isActive){var e=this._item;e._isActive&&(this._moveDiffX=this._moveDiffY=0,e._setTranslate(this._left,this._top),this._getGrid()._emit("dragMove",e,this._dragMoveEvent),t.autoScroller.updateItem(e))}},t.prototype._onScroll=function(e){var t,s,i,n=this._item;n._isActive?(this._scrollEvent=e,t=n._id,s=this._prepareScroll,i=this._applyScroll,o.add(0,at+t,s),o.add(2,nt+t,i),ve(n._id,this._handleSort)):this.stop()},t.prototype._prepareScroll=function(){if(this._isActive&&(e=this._item,e._isActive)){var e,t,n,s,a=e._element,o=this._getGrid()._element,i=a.getBoundingClientRect();this._container!==o&&(t=R(this._containingBlock,o),this._containerDiffX=t.left,this._containerDiffY=t.top),n=this._clientX-this._moveDiffX-i.left,this._left=this._left-this._scrollDiffX+n,this._scrollDiffX=n,s=this._clientY-this._moveDiffY-i.top,this._top=this._top-this._scrollDiffY+s,this._scrollDiffY=s,this._gridX=this._left-this._containerDiffX,this._gridY=this._top-this._containerDiffY}},t.prototype._applyScroll=function(){if(this._isActive){var e=this._item;e._isActive&&(this._scrollDiffX=this._scrollDiffY=0,e._setTranslate(this._left,this._top),this._getGrid()._emit("dragScroll",e,this._scrollEvent))}},t.prototype._onEnd=function(e){var n=this._item,i=n._element,o=this._getGrid(),a=o._settings,s=n._dragRelease;n._isActive?(dt(n._id),bt(n._id),Ot(n._id),this._finishSort(),this._unbindScrollListeners(),s._containerDiffX=this._containerDiffX,s._containerDiffY=this._containerDiffY,this._reset(),r(i,a.itemDraggingClass),t.autoScroller.removeItem(n),o._emit("dragEnd",n,e),this._isMigrating?this._finishMigration():s.start()):this.stop()},_t=/^(webkit|moz|ms|o|Webkit|Moz|MS|O)(?=[A-Z])/,Ee={};function qt(e){var t=Ee[e];return t||((t=e.replace(_t,""))!==e&&(t=t[0].toLowerCase()+t.slice(1)),Ee[e]=t,t)}function I(e,t){for(var n in t)e.style[n]=t[n]}kt=!!Element&&!!s(Element.prototype.animate),Oe=!!(Element&&(Fe=Element.prototype.animate,ae=window.Symbol,Fe&&s(ae)&&s(ae.toString)&&ae(Fe).toString().indexOf("[native code]")>-1));function b(e){this._element=e,this._animation=null,this._duration=0,this._easing="",this._callback=null,this._props=[],this._values=[],this._isDestroyed=!1,this._onFinish=this._onFinish.bind(this)}function Mt(e,t){var n,s={};for(n in e)s[t?n:qt(n)]=e[n];return s}function M(e,t){return"translateX("+e+"px) translateY("+t+"px)"}function c(e){this._item=e,this._animation=new b,this._element=null,this._className="",this._didMigrate=!1,this._resetAfterLayout=!1,this._left=0,this._top=0,this._transX=0,this._transY=0,this._nextTransX=0,this._nextTransY=0,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this),this._updateDimensions=this._updateDimensions.bind(this),this._onLayoutStart=this._onLayoutStart.bind(this),this._onLayoutEnd=this._onLayoutEnd.bind(this),this._onReleaseEnd=this._onReleaseEnd.bind(this),this._onMigrate=this._onMigrate.bind(this),this._onHide=this._onHide.bind(this)}function S(e){this._item=e,this._isActive=!1,this._isDestroyed=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0}b.prototype.start=function(e,t,n){if(!this._isDestroyed){if(r=this._element,o=n||{},!kt)return I(r,t),this._callback=s(o.onFinish)?o.onFinish:null,void this._onFinish();var o,i,r,l,f,d=this._animation,c=this._props,u=this._values,h=o.duration||300,m=o.easing||"ease",a=!1;if(d&&(l=0,h===this._duration&&m===this._easing||(a=!0),!a)){for(i in t)if(++l,-1===(f=c.indexOf(i))||t[i]!==u[f]){a=!0;break}l!==c.length&&(a=!0)}if(a&&d.cancel(),this._callback=s(o.onFinish)?o.onFinish:null,!d||a){for(i in c.length=u.length=0,t)c.push(i),u.push(t[i]);this._duration=h,this._easing=m,this._animation=r.animate([Mt(e,Oe),Mt(t,Oe)],{duration:h,easing:m}),this._animation.onfinish=this._onFinish,I(r,t)}}},b.prototype.stop=function(){!this._isDestroyed&&this._animation&&(this._animation.cancel(),this._animation=this._callback=null,this._props.length=this._values.length=0)},b.prototype.getCurrentStyles=function(){return yt(element,currentProps)},b.prototype.isAnimating=function(){return!!this._animation},b.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._element=null,this._isDestroyed=!0)},b.prototype._onFinish=function(){var e=this._callback;this._animation=this._callback=null,this._props.length=this._values.length=0,e&&e()},c.prototype._updateDimensions=function(){this.isActive()&&I(this._element,{width:this._item._width+"px",height:this._item._height+"px"})},c.prototype._onLayoutStart=function(e,t){if(n=this._item,-1!==e.indexOf(n)){{var n,s=n._left,i=n._top,h=this._left,m=this._top;if(this._left=s,this._top=i,t||this._didMigrate||h!==s||m!==i){var a,l,d,u=s+n._marginLeft,r=i+n._marginTop,c=n.getGrid();if(!(!t&&c._settings.layoutDuration>0)||this._didMigrate)return Qe(n._id),this._element.style[v]=M(u,r),this._animation.stop(),void(this._didMigrate&&(c.getElement().appendChild(this._element),this._didMigrate=!1));this._nextTransX=u,this._nextTransY=r,a=n._id,l=this._setupAnimation,d=this._startAnimation,o.add(0,We+a,l),o.add(2,Be+a,d)}}}else this.reset()},c.prototype._setupAnimation=function(){if(this.isActive()){var e=_(this._element);this._transX=e.x,this._transY=e.y}},c.prototype._startAnimation=function(){if(this.isActive()){var e=this._animation,s=this._transX,o=this._transY,t=this._nextTransX,n=this._nextTransY;if(s!==t||o!==n){var i=this._item.getGrid()._settings,a={},r={};a[v]=M(s,o),r[v]=M(t,n),e.start(a,r,{duration:i.layoutDuration,easing:i.layoutEasing,onFinish:this._onLayoutEnd})}else e.isAnimating()&&(this._element.style[v]=M(t,n),e.stop())}},c.prototype._onLayoutEnd=function(){this._resetAfterLayout&&this.reset()},c.prototype._onReleaseEnd=function(e){if(e._id===this._item._id){if(!this._animation.isAnimating())return void this.reset();this._resetAfterLayout=!0}},c.prototype._onMigrate=function(e){if(e.item===this._item){var t=this._item.getGrid(),n=e.toGrid;t.off(W,this._onReleaseEnd),t.off(A,this._onLayoutStart),t.off(E,this._onMigrate),t.off(K,this._onHide),n.on(W,this._onReleaseEnd),n.on(A,this._onLayoutStart),n.on(E,this._onMigrate),n.on(K,this._onHide),this._didMigrate=!0}},c.prototype._onHide=function(e){e.indexOf(this._item)>-1&&this.reset()},c.prototype.create=function(){if(this.isActive())this._resetAfterLayout=!1;else{var t,e=this._item,n=e.getGrid(),o=n._settings,i=this._animation;this._left=e._left,this._top=e._top,t=s(o.dragPlaceholder.createElement)?o.dragPlaceholder.createElement(e):document.createElement("div"),this._element=t,i._element=t,this._className=o.itemPlaceholderClass||"",this._className&&d(t,this._className),I(t,{position:"absolute",left:"0px",top:"0px",width:e._width+"px",height:e._height+"px"}),t.style[v]=M(e._left+e._marginLeft,e._top+e._marginTop),n.on(A,this._onLayoutStart),n.on(W,this._onReleaseEnd),n.on(E,this._onMigrate),n.on(K,this._onHide),s(o.dragPlaceholder.onCreate)&&o.dragPlaceholder.onCreate(e,t),n.getElement().appendChild(t)}},c.prototype.reset=function(){if(this.isActive()){var i,t=this._element,n=this._item,e=n.getGrid(),a=e._settings,c=this._animation;this._resetAfterLayout=!1,Qe(n._id),i=n._id,o.remove(2,Ie+i),c.stop(),c._element=null,e.off(W,this._onReleaseEnd),e.off(A,this._onLayoutStart),e.off(E,this._onMigrate),e.off(K,this._onHide),this._className&&(r(t,this._className),this._className=""),t.parentNode.removeChild(t),this._element=null,s(a.dragPlaceholder.onRemove)&&a.dragPlaceholder.onRemove(n,t)}},c.prototype.isActive=function(){return!!this._element},c.prototype.getElement=function(){return this._element},c.prototype.updateDimensions=function(){var e,t;this.isActive()&&(e=this._item._id,t=this._updateDimensions,o.add(2,Ie+e,t))},c.prototype.destroy=function(){this.reset(),this._animation.destroy(),this._item=this._animation=null},S.prototype.start=function(){if(!this._isDestroyed&&!this._isActive){var e=this._item,t=e.getGrid(),n=t._settings;this._isActive=!0,d(e._element,n.itemReleasingClass),n.dragRelease.useDragContainer||this._placeToGrid(),t._emit("dragReleaseStart",e),t._nextLayoutData||e._layout.start(!1)}},S.prototype.stop=function(e,t,n){if(!this._isDestroyed&&this._isActive){var o,s=this._item,i=s.getGrid();e||void 0!==t&&void 0!==n||(t=s._left,n=s._top),o=this._placeToGrid(t,n),this._reset(o),e||i._emit(W,s)}},S.prototype.isJustReleased=function(){return this._isActive&&!1===this._isPositioningStarted},S.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)},S.prototype._placeToGrid=function(e,t){if(!this._isDestroyed){var o,n=this._item,s=n._element,i=n.getGrid()._element,a=!1;return s.parentNode!==i&&((void 0===e||void 0===t)&&(o=_(s),e=o.x-this._containerDiffX,t=o.y-this._containerDiffY),i.appendChild(s),n._setTranslate(e,t),a=!0),this._containerDiffX=0,this._containerDiffY=0,a}},S.prototype._reset=function(e){if(!this._isDestroyed){var t=this._item,n=t.getGrid()._settings.itemReleasingClass;this._isActive=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0,n&&(e&&t._element.clientWidth,r(t._element,n))}};function O(e){var t=e._element,n=t.style;this._item=e,this._isActive=!1,this._isDestroyed=!1,this._isInterrupted=!1,this._currentStyles={},this._targetStyles={},this._nextLeft=0,this._nextTop=0,this._offsetLeft=0,this._offsetTop=0,this._skipNextAnimation=!1,this._animOptions={onFinish:this._finish.bind(this),duration:0,easing:0},n.left="0px",n.top="0px",e._setTranslate(0,0),this._animation=new b(t),this._queue="layout-"+e._id,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this)}function J(e){this._item=e,this._isActive=!1,this._isDestroyed=!1,this._container=!1,this._containerDiffX=0,this._containerDiffY=0}function f(e){var t=e._isActive,s=e._element,o=s.children[0],n=e.getGrid()._settings;if(!o)throw new Error("No valid child element found within item element.");this._item=e,this._isDestroyed=!1,this._isHidden=!t,this._isHiding=!1,this._isShowing=!1,this._childElement=o,this._currentStyleProps=[],this._animation=new b(o),this._queue="visibility-"+e._id,this._finishShow=this._finishShow.bind(this),this._finishHide=this._finishHide.bind(this),s.style.display=t?"":"none",d(s,t?n.itemVisibleClass:n.itemHiddenClass),this.setStyles(t?n.visibleStyles:n.hiddenStyles)}O.prototype.start=function(e,t){if(!this._isDestroyed){var a,c,u,n=this._item,l=n._dragRelease,i=n.getGrid()._settings,d=this._isActive,r=l.isJustReleased(),h=r?i.dragRelease.duration:i.layoutDuration,m=r?i.dragRelease.easing:i.layoutEasing,f=!e&&!this._skipNextAnimation&&h>0;if(d&&(tt(n._id),n._emitter.burst(this._queue,!0,n)),r&&(l._isPositioningStarted=!0),s(t)&&n._emitter.on(this._queue,t),this._skipNextAnimation=!1,!f)return this._updateOffsets(),n._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),void this._finish();this._animation.isAnimating()&&(this._animation._animation.onfinish=null),this._isActive=!0,this._animOptions.easing=m,this._animOptions.duration=h,this._isInterrupted=d,a=n._id,u=this._setupAnimation,c=this._startAnimation,o.add(0,xt+a,u),o.add(2,jt+a,c)}},O.prototype.stop=function(e,t,n){if(!this._isDestroyed&&this._isActive){var o,s=this._item;(tt(s._id),this._animation.isAnimating())&&((void 0===t||void 0===n)&&(o=_(s._element),t=o.x,n=o.y),s._setTranslate(t,n),this._animation.stop()),r(s._element,s.getGrid()._settings.itemPositioningClass),this._isActive=!1,e&&s._emitter.burst(this._queue,!0,s)}},O.prototype.destroy=function(){if(!this._isDestroyed){var e=this._item._element.style;this.stop(!0,0,0),this._item._emitter.clear(this._queue),this._animation.destroy(),e[v]="",e.left="",e.top="",this._item=null,this._currentStyles=null,this._targetStyles=null,this._animOptions=null,this._isDestroyed=!0}},O.prototype._updateOffsets=function(){if(!this._isDestroyed){var n=this._item,e=n._migrate,t=n._dragRelease;this._offsetLeft=t._isActive?t._containerDiffX:e._isActive?e._containerDiffX:0,this._offsetTop=t._isActive?t._containerDiffY:e._isActive?e._containerDiffY:0,this._nextLeft=this._item._left+this._offsetLeft,this._nextTop=this._item._top+this._offsetTop}},O.prototype._finish=function(){if(!this._isDestroyed){var e=this._item,t=e._migrate,n=e._dragRelease;e._tX=this._nextLeft,e._tY=this._nextTop,this._isActive&&(this._isActive=!1,r(e._element,e.getGrid()._settings.itemPositioningClass)),n._isActive&&n.stop(),t._isActive&&t.stop(),e._emitter.burst(this._queue,!1,e)}},O.prototype._setupAnimation=function(){var t,e=this._item;(void 0===e._tX||void 0===e._tY)&&(t=_(e._element),e._tX=t.x,e._tY=t.y)},O.prototype._startAnimation=function(){var t,n,e=this._item,s=e.getGrid()._settings,o=this._animOptions.duration<=0;if(this._updateOffsets(),t=Math.abs(e._left-(e._tX-this._offsetLeft)),n=Math.abs(e._top-(e._tY-this._offsetTop)),o||t<2&&n<2)return(t||n||this._isInterrupted)&&e._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),void this._finish();this._isInterrupted||d(e._element,s.itemPositioningClass),this._currentStyles[v]=M(e._tX,e._tY),this._targetStyles[v]=M(this._nextLeft,this._nextTop),e._tX=e._tY=void 0,this._animation.start(this._currentStyles,this._targetStyles,this._animOptions)},J.prototype.start=function(e,n,s){if(!this._isDestroyed){var c,l,h,m,v,b,O,x,k,A,o=this._item,a=o._element,j=o.isActive(),y=o.isVisible(),i=o.getGrid(),g=i._settings,u=e._settings,C=e._element,w=e._items,f=i._items.indexOf(o),p=s||document.body;if("number"==typeof n)h=L(w,n,1);else{if(!(x=e.getItem(n)))return;h=w.indexOf(x)}(o.isPositioning()||this._isActive||o.isReleasing())&&(c=(m=_(a)).x,l=m.y),o.isPositioning()&&o._layout.stop(!0,c,l),this._isActive&&(c-=this._containerDiffX,l-=this._containerDiffY,this.stop(!0,c,l)),o.isReleasing()&&(c-=o._dragRelease._containerDiffX,l-=o._dragRelease._containerDiffY,o._dragRelease.stop(!0,c,l)),o._visibility.stop(!0),o._drag&&o._drag.destroy(),i._hasListeners(E)&&i._emit(E,{item:o,fromGrid:i,fromIndex:f,toGrid:e,toIndex:h}),e._hasListeners(he)&&e._emit(he,{item:o,fromGrid:i,fromIndex:f,toGrid:e,toIndex:h}),g.itemClass!==u.itemClass&&(r(a,g.itemClass),d(a,u.itemClass)),(k=y?g.itemVisibleClass:g.itemHiddenClass)!==(O=y?u.itemVisibleClass:u.itemHiddenClass)&&(r(a,k),d(a,O)),i._items.splice(f,1),Pe(w,o,h),o._gridId=e._id,j?p!==(A=a.parentNode)&&(p.appendChild(a),b=R(p,A,!0),m||(c=(m=_(a)).x,l=m.y),o._setTranslate(c+b.left,l+b.top)):C.appendChild(a),o._visibility.setStyles(y?u.visibleStyles:u.hiddenStyles),j&&(v=R(p,C,!0)),o._refreshDimensions(),o._sortData=null,o._drag=u.dragEnabled?new t(o):null,j?(this._isActive=!0,this._container=p,this._containerDiffX=v.left,this._containerDiffY=v.top):(this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0),i._hasListeners(fe)&&i._emit(fe,{item:o,fromGrid:i,fromIndex:f,toGrid:e,toIndex:h}),e._hasListeners(me)&&e._emit(me,{item:o,fromGrid:i,fromIndex:f,toGrid:e,toIndex:h})}},J.prototype.stop=function(e,t,n){if(!this._isDestroyed&&this._isActive){var o,s=this._item,i=s._element,a=s.getGrid()._element;this._container!==a&&(void 0!==t&&void 0!==n||(e?(t=(o=_(i)).x-this._containerDiffX,n=o.y-this._containerDiffY):(t=s._left,n=s._top)),a.appendChild(i),s._setTranslate(t,n)),this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0}},J.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)},f.prototype.show=function(e,t){if(!this._isDestroyed){var n=this._item,i=n._element,o=s(t)?t:null,a=n.getGrid()._settings;this._isShowing||this._isHidden?!this._isShowing||e?(this._isShowing||(n._emitter.burst(this._queue,!0,n),r(i,a.itemHiddenClass),d(i,a.itemVisibleClass),this._isHiding||(i.style.display="")),o&&n._emitter.on(this._queue,o),this._isShowing=!0,this._isHiding=this._isHidden=!1,this._startAnimation(!0,e,this._finishShow)):o&&n._emitter.on(this._queue,o):o&&o(!1,n)}},f.prototype.hide=function(e,t){if(!this._isDestroyed){var n=this._item,i=n._element,o=s(t)?t:null,a=n.getGrid()._settings;this._isHiding||!this._isHidden?!this._isHiding||e?(this._isHiding||(n._emitter.burst(this._queue,!0,n),d(i,a.itemHiddenClass),r(i,a.itemVisibleClass)),o&&n._emitter.on(this._queue,o),this._isHidden=this._isHiding=!0,this._isShowing=!1,this._startAnimation(!1,e,this._finishHide)):o&&n._emitter.on(this._queue,o):o&&o(!1,n)}},f.prototype.stop=function(e){if(!this._isDestroyed&&(this._isHiding||this._isShowing)){var t=this._item;st(t._id),this._animation.stop(),e&&t._emitter.burst(this._queue,!0,t)}},f.prototype.setStyles=function(e){var t,n=this._childElement,s=this._currentStyleProps;for(t in this._removeCurrentStyles(),e)s.push(t),n.style[t]=e[t]},f.prototype.destroy=function(){if(!this._isDestroyed){var e=this._item,t=e._element,n=e.getGrid()._settings;this.stop(!0),e._emitter.clear(this._queue),this._animation.destroy(),this._removeCurrentStyles(),r(t,n.itemVisibleClass),r(t,n.itemHiddenClass),t.style.display="",this._isHiding=this._isShowing=!1,this._isDestroyed=this._isHidden=!0}},f.prototype._startAnimation=function(e,t,n){if(!this._isDestroyed){var c,l,h,m,r=this._item,i=this._animation,u=this._childElement,s=r.getGrid()._settings,a=e?s.visibleStyles:s.hiddenStyles,d=e?s.showDuration:s.hideDuration,f=e?s.showEasing:s.hideEasing,p=t||d<=0;if(a){if(st(r._id),p)return I(u,a),i.stop(),void(n&&n());i.isAnimating()&&(i._animation.onfinish=null),c=r._id,h=function(){l=yt(u,a)},m=function(){i.start(l,a,{duration:d,easing:f,onFinish:n})},o.add(0,gt+c,h),o.add(2,pt+c,m)}else n&&n()}},f.prototype._finishShow=function(){this._isHidden||(this._isShowing=!1,this._item._emitter.burst(this._queue,!1,this._item))},f.prototype._finishHide=function(){if(this._isHidden){var e=this._item;this._isHiding=!1,e._layout.stop(!0,0,0),e._element.style.display="none",e._emitter.burst(this._queue,!1,e)}},f.prototype._removeCurrentStyles=function(){for(var n=this._childElement,e=this._currentStyleProps,t=0;t<e.length;t++)n.style[e[t]]="";e.length=0},Rt=0;function Pt(){return++Rt}function a(e,n,s){var o=e._settings;if(T){if(T.has(n))throw new Error("You can only create one Muuri Item per element!");T.set(n,this)}this._id=Pt(),this._gridId=e._id,this._element=n,this._isDestroyed=!1,this._left=0,this._top=0,this._width=0,this._height=0,this._marginLeft=0,this._marginRight=0,this._marginTop=0,this._marginBottom=0,this._tX=void 0,this._tY=void 0,this._sortData=null,this._emitter=new h,n.parentNode!==e._element&&e._element.appendChild(n),d(n,o.itemClass),"boolean"!=typeof s&&(s="none"!==l(n,"display")),this._isActive=s,this._visibility=new f(this),this._layout=new O(this),this._migrate=new J(this),this._drag=o.dragEnabled?new t(this):null,this._dragRelease=new S(this),this._dragPlaceholder=new c(this)}function mt(e){var s,i,a,r,c,d,t=.001,o=.5;function l(e){return((1e3*e+.5<<0)/10<<0)/100}function n(){this.currentRects=[],this.nextRects=[],this.rectTarget={},this.rectStore=[],this.slotSizes=[],this.rectId=0,this.slotIndex=-1,this.slotData={left:0,top:0,width:0,height:0},this.sortRectsLeftTop=this.sortRectsLeftTop.bind(this),this.sortRectsTopLeft=this.sortRectsTopLeft.bind(this)}return(n.prototype.computeLayout=function(e,t){var n,s,i,r,c,d,a=e.items,o=e.slots,p=!!(1&t),u=!!(2&t),h=!!(4&t),m=!!(8&t),g=!!(16&t),f="number"==typeof a[0];if(!a.length)return e;for(d=f?2:1,n=0;n<a.length;n+=d)f?(r=a[n],c=a[n+1]):(r=(i=a[n])._width+i._marginLeft+i._marginRight,c=i._height+i._marginTop+i._marginBottom),g&&(r=l(r),c=l(c)),s=this.computeNextSlot(e,r,c,p,u),u?s.left+s.width>e.width&&(e.width=s.left+s.width):s.top+s.height>e.height&&(e.height=s.top+s.height),o[++this.slotIndex]=s.left,o[++this.slotIndex]=s.top,(h||m)&&this.slotSizes.push(s.width,s.height);if(h)for(n=0;n<o.length;n+=2)o[n]=e.width-(o[n]+this.slotSizes[n]);if(m)for(n=1;n<o.length;n+=2)o[n]=e.height-(o[n]+this.slotSizes[n]);return this.slotSizes.length=0,this.currentRects.length=0,this.nextRects.length=0,this.rectStore.length=0,this.rectId=0,this.slotIndex=-1,e},n.prototype.computeNextSlot=function(e,n,s,i,a){var c,d,u,m,f,r=this.slotData,h=this.currentRects,l=this.nextRects,p=!1;for(l.length=0,r.left=null,r.top=null,r.width=n,r.height=s,d=0;d<h.length;d++)if((u=h[d])&&(c=this.getRect(u),r.width<=c.width+t&&r.height<=c.height+t)){r.left=c.left,r.top=c.top;break}if(null===r.left&&(a?(r.left=e.width,r.top=0):(r.left=0,r.top=e.height),i||(p=!0)),!a&&r.top+r.height>e.height+t&&(r.left>o&&l.push(this.addRect(0,e.height,r.left,1/0)),r.left+r.width<e.width-o&&l.push(this.addRect(r.left+r.width,e.height,e.width-r.left-r.width,1/0)),e.height=r.top+r.height),a&&r.left+r.width>e.width+t&&(r.top>o&&l.push(this.addRect(e.width,0,1/0,r.top)),r.top+r.height<e.height-o&&l.push(this.addRect(e.width,r.top+r.height,1/0,e.height-r.top-r.height)),e.width=r.left+r.width),!p)for(i&&(d=0);d<h.length;d++)if(u=h[d])for(c=this.getRect(u),f=this.splitRect(c,r),m=0;m<f.length;m++)u=f[m],c=this.getRect(u),(a?c.left+t<e.width-t:c.top+t<e.height-t)&&l.push(u);return l.length>1&&this.purgeRects(l).sort(a?this.sortRectsLeftTop:this.sortRectsTopLeft),this.currentRects=l,this.nextRects=h,r},n.prototype.addRect=function(e,t,n,s){var o=++this.rectId;return this.rectStore[o]=e||0,this.rectStore[++this.rectId]=t||0,this.rectStore[++this.rectId]=n||0,this.rectStore[++this.rectId]=s||0,o},n.prototype.getRect=function(e,t){return t||(t=this.rectTarget),t.left=this.rectStore[e]||0,t.top=this.rectStore[++e]||0,t.width=this.rectStore[++e]||0,t.height=this.rectStore[++e]||0,t},n.prototype.splitRect=(s=[],i=0,a=0,function(e,n){return s.length=0,e.left+e.width<=n.left+t||n.left+n.width<=e.left+t||e.top+e.height<=n.top+t||n.top+n.height<=e.top+t?(s.push(this.addRect(e.left,e.top,e.width,e.height)),s):((i=n.left-e.left)>=o&&s.push(this.addRect(e.left,e.top,i,e.height)),(i=e.left+e.width-(n.left+n.width))>=o&&s.push(this.addRect(n.left+n.width,e.top,i,e.height)),(a=n.top-e.top)>=o&&s.push(this.addRect(e.left,e.top,e.width,a)),(a=e.top+e.height-(n.top+n.height))>=o&&s.push(this.addRect(e.left,n.top+n.height,e.width,a)),s)}),n.prototype.isRectAWithinRectB=function(e,n){return e.left+t>=n.left&&e.top+t>=n.top&&e.left+e.width-t<=n.left+n.width&&e.top+e.height-t<=n.top+n.height},n.prototype.purgeRects=(r={},c={},function(e){for(var t,n=e.length;n--;)if(t=e.length,e[n])for(this.getRect(e[n],r);t--;)if(e[t]&&n!==t&&(this.getRect(e[t],c),this.isRectAWithinRectB(r,c))){e[n]=0;break}return e}),n.prototype.sortRectsTopLeft=function(){var e={},n={};return function(s,o){return this.getRect(s,e),this.getRect(o,n),e.top<n.top&&e.top+t<n.top?-1:e.top>n.top&&e.top-t>n.top?1:e.left<n.left&&e.left+t<n.left?-1:e.left>n.left&&e.left-t>n.left?1:0}}(),n.prototype.sortRectsLeftTop=function(){var e={},n={};return function(s,o){return this.getRect(s,e),this.getRect(o,n),e.left<n.left&&e.left+t<n.left?-1:e.left>n.left&&e.left-t<n.left?1:e.top<n.top&&e.top+t<n.top?-1:e.top>n.top&&e.top-t>n.top?1:0}}(),e)&&(d=new n,self.onmessage=function(e){var t=new Float32Array(e.data),s=t.subarray(4,t.length),o=new Float32Array(s.length),i=t[3],n={items:s,slots:o,width:t[1],height:t[2]};d.computeLayout(n,i),t[1]=n.width,t[2]=n.height,t.set(n.slots,4),postMessage(t.buffer,[t.buffer])}),n}a.prototype.getGrid=function(){return oe[this._gridId]},a.prototype.getElement=function(){return this._element},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a.prototype.getMargin=function(){return{left:this._marginLeft,right:this._marginRight,top:this._marginTop,bottom:this._marginBottom}},a.prototype.getPosition=function(){return{left:this._left,top:this._top}},a.prototype.isActive=function(){return this._isActive},a.prototype.isVisible=function(){return!!this._visibility&&!this._visibility._isHidden},a.prototype.isShowing=function(){return!!this._visibility&&!!this._visibility._isShowing},a.prototype.isHiding=function(){return!!this._visibility&&!!this._visibility._isHiding},a.prototype.isPositioning=function(){return!!this._layout&&!!this._layout._isActive},a.prototype.isDragging=function(){return!!this._drag&&!!this._drag._isActive},a.prototype.isReleasing=function(){return!!this._dragRelease&&!!this._dragRelease._isActive},a.prototype.isDestroyed=function(){return this._isDestroyed},a.prototype._refreshDimensions=function(e){if(!(this._isDestroyed||!0!==e&&this._visibility._isHidden)){var t=this._element,n=this._dragPlaceholder,s=t.getBoundingClientRect();this._width=s.width,this._height=s.height,this._marginLeft=Math.max(0,u(t,"margin-left")),this._marginRight=Math.max(0,u(t,"margin-right")),this._marginTop=Math.max(0,u(t,"margin-top")),this._marginBottom=Math.max(0,u(t,"margin-bottom")),n&&n.updateDimensions()}},a.prototype._refreshSortData=function(){if(!this._isDestroyed){var e,n=this._sortData={},t=this.getGrid()._settings.sortData;for(e in t)n[e]=t[e](this,this._element)}},a.prototype._addToLayout=function(e,t){!0!==this._isActive&&(this._isActive=!0,this._left=e||0,this._top=t||0)},a.prototype._removeFromLayout=function(){!1!==this._isActive&&(this._isActive=!1,this._left=0,this._top=0)},a.prototype._canSkipLayout=function(e,t){return this._left===e&&this._top===t&&!this._migrate._isActive&&!this._layout._skipNextAnimation&&!this._dragRelease.isJustReleased()},a.prototype._setTranslate=function(e,t){return(this._tX!==e||this._tY!==t)&&(this._tX=e,this._tY=t,this._element.style[v]=M(e,t),!0)},a.prototype._destroy=function(e){if(!this._isDestroyed){var t=this._element,n=this.getGrid()._settings;this._dragPlaceholder.destroy(),this._dragRelease.destroy(),this._migrate.destroy(),this._layout.destroy(),this._visibility.destroy(),this._drag&&this._drag.destroy(),this._emitter.destroy(),r(t,n.itemClass),e&&t.parentNode.removeChild(t),T&&T.delete(t),this._isActive=!1,this._isDestroyed=!0}};var Bt=mt(),P=null,ue=[];function j(e,t){if(this._options=0,this._processor=null,this._layoutQueue=[],this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={},this._workers=[],this._onWorkerMessage=this._onWorkerMessage.bind(this),this.setOptions(t),(e="number"==typeof e?Math.max(0,e):0)&&window.Worker&&window.URL&&window.Blob)try{this._workers=function(e,t){var n,s,o=[];if(e>0){P||(P=URL.createObjectURL(new Blob(["("+mt.toString()+")(true)"],{type:"application/javascript"})));for(s=0;s<e;s++)n=new Worker(P),t&&(n.onmessage=t),o.push(n),ue.push(n)}return o}(e,this._onWorkerMessage)}catch{this._processor=new Bt}else this._processor=new Bt}j.prototype._sendToWorker=function(){if(this._layoutQueue.length&&this._workers.length){var e=this._layoutQueue.shift(),t=this._workers.pop(),n=this._layoutWorkerData[e];delete this._layoutWorkerData[e],this._layoutWorkers[e]=t,t.postMessage(n.buffer,[n.buffer])}},j.prototype._onWorkerMessage=function(e){var s=new Float32Array(e.data),n=s[0],t=this._layouts[n],o=this._layoutCallbacks[n],i=this._layoutWorkers[n];t&&delete this._layouts[n],o&&delete this._layoutCallbacks[n],i&&delete this._layoutWorkers[n],t&&o&&(t.width=s[1],t.height=s[2],t.slots=s.subarray(4,s.length),this._finalizeLayout(t),o(t)),i&&(this._workers.push(i),this._sendToWorker())},j.prototype._finalizeLayout=function(e){var t=e._grid,s=2&e._settings,n="border-box"===t._boxSizing;return delete e._grid,delete e._settings,e.styles={},s?e.styles.width=(n?e.width+t._borderLeft+t._borderRight:e.width)+"px":e.styles.height=(n?e.height+t._borderTop+t._borderBottom:e.height)+"px",e},j.prototype.setOptions=function(e){var t,n,s,o,i;e&&(t="boolean"==typeof e.fillGaps?e.fillGaps?1:0:1&this._options,n="boolean"==typeof e.horizontal?e.horizontal?2:0:2&this._options,s="boolean"==typeof e.alignRight?e.alignRight?4:0:4&this._options,o="boolean"==typeof e.alignBottom?e.alignBottom?8:0:8&this._options,i="boolean"==typeof e.rounding?e.rounding?16:0:16&this._options,this._options=t|n|s|o|i)},j.prototype.createLayout=function(e,t,n,s,o,i){if(this._layouts[t])throw new Error("A layout with the provided id is currently being processed.");var r,c,l,d,u=2&this._options,a={id:t,items:n,slots:null,width:u?0:s,height:u?o:0,_grid:e,_settings:this._options};if(!n.length)return a.slots=[],this._finalizeLayout(a),void i(a);if(this._processor)return a.slots=window.Float32Array?new Float32Array(2*n.length):new Array(2*n.length),this._processor.computeLayout(a,a._settings),this._finalizeLayout(a),void i(a);r=new Float32Array(4+2*n.length);for(r[0]=t,r[1]=a.width,r[2]=a.height,r[3]=a._settings,l=0,d=3;l<n.length;l++)c=n[l],r[++d]=c._width+c._marginLeft+c._marginRight,r[++d]=c._height+c._marginTop+c._marginBottom;return this._layoutQueue.push(t),this._layouts[t]=a,this._layoutCallbacks[t]=i,this._layoutWorkerData[t]=r,this._sendToWorker(),this.cancelLayout.bind(this,t)},j.prototype.cancelLayout=function(e){if(this._layouts[e]&&(delete this._layouts[e],delete this._layoutCallbacks[e],this._layoutWorkerData[e])){delete this._layoutWorkerData[e];var t=this._layoutQueue.indexOf(e);t>-1&&this._layoutQueue.splice(t,1)}},j.prototype.destroy=function(){for(var e in this._layoutWorkers)this._workers.push(this._layoutWorkers[e]);!function(e){for(var t,s,n=0;n<e.length;n++)(t=e[n]).onmessage=null,t.onerror=null,t.onmessageerror=null,t.terminate(),(s=ue.indexOf(t))>-1&&ue.splice(s,1);P&&!ue.length&&(URL.revokeObjectURL(P),P=null)}(this._workers),this._workers.length=0,this._layoutQueue.length=0,this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={}},Tt=0;function Kt(e,t){var r=++Tt,n=0,s=0,i=!1,a=function(t){i||(s&&(n-=t-s),s=t,n>0?function(e,t){o.add(0,Je+e,t)}(r,a):(n=s=0,e()))};return function(c){if(!i){if(!(t<=0))return!0===c?(i=!0,n=s=0,a=void 0,void function(e){o.remove(0,Je+e)}(r)):void(n<=0?(n=t,a(0)):n=t);!0!==c&&e()}}}function Ce(e){var t=Object.prototype.toString.call(e);return"[object HTMLCollection]"===t||"[object NodeList]"===t}Vt=Object.prototype.toString;function lt(e){return"object"==typeof e&&"[object Object]"===Vt.call(e)}function Xt(){}var D,rt="number",ge="string",k="instant",qe=0;function n(e,t){if(typeof e===ge&&(e=document.querySelector(e)),!(e.getRootNode?e.getRootNode({composed:!0})===document:document.body.contains(e))||e===document.documentElement)throw new Error("Container element must be an existing DOM element.");var o=function(e,t){var n=q({},e);return t&&(n=q(n,t)),t&&t.visibleStyles?n.visibleStyles=t.visibleStyles:e&&e.visibleStyles&&(n.visibleStyles=e.visibleStyles),t&&t.hiddenStyles?n.hiddenStyles=t.hiddenStyles:e&&e.hiddenStyles&&(n.hiddenStyles=e.hiddenStyles),n}(n.defaultOptions,t);o.visibleStyles=wt(o.visibleStyles),o.hiddenStyles=wt(o.hiddenStyles),s(o.dragSort)||(o.dragSort=!!o.dragSort),this._id=Pt(),this._element=e,this._settings=o,this._isDestroyed=!1,this._items=[],this._layout={id:0,items:[],slots:[]},this._isLayoutFinished=!0,this._nextLayoutData=null,this._emitter=new h,this._onLayoutDataReceived=this._onLayoutDataReceived.bind(this),oe[this._id]=this,d(e,o.containerClass),function(e,t){typeof t!==rt&&(t=!0===t?0:-1),t>=0&&(e._resizeHandler=Kt(function(){e.refreshItems().layout()},t),window.addEventListener("resize",e._resizeHandler))}(this,o.layoutOnResize),this.add(function(e,t){if("*"===t)return e.children;if(typeof t===ge){for(var o=[],s=e.children,n=0;n<s.length;n++)te(s[n],t)&&o.push(s[n]);return o}return Array.isArray(t)||Ce(t)?t:[]}(e,o.items),{layout:!1}),o.layoutOnInit&&this.layout(!0)}function q(e,t){var n,s,o,i=Object.keys(t),a=i.length;for(s=0;s<a;s++)o=lt(t[n=i[s]]),lt(e[n])&&o?e[n]=q(q({},e[n]),t[n]):o?e[n]=q({},t[n]):Array.isArray(t[n])?e[n]=t[n].slice(0):e[n]=t[n];return e}function wt(e){var t,n,s={},o=document.documentElement.style;for(t in e)e[t]&&(n=le(o,t))&&(s[n]=e[t]);return s}function Ht(e){for(var n={},t=0;t<e.length;t++)n[e[t]._id]=t;return n}function be(e,t,n){return e[t._id]-e[n._id]}return n.Item=a,n.ItemLayout=O,n.ItemVisibility=f,n.ItemMigrate=J,n.ItemDrag=t,n.ItemDragRelease=S,n.ItemDragPlaceholder=c,n.Emitter=h,n.Animator=b,n.Dragger=e,n.Packer=j,n.AutoScroller=i,n.defaultPacker=new j(2),n.defaultOptions={items:"*",showDuration:300,showEasing:"ease",hideDuration:300,hideEasing:"ease",visibleStyles:{opacity:"1",transform:"scale(1)"},hiddenStyles:{opacity:"0",transform:"scale(0.5)"},layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1},layoutOnResize:150,layoutOnInit:!0,layoutDuration:300,layoutEasing:"ease",sortData:null,dragEnabled:!1,dragContainer:null,dragHandle:null,dragStartPredicate:{distance:0,delay:0},dragAxis:"xy",dragSort:!0,dragSortHeuristics:{sortInterval:100,minDragDistance:10,minBounceBackAngle:1},dragSortPredicate:{threshold:50,action:z,migrateAction:z},dragRelease:{duration:300,easing:"ease",useDragContainer:!0},dragCssProps:{touchAction:"none",userSelect:"none",userDrag:"none",tapHighlightColor:"rgba(0, 0, 0, 0)",touchCallout:"none",contentZooming:"none"},dragPlaceholder:{enabled:!1,createElement:null,onCreate:null,onRemove:null},dragAutoScroll:{targets:[],handle:null,threshold:50,safeZone:.2,speed:i.smoothSpeed(1e3,2e3,2500),sortDuringScroll:!0,smoothStop:!1,onStart:null,onStop:null},containerClass:"muuri",itemClass:"muuri-item",itemVisibleClass:"muuri-item-shown",itemHiddenClass:"muuri-item-hidden",itemPositioningClass:"muuri-item-positioning",itemDraggingClass:"muuri-item-dragging",itemReleasingClass:"muuri-item-releasing",itemPlaceholderClass:"muuri-item-placeholder"},n.prototype.on=function(e,t){return this._emitter.on(e,t),this},n.prototype.off=function(e,t){return this._emitter.off(e,t),this},n.prototype.getElement=function(){return this._element},n.prototype.getItem=function(e){if(this._isDestroyed||!e&&0!==e)return null;if(typeof e===rt)return this._items[e>-1?e:this._items.length+e]||null;if(e instanceof a)return e._gridId===this._id?e:null;if(T){var t,n=T.get(e);return n&&n._gridId===this._id?n:null}for(t=0;t<this._items.length;t++)if(this._items[t]._element===e)return this._items[t];return null},n.prototype.getItems=function(e){if(this._isDestroyed||void 0===e)return this._items.slice(0);var t,n,s=[];if(Array.isArray(e)||Ce(e))for(t=0;t<e.length;t++)(n=this.getItem(e[t]))&&s.push(n);else(n=this.getItem(e))&&s.push(n);return s},n.prototype.refreshItems=function(e,t){if(this._isDestroyed)return this;var n,s,o,a,i=e||this._items;if(!0===t)for(o=[],n=0;n<i.length;n++)(a=i[n]).isVisible()||a.isHiding()||((s=a.getElement().style).visibility="hidden",s.display="",o.push(s));for(n=0;n<i.length;n++)i[n]._refreshDimensions(t);if(!0===t){for(n=0;n<o.length;n++)(s=o[n]).visibility="",s.display="none";o.length=0}return this},n.prototype.refreshSortData=function(e){if(this._isDestroyed)return this;for(var n=e||this._items,t=0;t<n.length;t++)n[t]._refreshSortData();return this},n.prototype.synchronize=function(){if(this._isDestroyed)return this;var e,t,s,n=this._items;if(!n.length)return this;for(t=0;t<n.length;t++)(s=n[t]._element).parentNode===this._element&&(e=e||document.createDocumentFragment()).appendChild(s);return e?(this._element.appendChild(e),this._emit("synchronize"),this):this},n.prototype.layout=function(e,t){if(this._isDestroyed)return this;i=this._nextLayoutData,i&&s(i.cancel)&&i.cancel(),o=qe=qe%16777216+1,this._nextLayoutData={id:o,instant:e,onFinish:t,cancel:null};for(var o,i,c=this._items,l=[],a=0;a<c.length;a++)c[a]._isActive&&l.push(c[a]);this._refreshDimensions();var r,u=this._width-this._borderLeft-this._borderRight,h=this._height-this._borderTop-this._borderBottom,d=this._settings.layout;return s(d)?r=d(this,o,l,u,h,this._onLayoutDataReceived):(n.defaultPacker.setOptions(d),r=n.defaultPacker.createLayout(this,o,l,u,h,this._onLayoutDataReceived)),s(r)&&this._nextLayoutData&&this._nextLayoutData.id===o&&(this._nextLayoutData.cancel=r),this},n.prototype.add=function(e,t){if(this._isDestroyed||!e)return[];if(n=Ce(u=e)?Array.prototype.slice.call(u):Array.prototype.concat(u),!n.length)return n;var n,o,r,c,l,u,i=t||{},d=i.layout?i.layout:void 0===i.layout,m=this._items,h=!1;for(o=0;o<n.length;o++)(c=n[o]).parentNode!==this._element&&(r=r||document.createDocumentFragment()).appendChild(c);for(r&&this._element.appendChild(r),o=0;o<n.length;o++)c=n[o],(l=n[o]=new a(this,c,i.active))._isActive&&(h=!0,l._layout._skipNextAnimation=!0);for(o=0;o<n.length;o++)(l=n[o])._refreshDimensions(),l._refreshSortData();return Pe(m,n,i.index),this._hasListeners("add")&&this._emit("add",n.slice(0)),h&&d&&this.layout(d===k,s(d)?d:void 0),n},n.prototype.remove=function(e,t){if(this._isDestroyed||!e.length)return[];var n,o,c,i=t||{},a=i.layout?i.layout:void 0===i.layout,l=!1,u=this.getItems(),r=[],d=[];for(o=0;o<e.length;o++)(n=e[o])._isDestroyed||-1!==(c=this._items.indexOf(n))&&(n._isActive&&(l=!0),r.push(n),d.push(u.indexOf(n)),n._destroy(i.removeElements),this._items.splice(c,1));return this._hasListeners(Xe)&&this._emit(Xe,r.slice(0),d),l&&a&&this.layout(a===k,s(a)?a:void 0),r},n.prototype.show=function(e,t){return!this._isDestroyed&&e.length&&this._setItemsVisibility(e,!0,t),this},n.prototype.hide=function(e,t){return!this._isDestroyed&&e.length&&this._setItemsVisibility(e,!1,t),this},n.prototype.filter=function(e,t){if(this._isDestroyed||!this._items.length)return this;var a,l,i=[],o=[],f=typeof e===ge,u=s(e),n=t||{},h=!0===n.instant,m=n.syncWithLayout,c=n.layout?n.layout:void 0===n.layout,d=s(n.onFinish)?n.onFinish:null,p=-1,r=Xt;if(d&&(r=function(){++p&&d(i.slice(0),o.slice(0))}),u||f)for(l=0;l<this._items.length;l++)a=this._items[l],(u?e(a):te(a._element,e))?i.push(a):o.push(a);return i.length?this.show(i,{instant:h,syncWithLayout:m,onFinish:r,layout:!1}):r(),o.length?this.hide(o,{instant:h,syncWithLayout:m,onFinish:r,layout:!1}):r(),(i.length||o.length)&&(this._hasListeners(ot)&&this._emit(ot,i.slice(0),o.slice(0)),c&&this.layout(c===k,s(c)?c:void 0)),this},n.prototype.sort=function(){var e,t,n,o;function i(s,i){for(var a,r,d,u,c=0,l=0;l<t.length;l++)if(d=t[l][0],u=t[l][1],a=(s._sortData?s:s._refreshSortData())._sortData[d],r=(i._sortData?i:i._refreshSortData())._sortData[d],c="desc"===u||!u&&n?r<a?-1:r>a?1:0:a<r?-1:a>r?1:0)return c;return c||(e||(e=Ht(o)),c=n?be(e,i,s):be(e,s,i)),c}function a(s,i){var a=n?-t(s,i):t(s,i);return a||(e||(e=Ht(o)),a=n?be(e,i,s):be(e,s,i)),a}return function(r,c){if(this._isDestroyed||this._items.length<2)return this;var l=this._items,d=c||{},u=d.layout?d.layout:void 0===d.layout;if(n=!!d.descending,o=l.slice(0),e=null,s(r))t=r,l.sort(a);else if(typeof r===ge)t=r.trim().split(" ").filter(function(e){return e}).map(function(e){return e.split(":")}),l.sort(i);else{if(!Array.isArray(r))throw t=n=o=e=null,new Error("Invalid comparer argument provided.");l.length=0,l.push.apply(l,r)}return this._hasListeners(ct)&&this._emit(ct,l.slice(0),o),u&&this.layout(u===k,s(u)?u:void 0),t=n=o=e=null,this}}(),n.prototype.move=function(e,t,n){if(this._isDestroyed||this._items.length<2)return this;var o,i,a=this._items,r=n||{},c=r.layout?r.layout:void 0===r.layout,u=r.action===g,h=u?g:z,l=this.getItem(e),d=this.getItem(t);return l&&d&&l!==d&&(o=a.indexOf(l),i=a.indexOf(d),u?$e(a,o,i):Ve(a,o,i),this._hasListeners(pe)&&this._emit(pe,{item:l,fromIndex:o,toIndex:i,action:h}),c&&this.layout(c===k,s(c)?c:void 0)),this},n.prototype.send=function(e,t,n,o){if(this._isDestroyed||t._isDestroyed||this===t)return this;if(!(e=this.getItem(e)))return this;var i=o||{},c=i.appendTo||document.body,a=i.layoutSender?i.layoutSender:void 0===i.layoutSender,r=i.layoutReceiver?i.layoutReceiver:void 0===i.layoutReceiver;return e._migrate.start(t,n,c),e._migrate._isActive&&e._isActive&&(a&&this.layout(a===k,s(a)?a:void 0),r&&t.layout(r===k,s(r)?r:void 0)),this},n.prototype.destroy=function(e){if(this._isDestroyed)return this;var t,n,s,o=this._element,i=this._items.slice(0),a=this._layout&&this._layout.styles||{};for((n=this)._resizeHandler&&(n._resizeHandler(!0),window.removeEventListener("resize",n._resizeHandler),n._resizeHandler=null),t=0;t<i.length;t++)i[t]._destroy(e);for(s in this._items.length=0,r(o,this._settings.containerClass),a)o.style[s]="";return this._emit("destroy"),this._emitter.destroy(),delete oe[this._id],this._isDestroyed=!0,this},n.prototype._emit=function(){this._isDestroyed||this._emitter.emit.apply(this._emitter,arguments)},n.prototype._hasListeners=function(e){return!this._isDestroyed&&this._emitter.countListeners(e)>0},n.prototype._updateBoundingRect=function(){var e=this._element.getBoundingClientRect();this._width=e.width,this._height=e.height,this._left=e.left,this._top=e.top,this._right=e.right,this._bottom=e.bottom},n.prototype._updateBorders=function(e,t,n,s){var o=this._element;e&&(this._borderLeft=u(o,"border-left-width")),t&&(this._borderRight=u(o,"border-right-width")),n&&(this._borderTop=u(o,"border-top-width")),s&&(this._borderBottom=u(o,"border-bottom-width"))},n.prototype._refreshDimensions=function(){this._updateBoundingRect(),this._updateBorders(1,1,1,1),this._boxSizing=l(this._element,"box-sizing")},n.prototype._onLayoutDataReceived=(D=[],function(e){if(!this._isDestroyed&&this._nextLayoutData&&this._nextLayoutData.id===e.id){var t,n,r,c,l,i=this,a=this._nextLayoutData.instant,u=this._nextLayoutData.onFinish,d=e.items.length,o=d;for(this._nextLayoutData=null,!this._isLayoutFinished&&this._hasListeners(Ke)&&this._emit(Ke,this._layout.items.slice(0)),this._layout=e,D.length=0,t=0;t<d;t++)(n=e.items[t])?(r=e.slots[2*t],c=e.slots[2*t+1],n._canSkipLayout(r,c)?--o:(n._left=r,n._top=c,n.isActive()&&!n.isDragging()?D.push(n):--o)):--o;if(e.styles&&I(this._element,e.styles),!this._hasListeners(A)||(this._emit(A,e.items.slice(0),!0===a),this._layout.id===e.id)){if(l=function(){if(!(--o>0)){var t=i._layout.id!==e.id,n=s(a)?a:u;t||(i._isLayoutFinished=!0),s(n)&&n(e.items.slice(0),t),!t&&i._hasListeners(Ue)&&i._emit(Ue,e.items.slice(0))}},!D.length)return l(),this;for(this._isLayoutFinished=!1,t=0;t<D.length&&this._layout.id===e.id;t++)D[t]._layout.start(!0===a,l);return this._layout.id===e.id&&(D.length=0),this}}}),n.prototype._setItemsVisibility=function(e,t,n){var o,i,r=this,a=e.slice(0),c=n||{},j=!0===c.instant,l=c.onFinish,m=c.layout?c.layout:void 0===c.layout,p=a.length,v=t?"showStart":K,f=t?"showEnd":"hideEnd",b=t?"show":"hide",h=!1,d=[],u=[];if(p){for(o=0;o<a.length;o++)i=a[o],(t&&!i._isActive||!t&&i._isActive)&&(h=!0),i._layout._skipNextAnimation=!!t&&!i._isActive,t&&i._visibility._isHidden&&u.push(i),t?i._addToLayout():i._removeFromLayout();u.length&&(this.refreshItems(u,!0),u.length=0),h&&!1!==c.syncWithLayout?this.on(A,g):g(),h&&m&&this.layout(m===k,s(m)?m:void 0)}else s(l)&&l(a);function g(){for(h&&!1!==c.syncWithLayout&&r.off(A,g),r._hasListeners(v)&&r._emit(v,a.slice(0)),o=0;o<a.length;o++)a[o]._gridId===r._id?a[o]._visibility[b](j,function(e,t){e||d.push(t),--p<1&&(s(l)&&l(d.slice(0)),r._hasListeners(f)&&r._emit(f,d.slice(0)))}):--p<1&&(s(l)&&l(d.slice(0)),r._hasListeners(f)&&r._emit(f,d.slice(0)))}},n});const options={items:"*",showDuration:700,showEasing:"cubic-bezier(0.215, 0.61, 0.355, 1)",hideDuration:700,hideEasing:"cubic-bezier(0.215, 0.61, 0.355, 1)",visibleStyles:{opacity:"1",transform:"scale(1)"},hiddenStyles:{opacity:"0",transform:"scale(0.5)"},layout:{fillGaps:!0,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1},layoutOnResize:150,layoutOnInit:!0,layoutDuration:300,layoutEasing:"cubic-bezier(0.215, 0.61, 0.355, 1)",sortData:null,dragEnabled:!1,containerClass:"muuri",itemClass:"muuri-item",itemVisibleClass:"muuri-item-shown",itemHiddenClass:"muuri-item-hidden",itemPositioningClass:"muuri-item-positioning",itemDraggingClass:"muuri-item-dragging",itemReleasingClass:"muuri-item-releasing",itemPlaceholderClass:"muuri-item-placeholder"};if(document.getElementsByClassName("muugrid"))var muugrid=new Muuri(".muugrid",options),searchField,searchFieldValue,itemz,filt;searchField=document.querySelector(".search-field"),itemz=document.querySelector(".item"),searchField.value="",searchField.addEventListener("keyup",function(){var e=searchField.value.toLowerCase();searchFieldValue!==e&&(searchFieldValue=e,filter())});function tagfilter(e){var t=e.toLowerCase();searchFieldValue!==t&&(searchFieldValue=t,filter())}function filter(){muugrid.filter(function(e){var t=e.getElement(),n=!searchFieldValue||(t.getAttribute("data-search")||"").toLowerCase().indexOf(searchFieldValue)>-1;return n}),showPic()}location.href.indexOf("#")!=-1&&(filt=window.location.hash,filt="."+filt.substring(1),filt=="."?muugrid.filter("*"):muugrid.filter(filt));function menuFilter(e){e=="."?muugrid.filter("*"):muugrid.filter(e);var t=e.substring(1);window.location.hash=t,showPic()}