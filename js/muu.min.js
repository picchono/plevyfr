!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Muuri=e()}(this,function(){"use strict";var m,y,N,V,$,Q,eo={},T="function"==typeof Map?new Map:null,g="swap",z="move",A="layoutStart",eN="layoutEnd",eL="layoutAbort",eI="remove",K="hideStart",eY="filter",eZ="sort",e2="move",e0="send",E="beforeSend",e4="receive",e1="beforeReceive",W="dragReleaseEnd",tg="ontouchstart"in window,ep=!!window.PointerEvent,e6=!!window.navigator.msPointerEnabled,ed,ef,t8,ew,eO,eH,e8,eE,ei,tr,eb,tu,ev,e_,ea,th,eg,t9,tp,tw;function h(){this._events={},this._queue=[],this._counter=0,this._clearOnEmit=!1}h.prototype.on=function(e,n){if(!this._events||!e||!n)return this;var t=this._events[e];return t||(t=this._events[e]=[]),t.push(n),this},h.prototype.off=function(t,n){if(!this._events||!t||!n)return this;var s,e=this._events[t];if(!e||!e.length)return this;for(;-1!==(s=e.indexOf(n));)e.splice(s,1);return this},h.prototype.clear=function(e){if(!this._events||!e)return this;var t=this._events[e];return t&&(t.length=0,delete this._events[e]),this},h.prototype.emit=function(i){if(!this._events||!i)return this._clearOnEmit=!1,this;if(n=this._events[i],!n||!n.length)return this._clearOnEmit=!1,this;var t,n,o,a,e=this._queue,r=e.length,s=arguments.length-1;s>3&&((o=[]).push.apply(o,arguments),o.shift()),e.push.apply(e,n),this._clearOnEmit&&(n.length=0,this._clearOnEmit=!1),++this._counter;for(t=r,a=e.length;t<a;t++)if(0===s?e[t]():1===s?e[t](arguments[1]):2===s?e[t](arguments[1],arguments[2]):3===s?e[t](arguments[1],arguments[2],arguments[3]):e[t].apply(null,o),!this._events)return this;return--this._counter,this._counter||(e.length=0),this},h.prototype.burst=function(){return this._events?(this._clearOnEmit=!0,this.emit.apply(this,arguments),this):this},h.prototype.countListeners=function(t){if(!this._events)return 0;var e=this._events[t];return e?e.length:0},h.prototype.destroy=function(){return this._events?(this._queue.length=this._counter=0,this._events=null,this):this},Q=ep?"pointerout":e6?"MSPointerOut":"";function x(e){Q&&(this._dragger=e,this._timeout=null,this._outEvent=null,this._isActive=!1,this._addBehaviour=this._addBehaviour.bind(this),this._removeBehaviour=this._removeBehaviour.bind(this),this._onTimeout=this._onTimeout.bind(this),this._resetData=this._resetData.bind(this),this._onStart=this._onStart.bind(this),this._onOut=this._onOut.bind(this),this._dragger.on("start",this._onStart))}x.prototype._addBehaviour=function(){this._isActive||(this._isActive=!0,this._dragger.on("move",this._resetData),this._dragger.on("cancel",this._removeBehaviour),this._dragger.on("end",this._removeBehaviour),window.addEventListener(Q,this._onOut))},x.prototype._removeBehaviour=function(){this._isActive&&(this._dragger.off("move",this._resetData),this._dragger.off("cancel",this._removeBehaviour),this._dragger.off("end",this._removeBehaviour),window.removeEventListener(Q,this._onOut),this._resetData(),this._isActive=!1)},x.prototype._resetData=function(){window.clearTimeout(this._timeout),this._timeout=null,this._outEvent=null},x.prototype._onStart=function(e){"mouse"!==e.pointerType&&this._addBehaviour()},x.prototype._onOut=function(e){this._dragger._getTrackedTouch(e)&&(this._resetData(),this._outEvent=e,this._timeout=window.setTimeout(this._onTimeout,100))},x.prototype._onTimeout=function(){var e=this._outEvent;this._resetData(),this._dragger.isActive()&&this._dragger._onCancel(e)},x.prototype.destroy=function(){Q&&(this._dragger.off("start",this._onStart),this._removeBehaviour())},ed=["","webkit","moz","ms","o","Webkit","Moz","MS","O"],ef={};function el(s,t){if(e=ef[t]||"",e)return e;for(var e,o=t[0].toUpperCase()+t.slice(1),n=0;n<ed.length;){if((e=ed[n]?ed[n]+o:t)in s)return ef[t]=e,e;++n}return""}function tv(){var e,t=!1;try{e=Object.defineProperty({},"passive",{get:function(){t=!0}}),window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(e){}return t}var en=window.navigator.userAgent.toLowerCase(),tI=en.indexOf("edge")>-1,tO=en.indexOf("trident")>-1,tx=en.indexOf("firefox")>-1,tC=en.indexOf("android")>-1,C=!!tv()&&{passive:!0},t6="touchAction",ec=el(document.documentElement.style,t6);function e(t,n){this._element=t,this._emitter=new h,this._isDestroyed=!1,this._cssProps={},this._touchAction="",this._isActive=!1,this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._onStart=this._onStart.bind(this),this._onMove=this._onMove.bind(this),this._onCancel=this._onCancel.bind(this),this._onEnd=this._onEnd.bind(this),this._edgeHack=null,(tI||tO)&&(ep||e6)&&(this._edgeHack=new x(this)),this.setCssProps(n),this._touchAction||this.setTouchAction("auto"),t.addEventListener("dragstart",e._preventDefault,!1),t.addEventListener(e._inputEvents.start,this._onStart,C)}e._pointerEvents={start:"pointerdown",move:"pointermove",cancel:"pointercancel",end:"pointerup"},e._msPointerEvents={start:"MSPointerDown",move:"MSPointerMove",cancel:"MSPointerCancel",end:"MSPointerUp"},e._touchEvents={start:"touchstart",move:"touchmove",cancel:"touchcancel",end:"touchend"},e._mouseEvents={start:"mousedown",move:"mousemove",cancel:"",end:"mouseup"},e._inputEvents=tg?e._touchEvents:ep?e._pointerEvents:e6?e._msPointerEvents:e._mouseEvents,e._emitter=new h,e._emitterEvents={start:"start",move:"move",end:"end",cancel:"cancel"},e._activeInstances=[],e._preventDefault=function(e){e.preventDefault&&!1!==e.cancelable&&e.preventDefault()},e._activateInstance=function(t){e._activeInstances.indexOf(t)>-1||(e._activeInstances.push(t),e._emitter.on(e._emitterEvents.move,t._onMove),e._emitter.on(e._emitterEvents.cancel,t._onCancel),e._emitter.on(e._emitterEvents.end,t._onEnd),1===e._activeInstances.length&&e._bindListeners())},e._deactivateInstance=function(t){var n=e._activeInstances.indexOf(t);-1!==n&&(e._activeInstances.splice(n,1),e._emitter.off(e._emitterEvents.move,t._onMove),e._emitter.off(e._emitterEvents.cancel,t._onCancel),e._emitter.off(e._emitterEvents.end,t._onEnd),e._activeInstances.length||e._unbindListeners())},e._bindListeners=function(){window.addEventListener(e._inputEvents.move,e._onMove,C),window.addEventListener(e._inputEvents.end,e._onEnd,C),e._inputEvents.cancel&&window.addEventListener(e._inputEvents.cancel,e._onCancel,C)},e._unbindListeners=function(){window.removeEventListener(e._inputEvents.move,e._onMove,C),window.removeEventListener(e._inputEvents.end,e._onEnd,C),e._inputEvents.cancel&&window.removeEventListener(e._inputEvents.cancel,e._onCancel,C)},e._getEventPointerId=function(e){return"number"==typeof e.pointerId?e.pointerId:e.changedTouches?e.changedTouches[0]?e.changedTouches[0].identifier:null:1},e._getTouchById=function(e,n){if("number"==typeof e.pointerId)return e.pointerId===n?e:null;if(e.changedTouches){for(var t=0;t<e.changedTouches.length;t++)if(e.changedTouches[t].identifier===n)return e.changedTouches[t];return null}return e},e._onMove=function(t){e._emitter.emit(e._emitterEvents.move,t)},e._onCancel=function(t){e._emitter.emit(e._emitterEvents.cancel,t)},e._onEnd=function(t){e._emitter.emit(e._emitterEvents.end,t)},e.prototype._reset=function(){this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._isActive=!1,e._deactivateInstance(this)},e.prototype._createEvent=function(n,s){var t=this._getTrackedTouch(s);return{type:n,srcEvent:s,distance:this.getDistance(),deltaX:this.getDeltaX(),deltaY:this.getDeltaY(),deltaTime:n===e._emitterEvents.start?0:this.getDeltaTime(),isFirst:n===e._emitterEvents.start,isFinal:n===e._emitterEvents.end||n===e._emitterEvents.cancel,pointerType:s.pointerType||(s.touches?"touch":"mouse"),identifier:this._pointerId,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target}},e.prototype._emit=function(e,t){this._emitter.emit(e,this._createEvent(e,t))},e.prototype._getTrackedTouch=function(t){return null===this._pointerId?null:e._getTouchById(t,this._pointerId)},e.prototype._onStart=function(t){if(!this._isDestroyed&&null===this._pointerId&&(this._pointerId=e._getEventPointerId(t),null!==this._pointerId)){var n=this._getTrackedTouch(t);this._startX=this._currentX=n.clientX,this._startY=this._currentY=n.clientY,this._startTime=Date.now(),this._isActive=!0,this._emit(e._emitterEvents.start,t),this._isActive&&e._activateInstance(this)}},e.prototype._onMove=function(n){var t=this._getTrackedTouch(n);t&&(this._currentX=t.clientX,this._currentY=t.clientY,this._emit(e._emitterEvents.move,n))},e.prototype._onCancel=function(t){this._getTrackedTouch(t)&&(this._emit(e._emitterEvents.cancel,t),this._reset())},e.prototype._onEnd=function(t){this._getTrackedTouch(t)&&(this._emit(e._emitterEvents.end,t),this._reset())},e.prototype.isActive=function(){return this._isActive},e.prototype.setTouchAction=function(t){this._touchAction=t,ec&&(this._cssProps[ec]="",this._element.style[ec]=t),tg&&(this._element.removeEventListener(e._touchEvents.start,e._preventDefault,!0),(this._element.style[ec]!==t||tx&&tC)&&this._element.addEventListener(e._touchEvents.start,e._preventDefault,!0))},e.prototype.setCssProps=function(t){if(t){var e,s,n=this._cssProps,o=this._element;for(e in n)o.style[e]=n[e],delete n[e];for(e in t)t[e]&&(e!==t6?(s=el(o.style,e))&&(n[s]="",o.style[s]=t[e]):this.setTouchAction(t[e]))}},e.prototype.getDeltaX=function(){return this._currentX-this._startX},e.prototype.getDeltaY=function(){return this._currentY-this._startY},e.prototype.getDistance=function(){var e=this.getDeltaX(),t=this.getDeltaY();return Math.sqrt(e*e+t*t)},e.prototype.getDeltaTime=function(){return this._startTime?Date.now()-this._startTime:0},e.prototype.on=function(e,t){this._emitter.on(e,t)},e.prototype.off=function(e,t){this._emitter.off(e,t)},e.prototype.destroy=function(){if(!this._isDestroyed){var n,t=this._element;for(n in this._edgeHack&&this._edgeHack.destroy(),this._reset(),this._emitter.destroy(),t.removeEventListener(e._inputEvents.start,this._onStart,C),t.removeEventListener("dragstart",e._preventDefault,!1),t.removeEventListener(e._touchEvents.start,e._preventDefault,!0),this._cssProps)t.style[n]=this._cssProps[n],delete this._cssProps[n];this._element=null,this._isDestroyed=!0}},t8=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return this.setTimeout(function(){e(Date.now())},16.666666666666668)}).bind(window);function er(t){this._nextStep=null,this._lanes=[],this._stepQueue=[],this._stepCallbacks={},this._step=this._step.bind(this);for(var e=0;e<t;e++)this._lanes.push(new e5)}function e5(){this.queue=[],this.indices={},this.callbacks={}}er.prototype._step=function(l){var e,t,n,s,r,c,o=this._lanes,i=this._stepQueue,a=this._stepCallbacks;for(this._nextStep=null,e=0;e<o.length;e++){for(s=o[e].queue,r=o[e].callbacks,c=o[e].indices,n=0;n<s.length;n++)(t=s[n])&&(i.push(t),a[t]=r[t],delete r[t],delete c[t]);s.length=0}for(e=0;e<i.length;e++)a[t=i[e]]&&a[t](l),delete a[t];i.length=0},er.prototype.add=function(e,t,n){this._lanes[e].add(t,n),this._nextStep||(this._nextStep=t8(this._step))},er.prototype.remove=function(e,t){this._lanes[e].remove(t)},e5.prototype.add=function(e,n){var t=this.indices[e];void 0!==t&&(this.queue[t]=void 0),this.queue.push(e),this.callbacks[e]=n,this.indices[e]=this.queue.length-1},e5.prototype.remove=function(e){var t=this.indices[e];void 0!==t&&(this.queue[t]=void 0,delete this.callbacks[e],delete this.indices[e])};var t0="layoutRead",tl="layoutWrite",ta="visibilityRead",ti="visibilityWrite",to="dragStartRead",t2="dragStartWrite",tn="dragMoveRead",tt="dragMoveWrite",eX="dragScrollRead",eK="dragScrollWrite",eW="dragSortRead",eD="placeholderLayoutRead",eF="placeholderLayoutWrite",eM="placeholderResizeWrite",eP="autoScrollRead",eV="autoScrollWrite",e$="debounceRead",o=new er(3);function eU(e){o.remove(0,t0+e),o.remove(2,tl+e)}function eq(e){o.remove(0,ta+e),o.remove(2,ti+e)}function te(e){o.remove(0,to+e),o.remove(2,t2+e)}function tc(e){o.remove(0,tn+e),o.remove(2,tt+e)}function t4(e){o.remove(0,eX+e),o.remove(2,eK+e)}function eh(e,t){o.add(1,eW+e,t)}function eB(e){o.remove(0,eD+e),o.remove(2,eF+e)}function t7(e,t){o.add(0,eP,e),o.add(2,eV,t)}function s(e){return"function"==typeof e}$="function"==typeof WeakMap?new WeakMap:null;function l(t,n){var e=$&&$.get(t);return e||(e=window.getComputedStyle(t,null),$&&$.set(t,e)),e.getPropertyValue(n)}function u(e,t){return parseFloat(l(e,t))||0}var p,F=document.documentElement,tH=document.body,ee={value:0,offset:0};function eS(e){return e===window||e===F||e===tH?window:e}function X(e){return e===window?e.pageXOffset:e.scrollLeft}function Y(e){return e===window?e.pageYOffset:e.scrollTop}function t5(e){return e===window?F.scrollWidth-F.clientWidth:e.scrollWidth-e.clientWidth}function tm(e){return e===window?F.scrollHeight-F.clientHeight:e.scrollHeight-e.clientHeight}function t3(t,e){if(e=e||{},t===window)e.width=F.clientWidth,e.height=F.clientHeight,e.left=0,e.right=e.width,e.top=0,e.bottom=e.height;else{var n=t.getBoundingClientRect(),s=t.clientLeft||u(t,"border-left-width"),o=t.clientTop||u(t,"border-top-width");e.width=t.clientWidth,e.height=t.clientHeight,e.left=n.left+s,e.right=e.left+e.width,e.top=n.top+o,e.bottom=e.top+e.height}return e}function U(e){return e._drag._getGrid()._settings.dragAutoScroll}function tP(e){if(e._drag&&e._isActive){var t=e._drag;t._scrollDiffX=t._scrollDiffY=0,e._setTranslate(t._left,t._top)}}function e9(t,n,s,e){return ee.value=Math.min(e/2,t),ee.offset=Math.max(0,s+2*ee.value+e*n-e)/2,ee}function w(){this.reset()}function B(){this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0}function Z(e,t){this.pool=[],this.createItem=e,this.releaseItem=t}function es(e,t){var n=function(e,t){return function(e,t){return!(e.left+e.width<=t.left||t.left+t.width<=e.left||e.top+e.height<=t.top||t.top+t.height<=e.top)}(e,t)?(Math.min(e.left+e.width,t.left+t.width)-Math.max(e.left,t.left))*(Math.min(e.top+e.height,t.top+t.height)-Math.max(e.top,t.top)):0}(e,t);return n?n/(Math.min(e.width,t.width)*Math.min(e.height,t.height))*100:0}w.prototype.reset=function(){this.isActive&&this.onStop(),this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=null,this.value=null,this.maxValue=0,this.threshold=0,this.distance=0,this.speed=0,this.duration=0,this.action=null},w.prototype.hasReachedEnd=function(){return 4&this.direction?this.value>=this.maxValue:this.value<=0},w.prototype.computeCurrentScrollValue=function(){return null===this.value?1&this.direction?X(this.element):Y(this.element):Math.max(0,Math.min(this.value,this.maxValue))},w.prototype.computeNextScrollValue=function(t){var e=this.speed*(t/1e3),n=4&this.direction?this.value+e:this.value-e;return Math.max(0,Math.min(n,this.maxValue))},w.prototype.computeSpeed=(p={direction:null,threshold:0,distance:0,value:0,maxValue:0,deltaTime:0,duration:0,isEnding:!1},function(n){var t=this.item,e=U(t).speed;return s(e)?(p.direction=this.direction,p.threshold=this.threshold,p.distance=this.distance,p.value=this.value,p.maxValue=this.maxValue,p.duration=this.duration,p.speed=this.speed,p.deltaTime=n,p.isEnding=this.isEnding,e(t,this.element,p)):e}),w.prototype.tick=function(e){return this.isActive||(this.isActive=!0,this.onStart()),this.value=this.computeCurrentScrollValue(),this.speed=this.computeSpeed(e),this.value=this.computeNextScrollValue(e),this.duration+=e,this.value},w.prototype.onStart=function(){var e=this.item,t=U(e).onStart;s(t)&&t(e,this.element,this.direction)},w.prototype.onStop=function(){var e=this.item,t=U(e).onStop;s(t)&&t(e,this.element,this.direction),e._drag&&e._drag.sort()},B.prototype.reset=function(){this.requestX&&(this.requestX.action=null),this.requestY&&(this.requestY.action=null),this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0},B.prototype.addRequest=function(e){1&e.direction?(this.removeRequest(this.requestX),this.requestX=e):(this.removeRequest(this.requestY),this.requestY=e),e.action=this},B.prototype.removeRequest=function(e){e&&(this.requestX===e?(this.requestX=null,e.action=null):this.requestY===e&&(this.requestY=null,e.action=null))},B.prototype.computeScrollValues=function(){this.scrollLeft=this.requestX?this.requestX.value:X(this.element),this.scrollTop=this.requestY?this.requestY.value:Y(this.element)},B.prototype.scroll=function(){var e=this.element;e&&(e.scrollTo?e.scrollTo(this.scrollLeft,this.scrollTop):(e.scrollLeft=this.scrollLeft,e.scrollTop=this.scrollTop))},Z.prototype.pick=function(){return this.pool.pop()||this.createItem()},Z.prototype.release=function(e){this.releaseItem(e),-1===this.pool.indexOf(e)&&this.pool.push(e)},Z.prototype.reset=function(){this.pool.length=0},ew={width:0,height:0,left:0,right:0,top:0,bottom:0},eO={width:0,height:0,left:0,right:0,top:0,bottom:0};function i(){this._isDestroyed=!1,this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,this._items=[],this._actions=[],this._requests={},this._requests[1]={},this._requests[2]={},this._requestOverlapCheck={},this._dragPositions={},this._dragDirections={},this._overlapCheckInterval=150,this._requestPool=new Z(function(){return new w},function(e){e.reset()}),this._actionPool=new Z(function(){return new B},function(e){e.reset()}),this._readTick=this._readTick.bind(this),this._writeTick=this._writeTick.bind(this)}i.AXIS_X=1,i.AXIS_Y=2,i.FORWARD=4,i.BACKWARD=8,i.LEFT=9,i.RIGHT=5,i.UP=10,i.DOWN=6,i.smoothSpeed=function(e,t,n){return function(l,c,s){o=0,s.isEnding||(s.threshold>0?(r=s.threshold-Math.max(0,s.distance),o=e/s.threshold*r):o=e);var o,r,a=s.speed,i=o;return a===o?i:a<o?(i=a+t*(s.deltaTime/1e3),Math.min(o,i)):(i=a-n*(s.deltaTime/1e3),Math.max(o,i))}},i.pointerHandle=function(n){var e={left:0,top:0,width:0,height:0},t=n||1;return function(c,o,i,a,r,s,n){return e.left=s-.5*t,e.top=n-.5*t,e.width=t,e.height=t,e}},i.prototype._readTick=function(e){this._isDestroyed||(e&&this._tickTime?(this._tickDeltaTime=e-this._tickTime,this._tickTime=e,this._updateRequests(),this._updateActions()):(this._tickTime=e,this._tickDeltaTime=0))},i.prototype._writeTick=function(){this._isDestroyed||(this._applyActions(),t7(this._readTick,this._writeTick))},i.prototype._startTicking=function(){this._isTicking=!0,t7(this._readTick,this._writeTick)},i.prototype._stopTicking=function(){this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,o.remove(0,eP),o.remove(2,eV)},i.prototype._getItemHandleRect=function(n,o,e){if(t=n._drag,o){var t,i=t._dragMoveEvent||t._dragStartEvent,s=o(n,t._clientX,t._clientY,n._width,n._height,i.clientX,i.clientY);e.left=s.left,e.top=s.top,e.width=s.width,e.height=s.height}else e.left=t._clientX,e.top=t._clientY,e.width=n._width,e.height=n._height;return e.right=e.left+e.width,e.bottom=e.top+e.height,e},i.prototype._requestItemScroll=function(t,c,o,s,i,a,r){var n=this._requests[c],e=n[t._id];e?e.element===o&&e.direction===s||e.reset():e=this._requestPool.pick(),e.item=t,e.element=o,e.direction=s,e.threshold=i,e.distance=a,e.maxValue=r,n[t._id]=e},i.prototype._cancelItemScroll=function(t,s){var n=this._requests[s],e=n[t._id];e&&(e.action&&e.action.removeRequest(e),this._requestPool.release(e),delete n[t._id])},i.prototype._checkItemOverlap=function(e,y,j){var d=U(e),v=s(d.targets)?d.targets(e):d.targets,P=d.threshold,T=d.safeZone;if(!v||!v.length)return y&&this._cancelItemScroll(e,1),void(j&&this._cancelItemScroll(e,2));var F=this._dragDirections[e._id],_=F[0],b=F[1];if(!_&&!b)return y&&this._cancelItemScroll(e,1),void(j&&this._cancelItemScroll(e,2));for(var c=this._getItemHandleRect(e,d.handle,ew),r=eO,n=null,o=null,p=!0,g=!0,m=0,a=0,t=null,i=null,l=0,u=0,h=0,x=null,f=-1/0,E=0,k=0,A=null,S=0,M=0,O=null,w=-1/0,z=0,D=0,N=null,L=0,R=0,C=0;C<v.length;C++)n=v[C],p=y&&_&&2!==n.axis,g=j&&b&&1!==n.axis,a=n.priority||0,(!p||a<f)&&(!g||a<w)||(o=eS(n.element||n),u=p?t5(o):-1,h=g?tm(o):-1,(u||h)&&((m=es(c,r=t3(o,r)))<=0||(p&&a>=f&&u>0&&(a>f||m>k)&&(i=null,t=e9("number"==typeof n.threshold?n.threshold:P,T,c.width,r.width),5===_?(l=r.right+t.offset-c.right)<=t.value&&X(o)<u&&(i=5):9===_&&(l=c.left-(r.left-t.offset))<=t.value&&X(o)>0&&(i=9),null!==i&&(x=o,f=a,E=t.value,k=m,A=i,S=l,M=u)),g&&a>=w&&h>0&&(a>w||m>D)&&(i=null,t=e9("number"==typeof n.threshold?n.threshold:P,T,c.height,r.height),6===b?(l=r.bottom+t.offset-c.bottom)<=t.value&&Y(o)<h&&(i=6):10===b&&(l=c.top-(r.top-t.offset))<=t.value&&Y(o)>0&&(i=10),null!==i&&(O=o,w=a,z=t.value,D=m,N=i,L=l,R=h)))));y&&(x?this._requestItemScroll(e,1,x,A,E,S,M):this._cancelItemScroll(e,1)),j&&(O?this._requestItemScroll(e,2,O,N,z,L,R):this._cancelItemScroll(e,2))},i.prototype._updateScrollRequest=function(e){for(var h=e.item,i=U(h),m=s(i.targets)?i.targets(h):i.targets,b=m&&m.length||0,v=i.threshold,g=i.safeZone,n=this._getItemHandleRect(h,i.handle,ew),t=eO,r=null,a=null,c=!1,o=null,p=null,d=null,u=null,l=null,f=0;f<b;f++)if((a=eS((r=m[f]).element||r))===e.element){if(c=!!(1&e.direction)){if(2===r.axis)continue}else if(1===r.axis)continue;if((u=c?t5(a):tm(a))<=0)break;if(es(n,t=t3(a,t))<=0)break;if(o=e9("number"==typeof r.threshold?r.threshold:v,g,c?n.width:n.height,c?t.width:t.height),(p=9===e.direction?n.left-(t.left-o.offset):5===e.direction?t.right+o.offset-n.right:10===e.direction?n.top-(t.top-o.offset):t.bottom+o.offset-n.bottom)>o.value)break;if(d=c?X(a):Y(a),l=4&e.direction?d>=u:d<=0)break;return e.maxValue=u,e.threshold=o.value,e.distance=p,e.isEnding=!1,!0}return!0===i.smoothStop&&e.speed>0?(null===l&&(l=e.hasReachedEnd()),e.isEnding=!l):e.isEnding=!1,e.isEnding},i.prototype._updateRequests=function(){for(var e,t,n,s,o,i,r,c=this._items,l=this._requests[1],d=this._requests[2],a=0;a<c.length;a++)e=c[a],t=(r=this._requestOverlapCheck[e._id])>0&&this._tickTime-r>this._overlapCheckInterval,o=!0,(n=l[e._id])&&n.isActive&&(o=!this._updateScrollRequest(n))&&(t=!0,this._cancelItemScroll(e,1)),i=!0,(s=d[e._id])&&s.isActive&&(i=!this._updateScrollRequest(s))&&(t=!0,this._cancelItemScroll(e,2)),t&&(this._requestOverlapCheck[e._id]=0,this._checkItemOverlap(e,o,i))},i.prototype._requestAction=function(t,o){for(var n=this._actions,i=1===o,e=null,s=0;s<n.length;s++){if(e=n[s],t.element===e.element){if(i?e.requestX:e.requestY)return void this._cancelItemScroll(t.item,o);break}e=null}e||(e=this._actionPool.pick()),e.element=t.element,e.addRequest(t),t.tick(this._tickDeltaTime),n.push(e)},i.prototype._updateActions=function(){var e,t,n,s,o=this._items,i=this._requests,a=this._actions;for(e=0;e<o.length;e++)t=o[e]._id,n=i[1][t],s=i[2][t],n&&this._requestAction(n,1),s&&this._requestAction(s,2);for(e=0;e<a.length;e++)a[e].computeScrollValues()},i.prototype._applyActions=function(){var e,s,t=this._actions,n=this._items;if(t.length){for(e=0;e<t.length;e++)t[e].scroll(),this._actionPool.release(t[e]);for(t.length=0,e=0;e<n.length;e++)(s=n[e])._drag&&s._drag._prepareScroll();for(e=0;e<n.length;e++)tP(n[e])}},i.prototype._updateDragDirection=function(t){var i,a,e=this._dragPositions[t._id],n=this._dragDirections[t._id],s=t._drag._left,o=t._drag._top;e.length&&(i=e[0],a=e[1],n[0]=s>i?5:s<i?9:n[0]||0,n[1]=o>a?6:o<a?10:n[1]||0),e[0]=s,e[1]=o},i.prototype.addItem=function(e){this._isDestroyed||-1===this._items.indexOf(e)&&(this._items.push(e),this._requestOverlapCheck[e._id]=this._tickTime,this._dragDirections[e._id]=[0,0],this._dragPositions[e._id]=[],this._isTicking||this._startTicking())},i.prototype.updateItem=function(e){this._isDestroyed||this._dragDirections[e._id]&&(this._updateDragDirection(e),this._requestOverlapCheck[e._id]||(this._requestOverlapCheck[e._id]=this._tickTime))},i.prototype.removeItem=function(t){if(!this._isDestroyed){var e,n=this._items.indexOf(t);-1!==n&&(e=t._id,this._requests[1][e]&&(this._cancelItemScroll(t,1),delete this._requests[1][e]),this._requests[2][e]&&(this._cancelItemScroll(t,2),delete this._requests[2][e]),delete this._requestOverlapCheck[e],delete this._dragPositions[e],delete this._dragDirections[e],this._items.splice(n,1),this._isTicking&&!this._items.length&&this._stopTicking())}},i.prototype.isItemScrollingX=function(t){var e=this._requests[1][t._id];return!!e&&!!e.isActive},i.prototype.isItemScrollingY=function(t){var e=this._requests[2][t._id];return!!e&&!!e.isActive},i.prototype.isItemScrolling=function(e){return this.isItemScrollingX(e)||this.isItemScrollingY(e)},i.prototype.destroy=function(){if(!this._isDestroyed){for(var t=this._items.slice(0),e=0;e<t.length;e++)this.removeItem(t[e]);this._actions.length=0,this._requestPool.reset(),this._actionPool.reset(),this._isDestroyed=!0}},N=window.Element.prototype,eH=N.matches||N.matchesSelector||N.webkitMatchesSelector||N.mozMatchesSelector||N.msMatchesSelector||N.oMatchesSelector||function(){return!1};function et(e,t){return eH.call(e,t)}function d(e,t){t&&(e.classList?e.classList.add(t):et(e,"."+t)||(e.className+=" "+t))}e8=[];function eA(t,s,n){var e="number"==typeof n?n:-1;e<0&&(e=t.length-e+1),t.splice.apply(t,e8.concat(e,0,s)),e8.length=0}function L(n,e,s){var t=Math.max(0,n.length-1+(s||0));return e>t?t:e<0?Math.max(t+e+1,0):e}function eT(e,s,o){if(!(e.length<2)){var t=L(e,s),n=L(e,o);t!==n&&e.splice(n,0,e.splice(t,1)[0])}}function ez(e,o,i){if(!(e.length<2)){var s,t=L(e,o),n=L(e,i);t!==n&&(s=e[t],e[t]=e[n],e[n]=s)}}var v=el(document.documentElement.style,"transform")||"transform",tR=/([A-Z])/g,tL=/^(webkit-|moz-|ms-|o-)/,tN=/^(-m-s-)/;function ek(t){var e=t.replace(tR,"-$1").toLowerCase();return e=(e=e.replace(tL,"-$1")).replace(tN,"-ms-")}eE=ek(v);function tD(t){var e,n=l(t,eE);return!!n&&"none"!==n&&(e=l(t,"display"),"inline"!==e&&"none"!==e)}function ej(n){for(var t=document,e=n||t;e&&e!==t&&"static"===l(e,"position")&&!tD(e);)e=e.parentElement||t;return e}var eC={},ex={},G={};function ty(t,s){var n,e=s||{};return e.left=0,e.top=0,t===document?e:(e.left=window.pageXOffset||0,e.top=window.pageYOffset||0,t.self===window.self||(n=t.getBoundingClientRect(),e.left+=n.left,e.top+=n.top,e.left+=u(t,"border-left-width"),e.top+=u(t,"border-top-width")),e)}function R(e,t,n){return G.left=0,G.top=0,e===t||n&&(e=ej(e))===(t=ej(t))||(ty(e,eC),ty(t,ex),G.left=ex.left-eC.left,G.top=ex.top-eC.top),G}function ey(e){return"auto"===e||"scroll"===e||"overlay"===e}function tz(e){return ey(l(e,"overflow"))||ey(l(e,"overflow-x"))||ey(l(e,"overflow-y"))}function eG(e,t){for(t=t||[];e&&e!==document;)e.getRootNode&&e instanceof DocumentFragment?e=e.getRootNode().host:(tz(e)&&t.push(e),e=e.parentNode);return t.push(window),t}var H={},tT=/^matrix3d/,tF=/([^,]*,){4}/,tS=/([^,]*,){12}/,tA=/[^,]*,/;function _(n){if(H.x=0,H.y=0,e=l(n,eE),!e||"none"===e)return H;var e,s=tT.test(e),t=e.replace(s?tS:tF,""),o=t.replace(tA,"");return H.x=parseFloat(t)||0,H.y=parseFloat(o)||0,H}function r(e,t){t&&(e.classList?e.classList.remove(t):et(e,"."+t)&&(e.className=(" "+e.className+" ").replace(" "+t+" "," ").trim()))}tr=/^(iPad|iPhone|iPod)/.test(window.navigator.platform)||/^Mac/.test(window.navigator.platform)&&window.navigator.maxTouchPoints>1,eb=!!tv()&&{passive:!0};function t(o){var i=o._element,a=o.getGrid(),n=a._settings;this._item=o,this._gridId=a._id,this._isDestroyed=!1,this._isMigrating=!1,this._startPredicate=s(n.dragStartPredicate)?n.dragStartPredicate:t.defaultStartPredicate,this._startPredicateState=0,this._startPredicateResult=void 0,this._isSortNeeded=!1,this._sortTimer=void 0,this._blockedSortIndex=null,this._sortX1=0,this._sortX2=0,this._sortY1=0,this._sortY2=0,this._reset(),this._preStartCheck=this._preStartCheck.bind(this),this._preEndCheck=this._preEndCheck.bind(this),this._onScroll=this._onScroll.bind(this),this._prepareStart=this._prepareStart.bind(this),this._applyStart=this._applyStart.bind(this),this._prepareMove=this._prepareMove.bind(this),this._applyMove=this._applyMove.bind(this),this._prepareScroll=this._prepareScroll.bind(this),this._applyScroll=this._applyScroll.bind(this),this._handleSort=this._handleSort.bind(this),this._handleSortDelayed=this._handleSortDelayed.bind(this),this._handle=n.dragHandle&&i.querySelector(n.dragHandle)||i,this._dragger=new e(this._handle,n.dragCssProps),this._dragger.on("start",this._preStartCheck),this._dragger.on("move",this._preStartCheck),this._dragger.on("cancel",this._preEndCheck),this._dragger.on("end",this._preEndCheck)}function td(o,t){var e,n,s={};if(Array.isArray(t))for(n=0;n<t.length;n++)s[e=t[n]]=l(o,ek(e));else for(e in t)s[e]=l(o,ek(e));return s}t.autoScroller=new i,t.defaultStartPredicate=function(o,t,i){var e,s,n=o._drag;if(t.isFirst&&t.srcEvent.button)return!1;if(!tr&&t.isFirst&&!0===t.srcEvent.isTrusted&&!1===t.srcEvent.defaultPrevented&&!1===t.srcEvent.cancelable)return!1;if(!t.isFinal)return e=n._startPredicateData,e||(s=i||n._getGrid()._settings.dragStartPredicate||{},n._startPredicateData=e={distance:Math.max(s.distance,0)||0,delay:Math.max(s.delay,0)||0}),e.delay&&(e.event=t,e.delayTimer||(e.delayTimer=window.setTimeout(function(){e.delay=0,n._resolveStartPredicate(e.event)&&(n._forceResolveStartPredicate(e.event),n._resetStartPredicate())},e.delay))),n._resolveStartPredicate(t);n._finishStartPredicate(t)},t.defaultSortPredicate=(y={},m={},V={},ei=[],function(n,o){var c=n._drag,u=c._getGrid(),i=o&&"number"==typeof o.threshold?o.threshold:50,_=o&&o.action===g?g:z,j=o&&o.migrateAction===g?g:z,i=Math.min(Math.max(i,1),100);if(y.width=n._width,y.height=n._height,y.left=c._clientX,y.top=c._clientY,e=function(b,f,v){var e,t,n,o,i,a,r,c,d,u,p=null,h=f._settings.dragSort,g=-1;if(!0===h?(ei[0]=f,n=ei):s(h)&&(n=h.call(f,b)),!n||!Array.isArray(n)||!n.length)return p;for(d=0;d<n.length;d++)if(!(t=n[d])._isDestroyed){for(t._updateBoundingRect(),i=Math.max(0,t._left),o=Math.max(0,t._top),r=Math.min(window.innerWidth,t._right),a=Math.min(window.innerHeight,t._bottom),e=t._element.parentNode;e&&e!==document&&e!==document.documentElement&&e!==document.body;)if(e.getRootNode&&e instanceof DocumentFragment)e=e.getRootNode().host;else{if("visible"!==l(e,"overflow")&&(c=e.getBoundingClientRect(),i=Math.max(i,c.left),o=Math.max(o,c.top),r=Math.min(r,c.right),a=Math.min(a,c.bottom)),"fixed"===l(e,"position"))break;e=e.parentNode}i>=r||o>=a||(m.left=i,m.top=o,m.width=r-i,m.height=a-o,(u=es(y,m))>v&&u>g&&(g=u,p=t))}return ei.length=0,p}(n,u,i),!e)return null;var e,t,a,h,f=n.getGrid()!==e,p=0,v=0,r=0,d=-1,b=!1;for(e===u?(y.left=c._gridX+n._marginLeft,y.top=c._gridY+n._marginTop):(e._updateBorders(1,0,1,0),p=e._left+e._borderLeft,v=e._top+e._borderTop),a=0;a<e._items.length;a++)(t=e._items[a])._isActive&&t!==n&&(b=!0,m.width=t._width,m.height=t._height,m.left=t._left+t._marginLeft+p,m.top=t._top+t._marginTop+v,(h=es(y,m))>r&&(d=a,r=h));return f&&r<i&&(d=b?d:0,r=i),r>=i?(V.grid=e,V.index=d,V.action=f?j:_,V):null}),t.prototype.stop=function(){if(this._isActive)if(this._isMigrating)this._finishMigration();else{if(e=this._item,n=e._id,t.autoScroller.removeItem(e),te(n),tc(n),t4(n),this._cancelSort(),this._isStarted){this._unbindScrollListeners();var e,n,s=e._element,o=this._getGrid(),i=o._settings.itemDraggingClass;s.parentNode!==o._element&&(o._element.appendChild(s),e._setTranslate(this._gridX,this._gridY),i&&s.clientWidth),r(s,i)}this._reset()}},t.prototype.sort=function(t){var e=this._item;this._isActive&&e._isActive&&this._dragMoveEvent&&(!0===t?this._handleSort():eh(e._id,this._handleSort))},t.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._dragger.destroy(),t.autoScroller.removeItem(this._item),this._isDestroyed=!0)},t.prototype._getGrid=function(){return eo[this._gridId]||null},t.prototype._reset=function(){this._isActive=!1,this._isStarted=!1,this._container=null,this._containingBlock=null,this._dragStartEvent=null,this._dragMoveEvent=null,this._dragPrevMoveEvent=null,this._scrollEvent=null,this._scrollers=[],this._left=0,this._top=0,this._gridX=0,this._gridY=0,this._clientX=0,this._clientY=0,this._scrollDiffX=0,this._scrollDiffY=0,this._moveDiffX=0,this._moveDiffY=0,this._containerDiffX=0,this._containerDiffY=0},t.prototype._bindScrollListeners=function(){var e,n,s=this._getGrid()._element,o=this._container,t=this._scrollers;if(t.length=0,eG(this._item._element.parentNode,t),o!==s)for(eG(s,n=[]),e=0;e<n.length;e++)t.indexOf(n[e])<0&&t.push(n[e]);for(e=0;e<t.length;e++)t[e].addEventListener("scroll",this._onScroll,eb)},t.prototype._unbindScrollListeners=function(){var e,t=this._scrollers;for(e=0;e<t.length;e++)t[e].removeEventListener("scroll",this._onScroll,eb);t.length=0},t.prototype._resolveStartPredicate=function(t){var e=this._startPredicateData;if(!(t.distance<e.distance||e.delay))return this._resetStartPredicate(),!0},t.prototype._forceResolveStartPredicate=function(e){this._isDestroyed||1!==this._startPredicateState||(this._startPredicateState=2,this._onStart(e))},t.prototype._finishStartPredicate=function(e){var t=this._item._element,n=Math.abs(e.deltaX)<2&&Math.abs(e.deltaY)<2&&e.deltaTime<200;this._resetStartPredicate(),n&&function(t){if("a"!==t.tagName.toLowerCase())return;var e,n=t.getAttribute("href");if(!n)return;e=t.getAttribute("target"),e&&"_self"!==e?window.open(n,e):window.location.href=n}(t)},t.prototype._resetHeuristics=function(e,t){this._blockedSortIndex=null,this._sortX1=this._sortX2=e,this._sortY1=this._sortY2=t},t.prototype._checkHeuristics=function(n,s){if(t=this._getGrid()._settings.dragSortHeuristics,e=t.minDragDistance,e<=0)return this._blockedSortIndex=null,!0;var e,t,o=n-this._sortX2,i=s-this._sortY2,a=e>3&&t.minBounceBackAngle>0;if(a||(this._blockedSortIndex=null),Math.abs(o)>e||Math.abs(i)>e){if(a){var r=Math.atan2(o,i),c=Math.atan2(this._sortX2-this._sortX1,this._sortY2-this._sortY1),l=Math.atan2(Math.sin(r-c),Math.cos(r-c));Math.abs(l)>t.minBounceBackAngle&&(this._blockedSortIndex=null)}return this._sortX1=this._sortX2,this._sortY1=this._sortY2,this._sortX2=n,this._sortY2=s,!0}return!1},t.prototype._resetStartPredicate=function(){var e=this._startPredicateData;e&&(e.delayTimer&&(e.delayTimer=window.clearTimeout(e.delayTimer)),this._startPredicateData=null)},t.prototype._handleSort=function(){if(this._isActive){var n,s,e=this._getGrid()._settings;if(!e.dragSort||!e.dragAutoScroll.sortDuringScroll&&t.autoScroller.isItemScrolling(this._item))return this._sortX1=this._sortX2=this._gridX,this._sortY1=this._sortY2=this._gridY,this._isSortNeeded=!0,void(void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)));s=this._checkHeuristics(this._gridX,this._gridY),(this._isSortNeeded||s)&&(n=e.dragSortHeuristics.sortInterval,n<=0||this._isSortNeeded?(this._isSortNeeded=!1,void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)),this._checkOverlap()):void 0===this._sortTimer&&(this._sortTimer=window.setTimeout(this._handleSortDelayed,n)))}},t.prototype._handleSortDelayed=function(){this._isSortNeeded=!0,this._sortTimer=void 0,eh(this._item._id,this._handleSort)},t.prototype._cancelSort=function(){var e;this._isSortNeeded=!1,void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)),e=this._item._id,o.remove(1,eW+e)},t.prototype._finishSort=function(){var e=this._getGrid()._settings.dragSort&&(this._isSortNeeded||void 0!==this._sortTimer);this._cancelSort(),e&&this._checkOverlap()},t.prototype._checkOverlap=function(){if(this._isActive){var e,n,i,a,r,c,l,d,o=this._item,u=this._getGrid()._settings;(r=s(u.dragSortPredicate)?u.dragSortPredicate(o,this._dragMoveEvent):t.defaultSortPredicate(o,u.dragSortPredicate))&&"number"==typeof r.index&&(l=r.action===g?g:z,d=(e=o.getGrid())!==(n=r.grid||e),a=e._items.indexOf(o),i=L(n._items,r.index,d&&l===z?1:0),(d||i!==this._blockedSortIndex)&&(d?(this._blockedSortIndex=null,c=n._items[i],e._hasListeners(E)&&e._emit(E,{item:o,fromGrid:e,fromIndex:a,toGrid:n,toIndex:i}),n._hasListeners(e1)&&n._emit(e1,{item:o,fromGrid:e,fromIndex:a,toGrid:n,toIndex:i}),o._gridId=n._id,this._isMigrating=o._gridId!==this._gridId,e._items.splice(a,1),eA(n._items,o,i),o._sortData=null,e._hasListeners(e0)&&e._emit(e0,{item:o,fromGrid:e,fromIndex:a,toGrid:n,toIndex:i}),n._hasListeners(e4)&&n._emit(e4,{item:o,fromGrid:e,fromIndex:a,toGrid:n,toIndex:i}),l===g&&c&&c.isActive()&&n._items.indexOf(c)>-1&&n.send(c,e,a,{appendTo:this._container||document.body,layoutSender:!1,layoutReceiver:!1}),e.layout(),n.layout()):a!==i&&(this._blockedSortIndex=a,(l===g?ez:eT)(e._items,a,i),e._hasListeners(e2)&&e._emit(e2,{item:o,fromIndex:a,toIndex:i,action:l}),e.layout())))}},t.prototype._finishMigration=function(){var o,c,e=this._item,h=e._dragRelease,s=e._element,l=e._isActive,f=e.getGrid(),m=f._element,n=f._settings,i=n.dragContainer||m,a=this._getGrid()._settings,u=s.parentNode,p=l?a.itemVisibleClass:a.itemHiddenClass,g=l?n.itemVisibleClass:n.itemHiddenClass;this._isMigrating=!1,this.destroy(),a.itemClass!==n.itemClass&&(r(s,a.itemClass),d(s,n.itemClass)),p!==g&&(r(s,p),d(s,g)),i!==u&&(i.appendChild(s),o=R(u,i,!0),(c=_(s)).x-=o.left,c.y-=o.top),e._refreshDimensions(),o=R(i,m,!0),h._containerDiffX=o.left,h._containerDiffY=o.top,e._drag=n.dragEnabled?new t(e):null,i!==u&&e._setTranslate(c.x,c.y),e._visibility.setStyles(l?n.visibleStyles:n.hiddenStyles),h.start()},t.prototype._preStartCheck=function(e){0===this._startPredicateState&&(this._startPredicateState=1),1===this._startPredicateState?(this._startPredicateResult=this._startPredicate(this._item,e),!0===this._startPredicateResult?(this._startPredicateState=2,this._onStart(e)):!1===this._startPredicateResult&&(this._resetStartPredicate(e),this._dragger._reset(),this._startPredicateState=0)):2===this._startPredicateState&&this._isActive&&this._onMove(e)},t.prototype._preEndCheck=function(e){var t=2===this._startPredicateState;this._startPredicate(this._item,e),this._startPredicateState=0,t&&this._isActive&&(this._isStarted?this._onEnd(e):this.stop())},t.prototype._onStart=function(a){var e,s,i,n=this._item;n._isActive&&(this._isActive=!0,this._dragStartEvent=a,t.autoScroller.addItem(n),e=n._id,s=this._prepareStart,i=this._applyStart,o.add(0,to+e,s),o.add(2,t2+e,i))},t.prototype._prepareStart=function(){if(this._isActive&&(e=this._item,e._isActive)){var e,s,o=e._element,i=this._getGrid(),l=i._settings,t=i._element,n=l.dragContainer||t,a=ej(n),r=_(o),c=o.getBoundingClientRect(),d=n!==t;this._container=n,this._containingBlock=a,this._clientX=c.left,this._clientY=c.top,this._left=this._gridX=r.x,this._top=this._gridY=r.y,this._scrollDiffX=this._scrollDiffY=0,this._moveDiffX=this._moveDiffY=0,this._resetHeuristics(this._gridX,this._gridY),d&&(s=R(a,t),this._containerDiffX=s.left,this._containerDiffY=s.top)}},t.prototype._applyStart=function(){if(this._isActive&&(e=this._item,e._isActive)){var e,n=this._getGrid(),s=e._element,o=e._dragRelease,t=e._migrate,i=this._container!==n._element;e.isPositioning()&&e._layout.stop(!0,this._left,this._top),t._isActive&&(this._left-=t._containerDiffX,this._top-=t._containerDiffY,this._gridX-=t._containerDiffX,this._gridY-=t._containerDiffY,t.stop(!0,this._left,this._top)),e.isReleasing()&&o._reset(),n._settings.dragPlaceholder.enabled&&e._dragPlaceholder.create(),this._isStarted=!0,n._emit("dragInit",e,this._dragStartEvent),i&&(s.parentNode===this._container?(this._gridX-=this._containerDiffX,this._gridY-=this._containerDiffY):(this._left+=this._containerDiffX,this._top+=this._containerDiffY,this._container.appendChild(s),e._setTranslate(this._left,this._top))),d(s,n._settings.itemDraggingClass),this._bindScrollListeners(),n._emit("dragStart",e,this._dragStartEvent)}},t.prototype._onMove=function(i){var e,n,s,t=this._item;t._isActive?(this._dragMoveEvent=i,e=t._id,n=this._prepareMove,s=this._applyMove,o.add(0,tn+e,n),o.add(2,tt+e,s),eh(t._id,this._handleSort)):this.stop()},t.prototype._prepareMove=function(){if(this._isActive&&this._item._isActive){var e,t,s=this._getGrid()._settings.dragAxis,n=this._dragMoveEvent,o=this._dragPrevMoveEvent||this._dragStartEvent||n;"y"!==s&&(e=n.clientX-o.clientX,this._left=this._left-this._moveDiffX+e,this._gridX=this._gridX-this._moveDiffX+e,this._clientX=this._clientX-this._moveDiffX+e,this._moveDiffX=e),"x"!==s&&(t=n.clientY-o.clientY,this._top=this._top-this._moveDiffY+t,this._gridY=this._gridY-this._moveDiffY+t,this._clientY=this._clientY-this._moveDiffY+t,this._moveDiffY=t),this._dragPrevMoveEvent=n}},t.prototype._applyMove=function(){if(this._isActive){var e=this._item;e._isActive&&(this._moveDiffX=this._moveDiffY=0,e._setTranslate(this._left,this._top),this._getGrid()._emit("dragMove",e,this._dragMoveEvent),t.autoScroller.updateItem(e))}},t.prototype._onScroll=function(i){var e,n,s,t=this._item;t._isActive?(this._scrollEvent=i,e=t._id,n=this._prepareScroll,s=this._applyScroll,o.add(0,eX+e,n),o.add(2,eK+e,s),eh(t._id,this._handleSort)):this.stop()},t.prototype._prepareScroll=function(){if(this._isActive&&(e=this._item,e._isActive)){var e,t,n,s,a=e._element,o=this._getGrid()._element,i=a.getBoundingClientRect();this._container!==o&&(t=R(this._containingBlock,o),this._containerDiffX=t.left,this._containerDiffY=t.top),n=this._clientX-this._moveDiffX-i.left,this._left=this._left-this._scrollDiffX+n,this._scrollDiffX=n,s=this._clientY-this._moveDiffY-i.top,this._top=this._top-this._scrollDiffY+s,this._scrollDiffY=s,this._gridX=this._left-this._containerDiffX,this._gridY=this._top-this._containerDiffY}},t.prototype._applyScroll=function(){if(this._isActive){var e=this._item;e._isActive&&(this._scrollDiffX=this._scrollDiffY=0,e._setTranslate(this._left,this._top),this._getGrid()._emit("dragScroll",e,this._scrollEvent))}},t.prototype._onEnd=function(o){var e=this._item,i=e._element,s=this._getGrid(),a=s._settings,n=e._dragRelease;e._isActive?(te(e._id),tc(e._id),t4(e._id),this._finishSort(),this._unbindScrollListeners(),n._containerDiffX=this._containerDiffX,n._containerDiffY=this._containerDiffY,this._reset(),r(i,a.itemDraggingClass),t.autoScroller.removeItem(e),s._emit("dragEnd",e,o),this._isMigrating?this._finishMigration():n.start()):this.stop()},tu=/^(webkit|moz|ms|o|Webkit|Moz|MS|O)(?=[A-Z])/,ev={};function tk(t){var e=ev[t];return e||((e=t.replace(tu,""))!==t&&(e=e[0].toLowerCase()+e.slice(1)),ev[t]=e,e)}function I(n,e){for(var t in e)n.style[t]=e[t]}th=!!Element&&!!s(Element.prototype.animate),eg=!!(Element&&(e_=Element.prototype.animate,ea=window.Symbol,e_&&s(ea)&&s(ea.toString)&&ea(e_).toString().indexOf("[native code]")>-1));function b(e){this._element=e,this._animation=null,this._duration=0,this._easing="",this._callback=null,this._props=[],this._values=[],this._isDestroyed=!1,this._onFinish=this._onFinish.bind(this)}function tf(t,s){var e,n={};for(e in t)n[s?e:tk(e)]=t[e];return n}function M(e,t){return"translateX("+e+"px) translateY("+t+"px)"}function c(e){this._item=e,this._animation=new b,this._element=null,this._className="",this._didMigrate=!1,this._resetAfterLayout=!1,this._left=0,this._top=0,this._transX=0,this._transY=0,this._nextTransX=0,this._nextTransY=0,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this),this._updateDimensions=this._updateDimensions.bind(this),this._onLayoutStart=this._onLayoutStart.bind(this),this._onLayoutEnd=this._onLayoutEnd.bind(this),this._onReleaseEnd=this._onReleaseEnd.bind(this),this._onMigrate=this._onMigrate.bind(this),this._onHide=this._onHide.bind(this)}function S(e){this._item=e,this._isActive=!1,this._isDestroyed=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0}b.prototype.start=function(f,e,m){if(!this._isDestroyed){if(i=this._element,t=m||{},!th)return I(i,e),this._callback=s(t.onFinish)?t.onFinish:null,void this._onFinish();var t,n,i,l,h,d=this._animation,a=this._props,u=this._values,r=t.duration||300,c=t.easing||"ease",o=!1;if(d&&(l=0,r===this._duration&&c===this._easing||(o=!0),!o)){for(n in e)if(++l,-1===(h=a.indexOf(n))||e[n]!==u[h]){o=!0;break}l!==a.length&&(o=!0)}if(o&&d.cancel(),this._callback=s(t.onFinish)?t.onFinish:null,!d||o){for(n in a.length=u.length=0,e)a.push(n),u.push(e[n]);this._duration=r,this._easing=c,this._animation=i.animate([tf(f,eg),tf(e,eg)],{duration:r,easing:c}),this._animation.onfinish=this._onFinish,I(i,e)}}},b.prototype.stop=function(){!this._isDestroyed&&this._animation&&(this._animation.cancel(),this._animation=this._callback=null,this._props.length=this._values.length=0)},b.prototype.getCurrentStyles=function(){return td(element,currentProps)},b.prototype.isAnimating=function(){return!!this._animation},b.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._element=null,this._isDestroyed=!0)},b.prototype._onFinish=function(){var e=this._callback;this._animation=this._callback=null,this._props.length=this._values.length=0,e&&e()},c.prototype._updateDimensions=function(){this.isActive()&&I(this._element,{width:this._item._width+"px",height:this._item._height+"px"})},c.prototype._onLayoutStart=function(m,c){if(e=this._item,-1!==m.indexOf(e)){{var e,n=e._left,s=e._top,h=this._left,u=this._top;if(this._left=n,this._top=s,c||this._didMigrate||h!==n||u!==s){var t,l,d,i=n+e._marginLeft,a=s+e._marginTop,r=e.getGrid();if(!(!c&&r._settings.layoutDuration>0)||this._didMigrate)return eB(e._id),this._element.style[v]=M(i,a),this._animation.stop(),void(this._didMigrate&&(r.getElement().appendChild(this._element),this._didMigrate=!1));this._nextTransX=i,this._nextTransY=a,t=e._id,l=this._setupAnimation,d=this._startAnimation,o.add(0,eD+t,l),o.add(2,eF+t,d)}}}else this.reset()},c.prototype._setupAnimation=function(){if(this.isActive()){var e=_(this._element);this._transX=e.x,this._transY=e.y}},c.prototype._startAnimation=function(){if(this.isActive()){var e=this._animation,s=this._transX,o=this._transY,t=this._nextTransX,n=this._nextTransY;if(s!==t||o!==n){var i=this._item.getGrid()._settings,a={},r={};a[v]=M(s,o),r[v]=M(t,n),e.start(a,r,{duration:i.layoutDuration,easing:i.layoutEasing,onFinish:this._onLayoutEnd})}else e.isAnimating()&&(this._element.style[v]=M(t,n),e.stop())}},c.prototype._onLayoutEnd=function(){this._resetAfterLayout&&this.reset()},c.prototype._onReleaseEnd=function(e){if(e._id===this._item._id){if(!this._animation.isAnimating())return void this.reset();this._resetAfterLayout=!0}},c.prototype._onMigrate=function(n){if(n.item===this._item){var e=this._item.getGrid(),t=n.toGrid;e.off(W,this._onReleaseEnd),e.off(A,this._onLayoutStart),e.off(E,this._onMigrate),e.off(K,this._onHide),t.on(W,this._onReleaseEnd),t.on(A,this._onLayoutStart),t.on(E,this._onMigrate),t.on(K,this._onHide),this._didMigrate=!0}},c.prototype._onHide=function(e){e.indexOf(this._item)>-1&&this.reset()},c.prototype.create=function(){if(this.isActive())this._resetAfterLayout=!1;else{var t,e=this._item,n=e.getGrid(),o=n._settings,i=this._animation;this._left=e._left,this._top=e._top,t=s(o.dragPlaceholder.createElement)?o.dragPlaceholder.createElement(e):document.createElement("div"),this._element=t,i._element=t,this._className=o.itemPlaceholderClass||"",this._className&&d(t,this._className),I(t,{position:"absolute",left:"0px",top:"0px",width:e._width+"px",height:e._height+"px"}),t.style[v]=M(e._left+e._marginLeft,e._top+e._marginTop),n.on(A,this._onLayoutStart),n.on(W,this._onReleaseEnd),n.on(E,this._onMigrate),n.on(K,this._onHide),s(o.dragPlaceholder.onCreate)&&o.dragPlaceholder.onCreate(e,t),n.getElement().appendChild(t)}},c.prototype.reset=function(){if(this.isActive()){var i,t=this._element,n=this._item,e=n.getGrid(),a=e._settings,c=this._animation;this._resetAfterLayout=!1,eB(n._id),i=n._id,o.remove(2,eM+i),c.stop(),c._element=null,e.off(W,this._onReleaseEnd),e.off(A,this._onLayoutStart),e.off(E,this._onMigrate),e.off(K,this._onHide),this._className&&(r(t,this._className),this._className=""),t.parentNode.removeChild(t),this._element=null,s(a.dragPlaceholder.onRemove)&&a.dragPlaceholder.onRemove(n,t)}},c.prototype.isActive=function(){return!!this._element},c.prototype.getElement=function(){return this._element},c.prototype.updateDimensions=function(){var e,t;this.isActive()&&(e=this._item._id,t=this._updateDimensions,o.add(2,eM+e,t))},c.prototype.destroy=function(){this.reset(),this._animation.destroy(),this._item=this._animation=null},S.prototype.start=function(){if(!this._isDestroyed&&!this._isActive){var e=this._item,t=e.getGrid(),n=t._settings;this._isActive=!0,d(e._element,n.itemReleasingClass),n.dragRelease.useDragContainer||this._placeToGrid(),t._emit("dragReleaseStart",e),t._nextLayoutData||e._layout.start(!1)}},S.prototype.stop=function(s,t,n){if(!this._isDestroyed&&this._isActive){var o,e=this._item,i=e.getGrid();s||void 0!==t&&void 0!==n||(t=e._left,n=e._top),o=this._placeToGrid(t,n),this._reset(o),s||i._emit(W,e)}},S.prototype.isJustReleased=function(){return this._isActive&&!1===this._isPositioningStarted},S.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)},S.prototype._placeToGrid=function(e,t){if(!this._isDestroyed){var o,n=this._item,s=n._element,i=n.getGrid()._element,a=!1;return s.parentNode!==i&&((void 0===e||void 0===t)&&(o=_(s),e=o.x-this._containerDiffX,t=o.y-this._containerDiffY),i.appendChild(s),n._setTranslate(e,t),a=!0),this._containerDiffX=0,this._containerDiffY=0,a}},S.prototype._reset=function(n){if(!this._isDestroyed){var e=this._item,t=e.getGrid()._settings.itemReleasingClass;this._isActive=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0,t&&(n&&e._element.clientWidth,r(e._element,t))}};function O(e){var t=e._element,n=t.style;this._item=e,this._isActive=!1,this._isDestroyed=!1,this._isInterrupted=!1,this._currentStyles={},this._targetStyles={},this._nextLeft=0,this._nextTop=0,this._offsetLeft=0,this._offsetTop=0,this._skipNextAnimation=!1,this._animOptions={onFinish:this._finish.bind(this),duration:0,easing:0},n.left="0px",n.top="0px",e._setTranslate(0,0),this._animation=new b(t),this._queue="layout-"+e._id,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this)}function J(e){this._item=e,this._isActive=!1,this._isDestroyed=!1,this._container=!1,this._containerDiffX=0,this._containerDiffY=0}function f(e){var t=e._isActive,s=e._element,o=s.children[0],n=e.getGrid()._settings;if(!o)throw new Error("No valid child element found within item element.");this._item=e,this._isDestroyed=!1,this._isHidden=!t,this._isHiding=!1,this._isShowing=!1,this._childElement=o,this._currentStyleProps=[],this._animation=new b(o),this._queue="visibility-"+e._id,this._finishShow=this._finishShow.bind(this),this._finishHide=this._finishHide.bind(this),s.style.display=t?"":"none",d(s,t?n.itemVisibleClass:n.itemHiddenClass),this.setStyles(t?n.visibleStyles:n.hiddenStyles)}O.prototype.start=function(h,l){if(!this._isDestroyed){var n,r,u,e=this._item,c=e._dragRelease,t=e.getGrid()._settings,d=this._isActive,i=c.isJustReleased(),a=i?t.dragRelease.duration:t.layoutDuration,m=i?t.dragRelease.easing:t.layoutEasing,f=!h&&!this._skipNextAnimation&&a>0;if(d&&(eU(e._id),e._emitter.burst(this._queue,!0,e)),i&&(c._isPositioningStarted=!0),s(l)&&e._emitter.on(this._queue,l),this._skipNextAnimation=!1,!f)return this._updateOffsets(),e._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),void this._finish();this._animation.isAnimating()&&(this._animation._animation.onfinish=null),this._isActive=!0,this._animOptions.easing=m,this._animOptions.duration=a,this._isInterrupted=d,n=e._id,u=this._setupAnimation,r=this._startAnimation,o.add(0,t0+n,u),o.add(2,tl+n,r)}},O.prototype.stop=function(o,t,n){if(!this._isDestroyed&&this._isActive){var s,e=this._item;(eU(e._id),this._animation.isAnimating())&&((void 0===t||void 0===n)&&(s=_(e._element),t=s.x,n=s.y),e._setTranslate(t,n),this._animation.stop()),r(e._element,e.getGrid()._settings.itemPositioningClass),this._isActive=!1,o&&e._emitter.burst(this._queue,!0,e)}},O.prototype.destroy=function(){if(!this._isDestroyed){var e=this._item._element.style;this.stop(!0,0,0),this._item._emitter.clear(this._queue),this._animation.destroy(),e[v]="",e.left="",e.top="",this._item=null,this._currentStyles=null,this._targetStyles=null,this._animOptions=null,this._isDestroyed=!0}},O.prototype._updateOffsets=function(){if(!this._isDestroyed){var n=this._item,e=n._migrate,t=n._dragRelease;this._offsetLeft=t._isActive?t._containerDiffX:e._isActive?e._containerDiffX:0,this._offsetTop=t._isActive?t._containerDiffY:e._isActive?e._containerDiffY:0,this._nextLeft=this._item._left+this._offsetLeft,this._nextTop=this._item._top+this._offsetTop}},O.prototype._finish=function(){if(!this._isDestroyed){var e=this._item,t=e._migrate,n=e._dragRelease;e._tX=this._nextLeft,e._tY=this._nextTop,this._isActive&&(this._isActive=!1,r(e._element,e.getGrid()._settings.itemPositioningClass)),n._isActive&&n.stop(),t._isActive&&t.stop(),e._emitter.burst(this._queue,!1,e)}},O.prototype._setupAnimation=function(){var t,e=this._item;(void 0===e._tX||void 0===e._tY)&&(t=_(e._element),e._tX=t.x,e._tY=t.y)},O.prototype._startAnimation=function(){var t,n,e=this._item,s=e.getGrid()._settings,o=this._animOptions.duration<=0;if(this._updateOffsets(),t=Math.abs(e._left-(e._tX-this._offsetLeft)),n=Math.abs(e._top-(e._tY-this._offsetTop)),o||t<2&&n<2)return(t||n||this._isInterrupted)&&e._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),void this._finish();this._isInterrupted||d(e._element,s.itemPositioningClass),this._currentStyles[v]=M(e._tX,e._tY),this._targetStyles[v]=M(this._nextLeft,this._nextTop),e._tX=e._tY=void 0,this._animation.start(this._currentStyles,this._targetStyles,this._animOptions)},J.prototype.start=function(n,y,A){if(!this._isDestroyed){var i,a,l,h,p,g,w,O,C,k,e=this._item,o=e._element,b=e.isActive(),j=e.isVisible(),s=e.getGrid(),f=s._settings,c=n._settings,x=n._element,v=n._items,u=s._items.indexOf(e),m=A||document.body;if("number"==typeof y)l=L(v,y,1);else{if(!(O=n.getItem(y)))return;l=v.indexOf(O)}(e.isPositioning()||this._isActive||e.isReleasing())&&(i=(h=_(o)).x,a=h.y),e.isPositioning()&&e._layout.stop(!0,i,a),this._isActive&&(i-=this._containerDiffX,a-=this._containerDiffY,this.stop(!0,i,a)),e.isReleasing()&&(i-=e._dragRelease._containerDiffX,a-=e._dragRelease._containerDiffY,e._dragRelease.stop(!0,i,a)),e._visibility.stop(!0),e._drag&&e._drag.destroy(),s._hasListeners(E)&&s._emit(E,{item:e,fromGrid:s,fromIndex:u,toGrid:n,toIndex:l}),n._hasListeners(e1)&&n._emit(e1,{item:e,fromGrid:s,fromIndex:u,toGrid:n,toIndex:l}),f.itemClass!==c.itemClass&&(r(o,f.itemClass),d(o,c.itemClass)),(w=j?f.itemVisibleClass:f.itemHiddenClass)!==(k=j?c.itemVisibleClass:c.itemHiddenClass)&&(r(o,w),d(o,k)),s._items.splice(u,1),eA(v,e,l),e._gridId=n._id,b?m!==(C=o.parentNode)&&(m.appendChild(o),g=R(m,C,!0),h||(i=(h=_(o)).x,a=h.y),e._setTranslate(i+g.left,a+g.top)):x.appendChild(o),e._visibility.setStyles(j?c.visibleStyles:c.hiddenStyles),b&&(p=R(m,x,!0)),e._refreshDimensions(),e._sortData=null,e._drag=c.dragEnabled?new t(e):null,b?(this._isActive=!0,this._container=m,this._containerDiffX=p.left,this._containerDiffY=p.top):(this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0),s._hasListeners(e0)&&s._emit(e0,{item:e,fromGrid:s,fromIndex:u,toGrid:n,toIndex:l}),n._hasListeners(e4)&&n._emit(e4,{item:e,fromGrid:s,fromIndex:u,toGrid:n,toIndex:l})}},J.prototype.stop=function(a,t,n){if(!this._isDestroyed&&this._isActive){var o,e=this._item,i=e._element,s=e.getGrid()._element;this._container!==s&&(void 0!==t&&void 0!==n||(a?(t=(o=_(i)).x-this._containerDiffX,n=o.y-this._containerDiffY):(t=e._left,n=e._top)),s.appendChild(i),e._setTranslate(t,n)),this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0}},J.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)},f.prototype.show=function(o,i){if(!this._isDestroyed){var e=this._item,n=e._element,t=s(i)?i:null,a=e.getGrid()._settings;this._isShowing||this._isHidden?!this._isShowing||o?(this._isShowing||(e._emitter.burst(this._queue,!0,e),r(n,a.itemHiddenClass),d(n,a.itemVisibleClass),this._isHiding||(n.style.display="")),t&&e._emitter.on(this._queue,t),this._isShowing=!0,this._isHiding=this._isHidden=!1,this._startAnimation(!0,o,this._finishShow)):t&&e._emitter.on(this._queue,t):t&&t(!1,e)}},f.prototype.hide=function(n,o){if(!this._isDestroyed){var e=this._item,i=e._element,t=s(o)?o:null,a=e.getGrid()._settings;this._isHiding||!this._isHidden?!this._isHiding||n?(this._isHiding||(e._emitter.burst(this._queue,!0,e),d(i,a.itemHiddenClass),r(i,a.itemVisibleClass)),t&&e._emitter.on(this._queue,t),this._isHidden=this._isHiding=!0,this._isShowing=!1,this._startAnimation(!1,n,this._finishHide)):t&&e._emitter.on(this._queue,t):t&&t(!1,e)}},f.prototype.stop=function(t){if(!this._isDestroyed&&(this._isHiding||this._isShowing)){var e=this._item;eq(e._id),this._animation.stop(),t&&e._emitter.burst(this._queue,!0,e)}},f.prototype.setStyles=function(t){var e,n=this._childElement,s=this._currentStyleProps;for(e in this._removeCurrentStyles(),t)s.push(e),n.style[e]=t[e]},f.prototype.destroy=function(){if(!this._isDestroyed){var e=this._item,t=e._element,n=e.getGrid()._settings;this.stop(!0),e._emitter.clear(this._queue),this._animation.destroy(),this._removeCurrentStyles(),r(t,n.itemVisibleClass),r(t,n.itemHiddenClass),t.style.display="",this._isHiding=this._isShowing=!1,this._isDestroyed=this._isHidden=!0}},f.prototype._startAnimation=function(r,p,t){if(!this._isDestroyed){var i,l,u,h,a=this._item,s=this._animation,c=this._childElement,e=a.getGrid()._settings,n=r?e.visibleStyles:e.hiddenStyles,d=r?e.showDuration:e.hideDuration,m=r?e.showEasing:e.hideEasing,f=p||d<=0;if(n){if(eq(a._id),f)return I(c,n),s.stop(),void(t&&t());s.isAnimating()&&(s._animation.onfinish=null),i=a._id,u=function(){l=td(c,n)},h=function(){s.start(l,n,{duration:d,easing:m,onFinish:t})},o.add(0,ta+i,u),o.add(2,ti+i,h)}else t&&t()}},f.prototype._finishShow=function(){this._isHidden||(this._isShowing=!1,this._item._emitter.burst(this._queue,!1,this._item))},f.prototype._finishHide=function(){if(this._isHidden){var e=this._item;this._isHiding=!1,e._layout.stop(!0,0,0),e._element.style.display="none",e._emitter.burst(this._queue,!1,e)}},f.prototype._removeCurrentStyles=function(){for(var n=this._childElement,e=this._currentStyleProps,t=0;t<e.length;t++)n.style[e[t]]="";e.length=0},t9=0;function tb(){return++t9}function a(n,e,s){var o=n._settings;if(T){if(T.has(e))throw new Error("You can only create one Muuri Item per element!");T.set(e,this)}this._id=tb(),this._gridId=n._id,this._element=e,this._isDestroyed=!1,this._left=0,this._top=0,this._width=0,this._height=0,this._marginLeft=0,this._marginRight=0,this._marginTop=0,this._marginBottom=0,this._tX=void 0,this._tY=void 0,this._sortData=null,this._emitter=new h,e.parentNode!==n._element&&n._element.appendChild(e),d(e,o.itemClass),"boolean"!=typeof s&&(s="none"!==l(e,"display")),this._isActive=s,this._visibility=new f(this),this._layout=new O(this),this._migrate=new J(this),this._drag=o.dragEnabled?new t(this):null,this._dragRelease=new S(this),this._dragPlaceholder=new c(this)}function ts(d){var n,o,i,a,r,l,e=.001,s=.5;function c(e){return((1e3*e+.5<<0)/10<<0)/100}function t(){this.currentRects=[],this.nextRects=[],this.rectTarget={},this.rectStore=[],this.slotSizes=[],this.rectId=0,this.slotIndex=-1,this.slotData={left:0,top:0,width:0,height:0},this.sortRectsLeftTop=this.sortRectsLeftTop.bind(this),this.sortRectsTopLeft=this.sortRectsTopLeft.bind(this)}return(t.prototype.computeLayout=function(n,l){var e,t,o,a,r,d,i=n.items,s=n.slots,p=!!(1&l),u=!!(2&l),h=!!(4&l),m=!!(8&l),g=!!(16&l),f="number"==typeof i[0];if(!i.length)return n;for(d=f?2:1,e=0;e<i.length;e+=d)f?(r=i[e],a=i[e+1]):(r=(o=i[e])._width+o._marginLeft+o._marginRight,a=o._height+o._marginTop+o._marginBottom),g&&(r=c(r),a=c(a)),t=this.computeNextSlot(n,r,a,p,u),u?t.left+t.width>n.width&&(n.width=t.left+t.width):t.top+t.height>n.height&&(n.height=t.top+t.height),s[++this.slotIndex]=t.left,s[++this.slotIndex]=t.top,(h||m)&&this.slotSizes.push(t.width,t.height);if(h)for(e=0;e<s.length;e+=2)s[e]=n.width-(s[e]+this.slotSizes[e]);if(m)for(e=1;e<s.length;e+=2)s[e]=n.height-(s[e]+this.slotSizes[e]);return this.slotSizes.length=0,this.currentRects.length=0,this.nextRects.length=0,this.rectStore.length=0,this.rectId=0,this.slotIndex=-1,n},t.prototype.computeNextSlot=function(n,p,f,h,c){var o,a,r,d,u,t=this.slotData,l=this.currentRects,i=this.nextRects,m=!1;for(i.length=0,t.left=null,t.top=null,t.width=p,t.height=f,a=0;a<l.length;a++)if((r=l[a])&&(o=this.getRect(r),t.width<=o.width+e&&t.height<=o.height+e)){t.left=o.left,t.top=o.top;break}if(null===t.left&&(c?(t.left=n.width,t.top=0):(t.left=0,t.top=n.height),h||(m=!0)),!c&&t.top+t.height>n.height+e&&(t.left>s&&i.push(this.addRect(0,n.height,t.left,1/0)),t.left+t.width<n.width-s&&i.push(this.addRect(t.left+t.width,n.height,n.width-t.left-t.width,1/0)),n.height=t.top+t.height),c&&t.left+t.width>n.width+e&&(t.top>s&&i.push(this.addRect(n.width,0,1/0,t.top)),t.top+t.height<n.height-s&&i.push(this.addRect(n.width,t.top+t.height,1/0,n.height-t.top-t.height)),n.width=t.left+t.width),!m)for(h&&(a=0);a<l.length;a++)if(r=l[a])for(o=this.getRect(r),u=this.splitRect(o,t),d=0;d<u.length;d++)r=u[d],o=this.getRect(r),(c?o.left+e<n.width-e:o.top+e<n.height-e)&&i.push(r);return i.length>1&&this.purgeRects(i).sort(c?this.sortRectsLeftTop:this.sortRectsTopLeft),this.currentRects=i,this.nextRects=l,t},t.prototype.addRect=function(t,n,s,o){var e=++this.rectId;return this.rectStore[e]=t||0,this.rectStore[++this.rectId]=n||0,this.rectStore[++this.rectId]=s||0,this.rectStore[++this.rectId]=o||0,e},t.prototype.getRect=function(t,e){return e||(e=this.rectTarget),e.left=this.rectStore[t]||0,e.top=this.rectStore[++t]||0,e.width=this.rectStore[++t]||0,e.height=this.rectStore[++t]||0,e},t.prototype.splitRect=(n=[],o=0,i=0,function(t,a){return n.length=0,t.left+t.width<=a.left+e||a.left+a.width<=t.left+e||t.top+t.height<=a.top+e||a.top+a.height<=t.top+e?(n.push(this.addRect(t.left,t.top,t.width,t.height)),n):((o=a.left-t.left)>=s&&n.push(this.addRect(t.left,t.top,o,t.height)),(o=t.left+t.width-(a.left+a.width))>=s&&n.push(this.addRect(a.left+a.width,t.top,o,t.height)),(i=a.top-t.top)>=s&&n.push(this.addRect(t.left,t.top,t.width,i)),(i=t.top+t.height-(a.top+a.height))>=s&&n.push(this.addRect(t.left,a.top+a.height,t.width,i)),n)}),t.prototype.isRectAWithinRectB=function(t,n){return t.left+e>=n.left&&t.top+e>=n.top&&t.left+t.width-e<=n.left+n.width&&t.top+t.height-e<=n.top+n.height},t.prototype.purgeRects=(a={},r={},function(e){for(var t,n=e.length;n--;)if(t=e.length,e[n])for(this.getRect(e[n],a);t--;)if(e[t]&&n!==t&&(this.getRect(e[t],r),this.isRectAWithinRectB(a,r))){e[n]=0;break}return e}),t.prototype.sortRectsTopLeft=function(){var t={},n={};return function(s,o){return this.getRect(s,t),this.getRect(o,n),t.top<n.top&&t.top+e<n.top?-1:t.top>n.top&&t.top-e>n.top?1:t.left<n.left&&t.left+e<n.left?-1:t.left>n.left&&t.left-e>n.left?1:0}}(),t.prototype.sortRectsLeftTop=function(){var t={},n={};return function(s,o){return this.getRect(s,t),this.getRect(o,n),t.left<n.left&&t.left+e<n.left?-1:t.left>n.left&&t.left-e<n.left?1:t.top<n.top&&t.top+e<n.top?-1:t.top>n.top&&t.top-e>n.top?1:0}}(),d)&&(l=new t,self.onmessage=function(s){var e=new Float32Array(s.data),n=e.subarray(4,e.length),o=new Float32Array(n.length),i=e[3],t={items:n,slots:o,width:e[1],height:e[2]};l.computeLayout(t,i),e[1]=t.width,e[2]=t.height,e.set(t.slots,4),postMessage(e.buffer,[e.buffer])}),t}a.prototype.getGrid=function(){return eo[this._gridId]},a.prototype.getElement=function(){return this._element},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a.prototype.getMargin=function(){return{left:this._marginLeft,right:this._marginRight,top:this._marginTop,bottom:this._marginBottom}},a.prototype.getPosition=function(){return{left:this._left,top:this._top}},a.prototype.isActive=function(){return this._isActive},a.prototype.isVisible=function(){return!!this._visibility&&!this._visibility._isHidden},a.prototype.isShowing=function(){return!!this._visibility&&!!this._visibility._isShowing},a.prototype.isHiding=function(){return!!this._visibility&&!!this._visibility._isHiding},a.prototype.isPositioning=function(){return!!this._layout&&!!this._layout._isActive},a.prototype.isDragging=function(){return!!this._drag&&!!this._drag._isActive},a.prototype.isReleasing=function(){return!!this._dragRelease&&!!this._dragRelease._isActive},a.prototype.isDestroyed=function(){return this._isDestroyed},a.prototype._refreshDimensions=function(s){if(!(this._isDestroyed||!0!==s&&this._visibility._isHidden)){var e=this._element,t=this._dragPlaceholder,n=e.getBoundingClientRect();this._width=n.width,this._height=n.height,this._marginLeft=Math.max(0,u(e,"margin-left")),this._marginRight=Math.max(0,u(e,"margin-right")),this._marginTop=Math.max(0,u(e,"margin-top")),this._marginBottom=Math.max(0,u(e,"margin-bottom")),t&&t.updateDimensions()}},a.prototype._refreshSortData=function(){if(!this._isDestroyed){var e,n=this._sortData={},t=this.getGrid()._settings.sortData;for(e in t)n[e]=t[e](this,this._element)}},a.prototype._addToLayout=function(e,t){!0!==this._isActive&&(this._isActive=!0,this._left=e||0,this._top=t||0)},a.prototype._removeFromLayout=function(){!1!==this._isActive&&(this._isActive=!1,this._left=0,this._top=0)},a.prototype._canSkipLayout=function(e,t){return this._left===e&&this._top===t&&!this._migrate._isActive&&!this._layout._skipNextAnimation&&!this._dragRelease.isJustReleased()},a.prototype._setTranslate=function(e,t){return(this._tX!==e||this._tY!==t)&&(this._tX=e,this._tY=t,this._element.style[v]=M(e,t),!0)},a.prototype._destroy=function(t){if(!this._isDestroyed){var e=this._element,n=this.getGrid()._settings;this._dragPlaceholder.destroy(),this._dragRelease.destroy(),this._migrate.destroy(),this._layout.destroy(),this._visibility.destroy(),this._drag&&this._drag.destroy(),this._emitter.destroy(),r(e,n.itemClass),t&&e.parentNode.removeChild(e),T&&T.delete(e),this._isActive=!1,this._isDestroyed=!0}};var t_=ts(),P=null,eu=[];function j(e,t){if(this._options=0,this._processor=null,this._layoutQueue=[],this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={},this._workers=[],this._onWorkerMessage=this._onWorkerMessage.bind(this),this.setOptions(t),(e="number"==typeof e?Math.max(0,e):0)&&window.Worker&&window.URL&&window.Blob)try{this._workers=function(n,s){var e,t,o=[];if(n>0){P||(P=URL.createObjectURL(new Blob(["("+ts.toString()+")(true)"],{type:"application/javascript"})));for(t=0;t<n;t++)e=new Worker(P),s&&(e.onmessage=s),o.push(e),eu.push(e)}return o}(e,this._onWorkerMessage)}catch(e){this._processor=new t_}else this._processor=new t_}j.prototype._sendToWorker=function(){if(this._layoutQueue.length&&this._workers.length){var e=this._layoutQueue.shift(),t=this._workers.pop(),n=this._layoutWorkerData[e];delete this._layoutWorkerData[e],this._layoutWorkers[e]=t,t.postMessage(n.buffer,[n.buffer])}},j.prototype._onWorkerMessage=function(i){var n=new Float32Array(i.data),t=n[0],e=this._layouts[t],s=this._layoutCallbacks[t],o=this._layoutWorkers[t];e&&delete this._layouts[t],s&&delete this._layoutCallbacks[t],o&&delete this._layoutWorkers[t],e&&s&&(e.width=n[1],e.height=n[2],e.slots=n.subarray(4,n.length),this._finalizeLayout(e),s(e)),o&&(this._workers.push(o),this._sendToWorker())},j.prototype._finalizeLayout=function(e){var t=e._grid,s=2&e._settings,n="border-box"===t._boxSizing;return delete e._grid,delete e._settings,e.styles={},s?e.styles.width=(n?e.width+t._borderLeft+t._borderRight:e.width)+"px":e.styles.height=(n?e.height+t._borderTop+t._borderBottom:e.height)+"px",e},j.prototype.setOptions=function(e){var t,n,s,o,i;e&&(t="boolean"==typeof e.fillGaps?e.fillGaps?1:0:1&this._options,n="boolean"==typeof e.horizontal?e.horizontal?2:0:2&this._options,s="boolean"==typeof e.alignRight?e.alignRight?4:0:4&this._options,o="boolean"==typeof e.alignBottom?e.alignBottom?8:0:8&this._options,i="boolean"==typeof e.rounding?e.rounding?16:0:16&this._options,this._options=t|n|s|o|i)},j.prototype.createLayout=function(l,n,s,d,u,r){if(this._layouts[n])throw new Error("A layout with the provided id is currently being processed.");var t,o,i,a,c=2&this._options,e={id:n,items:s,slots:null,width:c?0:d,height:c?u:0,_grid:l,_settings:this._options};if(!s.length)return e.slots=[],this._finalizeLayout(e),void r(e);if(this._processor)return e.slots=window.Float32Array?new Float32Array(2*s.length):new Array(2*s.length),this._processor.computeLayout(e,e._settings),this._finalizeLayout(e),void r(e);t=new Float32Array(4+2*s.length);for(t[0]=n,t[1]=e.width,t[2]=e.height,t[3]=e._settings,i=0,a=3;i<s.length;i++)o=s[i],t[++a]=o._width+o._marginLeft+o._marginRight,t[++a]=o._height+o._marginTop+o._marginBottom;return this._layoutQueue.push(n),this._layouts[n]=e,this._layoutCallbacks[n]=r,this._layoutWorkerData[n]=t,this._sendToWorker(),this.cancelLayout.bind(this,n)},j.prototype.cancelLayout=function(e){if(this._layouts[e]&&(delete this._layouts[e],delete this._layoutCallbacks[e],this._layoutWorkerData[e])){delete this._layoutWorkerData[e];var t=this._layoutQueue.indexOf(e);t>-1&&this._layoutQueue.splice(t,1)}},j.prototype.destroy=function(){for(var e in this._layoutWorkers)this._workers.push(this._layoutWorkers[e]);!function(n){for(var e,s,t=0;t<n.length;t++)(e=n[t]).onmessage=null,e.onerror=null,e.onmessageerror=null,e.terminate(),(s=eu.indexOf(e))>-1&&eu.splice(s,1);P&&!eu.length&&(URL.revokeObjectURL(P),P=null)}(this._workers),this._workers.length=0,this._layoutQueue.length=0,this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={}},tp=0;function tE(r,s){var a=++tp,e=0,t=0,i=!1,n=function(s){i||(t&&(e-=s-t),t=s,e>0?function(e,t){o.add(0,e$+e,t)}(a,n):(e=t=0,r()))};return function(c){if(!i){if(!(s<=0))return!0===c?(i=!0,e=t=0,n=void 0,void function(e){o.remove(0,e$+e)}(a)):void(e<=0?(e=s,n(0)):e=s);!0!==c&&r()}}}function e7(t){var e=Object.prototype.toString.call(t);return"[object HTMLCollection]"===e||"[object NodeList]"===e}tw=Object.prototype.toString;function eJ(e){return"object"==typeof e&&"[object Object]"===tw.call(e)}function tM(){}var D,eQ="number",e3="string",k="instant",eR=0;function n(t,o){if(typeof t===e3&&(t=document.querySelector(t)),!(t.getRootNode?t.getRootNode({composed:!0})===document:document.body.contains(t))||t===document.documentElement)throw new Error("Container element must be an existing DOM element.");var e=function(t,e){var n=q({},t);return e&&(n=q(n,e)),e&&e.visibleStyles?n.visibleStyles=e.visibleStyles:t&&t.visibleStyles&&(n.visibleStyles=t.visibleStyles),e&&e.hiddenStyles?n.hiddenStyles=e.hiddenStyles:t&&t.hiddenStyles&&(n.hiddenStyles=t.hiddenStyles),n}(n.defaultOptions,o);e.visibleStyles=t1(e.visibleStyles),e.hiddenStyles=t1(e.hiddenStyles),s(e.dragSort)||(e.dragSort=!!e.dragSort),this._id=tb(),this._element=t,this._settings=e,this._isDestroyed=!1,this._items=[],this._layout={id:0,items:[],slots:[]},this._isLayoutFinished=!0,this._nextLayoutData=null,this._emitter=new h,this._onLayoutDataReceived=this._onLayoutDataReceived.bind(this),eo[this._id]=this,d(t,e.containerClass),function(t,e){typeof e!==eQ&&(e=!0===e?0:-1),e>=0&&(t._resizeHandler=tE(function(){t.refreshItems().layout()},e),window.addEventListener("resize",t._resizeHandler))}(this,e.layoutOnResize),this.add(function(s,e){if("*"===e)return s.children;if(typeof e===e3){for(var o=[],n=s.children,t=0;t<n.length;t++)et(n[t],e)&&o.push(n[t]);return o}return Array.isArray(e)||e7(e)?e:[]}(t,e.items),{layout:!1}),e.layoutOnInit&&this.layout(!0)}function q(t,n){var e,s,o,i=Object.keys(n),a=i.length;for(s=0;s<a;s++)o=eJ(n[e=i[s]]),eJ(t[e])&&o?t[e]=q(q({},t[e]),n[e]):o?t[e]=q({},n[e]):Array.isArray(n[e])?t[e]=n[e].slice(0):t[e]=n[e];return t}function t1(t){var e,n,s={},o=document.documentElement.style;for(e in t)t[e]&&(n=el(o,e))&&(s[n]=t[e]);return s}function tj(t){for(var n={},e=0;e<t.length;e++)n[t[e]._id]=e;return n}function em(e,t,n){return e[t._id]-e[n._id]}return n.Item=a,n.ItemLayout=O,n.ItemVisibility=f,n.ItemMigrate=J,n.ItemDrag=t,n.ItemDragRelease=S,n.ItemDragPlaceholder=c,n.Emitter=h,n.Animator=b,n.Dragger=e,n.Packer=j,n.AutoScroller=i,n.defaultPacker=new j(2),n.defaultOptions={items:"*",showDuration:300,showEasing:"ease",hideDuration:300,hideEasing:"ease",visibleStyles:{opacity:"1",transform:"scale(1)"},hiddenStyles:{opacity:"0",transform:"scale(0.5)"},layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1},layoutOnResize:150,layoutOnInit:!0,layoutDuration:300,layoutEasing:"ease",sortData:null,dragEnabled:!1,dragContainer:null,dragHandle:null,dragStartPredicate:{distance:0,delay:0},dragAxis:"xy",dragSort:!0,dragSortHeuristics:{sortInterval:100,minDragDistance:10,minBounceBackAngle:1},dragSortPredicate:{threshold:50,action:z,migrateAction:z},dragRelease:{duration:300,easing:"ease",useDragContainer:!0},dragCssProps:{touchAction:"none",userSelect:"none",userDrag:"none",tapHighlightColor:"rgba(0, 0, 0, 0)",touchCallout:"none",contentZooming:"none"},dragPlaceholder:{enabled:!1,createElement:null,onCreate:null,onRemove:null},dragAutoScroll:{targets:[],handle:null,threshold:50,safeZone:.2,speed:i.smoothSpeed(1e3,2e3,2500),sortDuringScroll:!0,smoothStop:!1,onStart:null,onStop:null},containerClass:"muuri",itemClass:"muuri-item",itemVisibleClass:"muuri-item-shown",itemHiddenClass:"muuri-item-hidden",itemPositioningClass:"muuri-item-positioning",itemDraggingClass:"muuri-item-dragging",itemReleasingClass:"muuri-item-releasing",itemPlaceholderClass:"muuri-item-placeholder"},n.prototype.on=function(e,t){return this._emitter.on(e,t),this},n.prototype.off=function(e,t){return this._emitter.off(e,t),this},n.prototype.getElement=function(){return this._element},n.prototype.getItem=function(e){if(this._isDestroyed||!e&&0!==e)return null;if(typeof e===eQ)return this._items[e>-1?e:this._items.length+e]||null;if(e instanceof a)return e._gridId===this._id?e:null;if(T){var t,n=T.get(e);return n&&n._gridId===this._id?n:null}for(t=0;t<this._items.length;t++)if(this._items[t]._element===e)return this._items[t];return null},n.prototype.getItems=function(e){if(this._isDestroyed||void 0===e)return this._items.slice(0);var t,n,s=[];if(Array.isArray(e)||e7(e))for(t=0;t<e.length;t++)(n=this.getItem(e[t]))&&s.push(n);else(n=this.getItem(e))&&s.push(n);return s},n.prototype.refreshItems=function(a,o){if(this._isDestroyed)return this;var e,t,n,i,s=a||this._items;if(!0===o)for(n=[],e=0;e<s.length;e++)(i=s[e]).isVisible()||i.isHiding()||((t=i.getElement().style).visibility="hidden",t.display="",n.push(t));for(e=0;e<s.length;e++)s[e]._refreshDimensions(o);if(!0===o){for(e=0;e<n.length;e++)(t=n[e]).visibility="",t.display="none";n.length=0}return this},n.prototype.refreshSortData=function(n){if(this._isDestroyed)return this;for(var t=n||this._items,e=0;e<t.length;e++)t[e]._refreshSortData();return this},n.prototype.synchronize=function(){if(this._isDestroyed)return this;var e,t,s,n=this._items;if(!n.length)return this;for(t=0;t<n.length;t++)(s=n[t]._element).parentNode===this._element&&(e=e||document.createDocumentFragment()).appendChild(s);return e?(this._element.appendChild(e),this._emit("synchronize"),this):this},n.prototype.layout=function(u,h){if(this._isDestroyed)return this;i=this._nextLayoutData,i&&s(i.cancel)&&i.cancel(),e=eR=eR%16777216+1,this._nextLayoutData={id:e,instant:u,onFinish:h,cancel:null};for(var e,i,a=this._items,r=[],t=0;t<a.length;t++)a[t]._isActive&&r.push(a[t]);this._refreshDimensions();var o,l=this._width-this._borderLeft-this._borderRight,d=this._height-this._borderTop-this._borderBottom,c=this._settings.layout;return s(c)?o=c(this,e,r,l,d,this._onLayoutDataReceived):(n.defaultPacker.setOptions(c),o=n.defaultPacker.createLayout(this,e,r,l,d,this._onLayoutDataReceived)),s(o)&&this._nextLayoutData&&this._nextLayoutData.id===e&&(this._nextLayoutData.cancel=o),this},n.prototype.add=function(d,h){if(this._isDestroyed||!d)return[];if(t=e7(l=d)?Array.prototype.slice.call(l):Array.prototype.concat(l),!t.length)return t;var e,t,o,i,r,l,n=h||{},c=n.layout?n.layout:void 0===n.layout,m=this._items,u=!1;for(e=0;e<t.length;e++)(r=t[e]).parentNode!==this._element&&(i=i||document.createDocumentFragment()).appendChild(r);for(i&&this._element.appendChild(i),e=0;e<t.length;e++)r=t[e],(o=t[e]=new a(this,r,n.active))._isActive&&(u=!0,o._layout._skipNextAnimation=!0);for(e=0;e<t.length;e++)(o=t[e])._refreshDimensions(),o._refreshSortData();return eA(m,t,n.index),this._hasListeners("add")&&this._emit("add",t.slice(0)),u&&c&&this.layout(c===k,s(c)?c:void 0),t},n.prototype.remove=function(i,d){if(this._isDestroyed||!i.length)return[];var e,n,c,o=d||{},t=o.layout?o.layout:void 0===o.layout,r=!1,u=this.getItems(),a=[],l=[];for(n=0;n<i.length;n++)(e=i[n])._isDestroyed||-1!==(c=this._items.indexOf(e))&&(e._isActive&&(r=!0),a.push(e),l.push(u.indexOf(e)),e._destroy(o.removeElements),this._items.splice(c,1));return this._hasListeners(eI)&&this._emit(eI,a.slice(0),l),r&&t&&this.layout(t===k,s(t)?t:void 0),a},n.prototype.show=function(e,t){return!this._isDestroyed&&e.length&&this._setItemsVisibility(e,!0,t),this},n.prototype.hide=function(e,t){return!this._isDestroyed&&e.length&&this._setItemsVisibility(e,!1,t),this},n.prototype.filter=function(c,m){if(this._isDestroyed||!this._items.length)return this;var o,r,t=[],n=[],p=typeof c===e3,l=s(c),e=m||{},d=!0===e.instant,u=e.syncWithLayout,a=e.layout?e.layout:void 0===e.layout,h=s(e.onFinish)?e.onFinish:null,f=-1,i=tM;if(h&&(i=function(){++f&&h(t.slice(0),n.slice(0))}),l||p)for(r=0;r<this._items.length;r++)o=this._items[r],(l?c(o):et(o._element,c))?t.push(o):n.push(o);return t.length?this.show(t,{instant:d,syncWithLayout:u,onFinish:i,layout:!1}):i(),n.length?this.hide(n,{instant:d,syncWithLayout:u,onFinish:i,layout:!1}):i(),(t.length||n.length)&&(this._hasListeners(eY)&&this._emit(eY,t.slice(0),n.slice(0)),a&&this.layout(a===k,s(a)?a:void 0)),this},n.prototype.sort=function(){var e,t,n,o;function i(s,i){for(var a,r,d,u,c=0,l=0;l<t.length;l++)if(d=t[l][0],u=t[l][1],a=(s._sortData?s:s._refreshSortData())._sortData[d],r=(i._sortData?i:i._refreshSortData())._sortData[d],c="desc"===u||!u&&n?r<a?-1:r>a?1:0:a<r?-1:a>r?1:0)return c;return c||(e||(e=tj(o)),c=n?em(e,i,s):em(e,s,i)),c}function a(s,i){var a=n?-t(s,i):t(s,i);return a||(e||(e=tj(o)),a=n?em(e,i,s):em(e,s,i)),a}return function(c,u){if(this._isDestroyed||this._items.length<2)return this;var r=this._items,l=u||{},d=l.layout?l.layout:void 0===l.layout;if(n=!!l.descending,o=r.slice(0),e=null,s(c))t=c,r.sort(a);else if(typeof c===e3)t=c.trim().split(" ").filter(function(e){return e}).map(function(e){return e.split(":")}),r.sort(i);else{if(!Array.isArray(c))throw t=n=o=e=null,new Error("Invalid comparer argument provided.");r.length=0,r.push.apply(r,c)}return this._hasListeners(eZ)&&this._emit(eZ,r.slice(0),o),d&&this.layout(d===k,s(d)?d:void 0),t=n=o=e=null,this}}(),n.prototype.move=function(l,d,u){if(this._isDestroyed||this._items.length<2)return this;var n,o,i=this._items,e=u||{},t=e.layout?e.layout:void 0===e.layout,c=e.action===g,h=c?g:z,a=this.getItem(l),r=this.getItem(d);return a&&r&&a!==r&&(n=i.indexOf(a),o=i.indexOf(r),c?ez(i,n,o):eT(i,n,o),this._hasListeners(e2)&&this._emit(e2,{item:a,fromIndex:n,toIndex:o,action:h}),t&&this.layout(t===k,s(t)?t:void 0)),this},n.prototype.send=function(t,n,a,r){if(this._isDestroyed||n._isDestroyed||this===n)return this;if(!(t=this.getItem(t)))return this;var e=r||{},c=e.appendTo||document.body,o=e.layoutSender?e.layoutSender:void 0===e.layoutSender,i=e.layoutReceiver?e.layoutReceiver:void 0===e.layoutReceiver;return t._migrate.start(n,a,c),t._migrate._isActive&&t._isActive&&(o&&this.layout(o===k,s(o)?o:void 0),i&&n.layout(i===k,s(i)?i:void 0)),this},n.prototype.destroy=function(i){if(this._isDestroyed)return this;var e,t,n,s=this._element,o=this._items.slice(0),a=this._layout&&this._layout.styles||{};for((t=this)._resizeHandler&&(t._resizeHandler(!0),window.removeEventListener("resize",t._resizeHandler),t._resizeHandler=null),e=0;e<o.length;e++)o[e]._destroy(i);for(n in this._items.length=0,r(s,this._settings.containerClass),a)s.style[n]="";return this._emit("destroy"),this._emitter.destroy(),delete eo[this._id],this._isDestroyed=!0,this},n.prototype._emit=function(){this._isDestroyed||this._emitter.emit.apply(this._emitter,arguments)},n.prototype._hasListeners=function(e){return!this._isDestroyed&&this._emitter.countListeners(e)>0},n.prototype._updateBoundingRect=function(){var e=this._element.getBoundingClientRect();this._width=e.width,this._height=e.height,this._left=e.left,this._top=e.top,this._right=e.right,this._bottom=e.bottom},n.prototype._updateBorders=function(t,n,s,o){var e=this._element;t&&(this._borderLeft=u(e,"border-left-width")),n&&(this._borderRight=u(e,"border-right-width")),s&&(this._borderTop=u(e,"border-top-width")),o&&(this._borderBottom=u(e,"border-bottom-width"))},n.prototype._refreshDimensions=function(){this._updateBoundingRect(),this._updateBorders(1,1,1,1),this._boxSizing=l(this._element,"box-sizing")},n.prototype._onLayoutDataReceived=(D=[],function(e){if(!this._isDestroyed&&this._nextLayoutData&&this._nextLayoutData.id===e.id){var t,n,r,c,l,i=this,a=this._nextLayoutData.instant,u=this._nextLayoutData.onFinish,d=e.items.length,o=d;for(this._nextLayoutData=null,!this._isLayoutFinished&&this._hasListeners(eL)&&this._emit(eL,this._layout.items.slice(0)),this._layout=e,D.length=0,t=0;t<d;t++)(n=e.items[t])?(r=e.slots[2*t],c=e.slots[2*t+1],n._canSkipLayout(r,c)?--o:(n._left=r,n._top=c,n.isActive()&&!n.isDragging()?D.push(n):--o)):--o;if(e.styles&&I(this._element,e.styles),!this._hasListeners(A)||(this._emit(A,e.items.slice(0),!0===a),this._layout.id===e.id)){if(l=function(){if(!(--o>0)){var t=i._layout.id!==e.id,n=s(a)?a:u;t||(i._isLayoutFinished=!0),s(n)&&n(e.items.slice(0),t),!t&&i._hasListeners(eN)&&i._emit(eN,e.items.slice(0))}},!D.length)return l(),this;for(this._isLayoutFinished=!1,t=0;t<D.length&&this._layout.id===e.id;t++)D[t]._layout.start(!0===a,l);return this._layout.id===e.id&&(D.length=0),this}}}),n.prototype._setItemsVisibility=function(j,o,b){var e,t,i=this,n=j.slice(0),a=b||{},v=!0===a.instant,r=a.onFinish,u=a.layout?a.layout:void 0===a.layout,m=n.length,p=o?"showStart":K,l=o?"showEnd":"hideEnd",g=o?"show":"hide",h=!1,c=[],d=[];if(m){for(t=0;t<n.length;t++)e=n[t],(o&&!e._isActive||!o&&e._isActive)&&(h=!0),e._layout._skipNextAnimation=!!o&&!e._isActive,o&&e._visibility._isHidden&&d.push(e),o?e._addToLayout():e._removeFromLayout();d.length&&(this.refreshItems(d,!0),d.length=0),h&&!1!==a.syncWithLayout?this.on(A,f):f(),h&&u&&this.layout(u===k,s(u)?u:void 0)}else s(r)&&r(n);function f(){for(h&&!1!==a.syncWithLayout&&i.off(A,f),i._hasListeners(p)&&i._emit(p,n.slice(0)),t=0;t<n.length;t++)n[t]._gridId===i._id?n[t]._visibility[g](v,function(e,t){e||c.push(t),--m<1&&(s(r)&&r(c.slice(0)),i._hasListeners(l)&&i._emit(l,c.slice(0)))}):--m<1&&(s(r)&&r(c.slice(0)),i._hasListeners(l)&&i._emit(l,c.slice(0)))}},n});const options={items:'*',showDuration:700,showEasing:'cubic-bezier(0.215, 0.61, 0.355, 1)',hideDuration:700,hideEasing:'cubic-bezier(0.215, 0.61, 0.355, 1)',visibleStyles:{opacity:'1',transform:'scale(1)'},hiddenStyles:{opacity:'0',transform:'scale(0.5)'},layout:{fillGaps:!0,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1},layoutOnResize:150,layoutOnInit:!0,layoutDuration:300,layoutEasing:'cubic-bezier(0.215, 0.61, 0.355, 1)',sortData:null,dragEnabled:!1,containerClass:'muuri',itemClass:'muuri-item',itemVisibleClass:'muuri-item-shown',itemHiddenClass:'muuri-item-hidden',itemPositioningClass:'muuri-item-positioning',itemDraggingClass:'muuri-item-dragging',itemReleasingClass:'muuri-item-releasing',itemPlaceholderClass:'muuri-item-placeholder'};if(document.getElementsByClassName("muugrid"))var muugrid=new Muuri('.muugrid',options),searchField,searchFieldValue,itemz,filt;searchField=document.querySelector('.search-field'),itemz=document.querySelector('.item'),searchField.value='',searchField.addEventListener('keyup',function(){var e=searchField.value.toLowerCase();searchFieldValue!==e&&(searchFieldValue=e,filter())});function filter(){muugrid.filter(function(e){var t=e.getElement(),n=!searchFieldValue||(t.getAttribute('data-search')||'').toLowerCase().indexOf(searchFieldValue)>-1;return n}),showPic()}location.href.indexOf("#")!=-1&&(filt=window.location.hash,filt="."+filt.substring(1),filt=='.'?muugrid.filter('*'):muugrid.filter(filt));function menuFilter(e){e=='.'?muugrid.filter('*'):muugrid.filter(e),window.scrollTo({top:0,behavior:'smooth'});var t=e.substring(1);window.location.hash=t,showPic()}