!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).lgHash=t()}(this,function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,s,n=1,o=arguments.length;n<o;n++)for(s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},t="lgAfterSlide",n="lgAfterClose",s={hash:!0,galleryId:"1",customSlideName:!1};return function(){function o(t,n){return this.core=t,this.$LG=n,this.settings=e(e({},s),this.core.settings),this}return o.prototype.init=function(){var e=this;this.settings.hash&&(this.oldHash=window.location.hash,setTimeout(function(){e.buildFromHash()},100),this.core.LGel.on(t+".hash",this.onAfterSlide.bind(this)),this.core.LGel.on(n+".hash",this.onCloseAfter.bind(this)),this.$LG(window).on("hashchange.lg.hash.global"+this.core.lgId,this.onHashchange.bind(this)))},o.prototype.onAfterSlide=function(e){var t=this.core.galleryItems[e.detail.index].slideName,t=this.settings.customSlideName&&t||e.detail.index;history.replaceState?history.replaceState(null,"",window.location.pathname+window.location.search+"#lg="+this.settings.galleryId+"&slide="+t):window.location.hash="lg="+this.settings.galleryId+"&slide="+t},o.prototype.getIndexFromUrl=function(e){0[0]===e&&(e=window.location.hash);var t,s=e.split("&slide=")[1],n=0;if(this.settings.customSlideName){for(t=0;t<this.core.galleryItems.length;t++)if(this.core.galleryItems[t].slideName===s){n=t;break}}else n=parseInt(s,10);return n!=n?0:n},o.prototype.buildFromHash=function(){var t,e=window.location.hash;if(e.indexOf("lg="+this.settings.galleryId)>0)return this.$LG(document.body).addClass("lg-from-hash"),t=this.getIndexFromUrl(e),this.core.openGallery(t),!0},o.prototype.onCloseAfter=function(){this.oldHash&&this.oldHash.indexOf("lg="+this.settings.galleryId)<0?history.replaceState?history.replaceState(null,"",this.oldHash):window.location.hash=this.oldHash:history.replaceState?history.replaceState(null,document.title,window.location.pathname+window.location.search):window.location.hash=""},o.prototype.onHashchange=function(){if(this.core.lgOpened){var e=window.location.hash,t=this.getIndexFromUrl(e);e.indexOf("lg="+this.settings.galleryId)>-1?this.core.slide(t,!1,!1):this.core.lGalleryOn&&this.core.closeGallery()}},o.prototype.closeGallery=function(){this.settings.hash&&this.$LG(document.body).removeClass("lg-from-hash")},o.prototype.destroy=function(){this.core.LGel.off(".lg.hash"),this.core.LGel.off(".hash"),this.$LG(window).off("hashchange.lg.hash.global"+this.core.lgId)},o}()})